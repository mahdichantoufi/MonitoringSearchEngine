{"code":"!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=116)}([function(e,t,r){\"use strict\";const{clone:n,cloneDeep:o}=r(44),s=10;function i(e){return null!==e&&\"object\"==typeof e}function a(e){return Array.isArray(e)?e:[e]}function l(e,t,r){return e===t||function(e,t,r){const n=typeof t,o=\"object\"==typeof e&&!r(e,null),s=\"object\"===n&&!r(t,null);if(o&&s){const n=Array.isArray(e),o=Array.isArray(t);return n&&o?function(e,t,r){if(e.length!==t.length)return!1;for(let n=0,o=e.length;n<o;++n)if(!l(e[n],t[n],r))return!1;return!0}(e,t,r):!n&&!o&&function(e,t,r){if(e.constructor===Date&&t.constructor===Date)return n=t,e.getTime()===n.getTime();var n;const o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(let n=0,s=o.length;n<s;++n){const s=o[n];if(!l(e[s],t[s],r))return!1}return!0}(e,t,r)}return o===s&&r(e,t)}(e,t,r)}function u(e,t){return e===t}e.exports={isEmpty:function(e){return Array.isArray(e)?0===e.length:!i(e)||0===Object.keys(e).length},isString:function(e){return\"string\"==typeof e},isRegExp:function(e){return e instanceof RegExp},isObject:i,isNumber:function(e){return\"number\"==typeof e},isFunction:function(e){return\"function\"==typeof e},jsonEquals:function(e,t){return l(e,t,u)},isPlainObject:function(e){return i(e)&&(!e.constructor||e.constructor===Object)&&(!e.toString||e.toString===Object.prototype.toString)},difference:function(e,t){const r=new Set(t),n=[];for(let t=0;t<e.length;++t){const o=e[t];r.has(o)||n.push(o)}return n},upperFirst:function(e){return e[0].toUpperCase()+e.substring(1)},zipObject:function(e,t){const r={};for(let n=0,o=e.length;n<o;++n)r[e[n]]=t[n];return r},cloneDeep:o,asSingle:function(e){return Array.isArray(e)?e[0]:e},asArray:a,flatten:function(e){const t=[];for(let r=0,n=e.length;r<n;++r){const n=e[r];if(Array.isArray(n))for(let e=0;e<n.length;++e)t.push(n[e]);else t.push(n)}return t},groupBy:function(e,t=null){const r=new Map;for(const n of e){const e=null!==t?t(n):n;let o=r.get(e);o||(o=[],r.set(e,o)),o.push(n)}return r},uniqBy:function(e,t=null){const r=new Map;for(let n=0,o=e.length;n<o;++n){const o=e[n],s=null!==t?t(o):o;r.set(s,o)}return Array.from(r.values())},values:function(e){if(i(e)){const t=Object.keys(e),r=new Array(t.length);for(let n=0,o=t.length;n<o;++n)r[n]=e[t[n]];return r}return[]},union:function(e,t){return e.length<s&&t.length<s?function(e,t){const r=e.slice();for(let e=0,n=t.length;e<n;++e){const n=t[e];-1===r.indexOf(n)&&r.push(n)}return r}(e,t):function(e,t){const r=new Set;for(let t=0;t<e.length;++t)r.add(e[t]);for(let e=0;e<t.length;++e)r.add(t[e]);return Array.from(r)}(e,t)},chunk:function(e,t){const r=[];for(let n=0,o=e.length;n<o;++n){const o=e[n];0!==r.length&&r[r.length-1].length!==t||r.push([]),r[r.length-1].push(o)}return r},clone:n,omit:function(e,t){t=a(t);const r=Object.keys(e),n={};for(let o=0,s=r.length;o<s;++o){const s=r[o];t.includes(s)||(n[s]=e[s])}return n},once:function(e){let t=!1,r=void 0;return function(){return!1===t&&(t=!0,r=e.apply(this,arguments)),r}},last:function(e){return e[e.length-1]},get:function(e,t){for(let r=0,n=t.length;r<n;++r){const n=t[r];if(!i(e))return;e=e[n]}return e},set:function(e,t,r){const n=e;for(let r=0,n=t.length-1;r<n;++r){const n=t[r];let o=e[n];if(!i(o)){const s=t[r+1];o=isNaN(s)?{}:[],e[n]=o}e=o}return t.length>0&&i(e)&&(e[t[t.length-1]]=r),n}}},function(e,t,r){\"use strict\";const n={onAdd:\"hasOnAdd\",onBefore1:\"hasOnBefore1\",onBefore2:\"hasOnBefore2\",onBefore3:\"hasOnBefore3\",onBuild:\"hasOnBuild\",onBuildKnex:\"hasOnBuildKnex\",onRawResult:\"hasOnRawResult\",queryExecutor:\"hasQueryExecutor\",onAfter1:\"hasOnAfter1\",onAfter2:\"hasOnAfter2\",onAfter3:\"hasOnAfter3\",onError:\"hasOnError\"};class o{constructor(e=null,t={}){this.name=e,this.opt=t,this.adderHookName=null,this.parentOperation=null,this.childOperations=[]}is(e){return this instanceof e}hasHook(e){return this[n[e]]()}onAdd(e,t){return!0}hasOnAdd(){return!0}onBefore1(e,t){}hasOnBefore1(){return this.onBefore1!==o.prototype.onBefore1}onBefore2(e,t){}hasOnBefore2(){return this.onBefore2!==o.prototype.onBefore2}onBefore3(e,t){}hasOnBefore3(){return this.onBefore3!==o.prototype.onBefore3}onBuild(e){}hasOnBuild(){return this.onBuild!==o.prototype.onBuild}onBuildKnex(e,t){}hasOnBuildKnex(){return this.onBuildKnex!==o.prototype.onBuildKnex}onRawResult(e,t){return t}hasOnRawResult(){return this.onRawResult!==o.prototype.onRawResult}onAfter1(e,t){return t}hasOnAfter1(){return this.onAfter1!==o.prototype.onAfter1}onAfter2(e,t){return t}hasOnAfter2(){return this.onAfter2!==o.prototype.onAfter2}onAfter3(e,t){return t}hasOnAfter3(){return this.onAfter3!==o.prototype.onAfter3}queryExecutor(e){}hasQueryExecutor(){return this.queryExecutor!==o.prototype.queryExecutor}onError(e,t){}hasOnError(){return this.onError!==o.prototype.onError}isAncestorInSet(e){let t=this.parentOperation;for(;t;){if(e.has(t))return!0;t=t.parentOperation}return!1}clone(){const e=new this.constructor(this.name,this.opt);return e.adderHookName=this.adderHookName,e.parentOperation=this.parentOperation,e.childOperations=this.childOperations.map(t=>{const r=t.clone();return r.parentOperation=e,r}),e}addChildOperation(e,t){t.adderHookName=e,t.parentOperation=this,this.childOperations.push(t)}removeChildOperation(e){const t=this.childOperations.indexOf(e);-1!==t&&(e.parentOperation=null,this.childOperations.splice(t,1))}removeChildOperationsByHookName(e){this.childOperations=this.childOperations.filter(t=>t.adderHookName!==e)}forEachDescendantOperation(e){for(const t of this.childOperations){if(!1===e(t))return!1;if(!1===t.forEachDescendantOperation(e))return!1}return!0}}Object.defineProperties(o,{isObjectionQueryBuilderOperationClass:{enumerable:!1,writable:!1,value:!0}}),e.exports={QueryBuilderOperation:o}},function(e,t,r){\"use strict\";const{isPromise:n}=r(8),{after:o}=r(45),{afterReturn:s}=r(46),{mapAfterAllReturn:i}=r(47),{promiseMap:a}=r(48),{promiseTry:l}=r(49);e.exports={isPromise:n,after:o,afterReturn:s,mapAfterAllReturn:i,map:a,try:l}},function(e,t,r){\"use strict\";const{isObject:n,isFunction:o}=r(0);function s(e){const t=typeof e;return null!==e&&(\"object\"===t||\"function\"===t)&&e.client&&e.client.dialect||null}function i(e,t){return n(e)&&o(e.constructor)&&e.constructor.name===t}e.exports={getDialect:s,isPostgres:function(e){return\"postgresql\"===s(e)},isMySql:function(e){const t=s(e);return\"mysql\"===t||\"mysql2\"===t},isSqlite:function(e){return\"sqlite3\"===s(e)},isMsSql:function(e){return\"mssql\"===s(e)},isOracle:function(e){const t=s(e);return\"oracle\"===t||\"oracledb\"===t},isKnexQueryBuilder:function(e){return i(e,\"Builder\")&&\"client\"in e},isKnexJoinBuilder:function(e){return i(e,\"JoinClause\")&&\"joinType\"in e},isKnexRaw:function(e){return i(e,\"Raw\")&&\"client\"in e},isKnexTransaction:function(e){return!!s(e)&&o(e.commit)&&o(e.rollback)}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1),{isPlainObject:o,isObject:s,isFunction:i,once:a}=r(0),{isKnexQueryBuilder:l,isKnexJoinBuilder:u}=r(3),{transformation:c}=r(200),h=a(()=>r(203).JoinBuilder);function d(e){return s(e)&&i(e.toKnexRaw)}function p(e,t){return e.toKnexRaw(t)}function f(e){return s(e)&&!0===e.isObjectionQueryBuilderBase}function _(e,t){return(e=c.onConvertQueryBuilderBase(e,t)).subqueryOf(t).toKnexQuery()}e.exports={ObjectionToKnexConvertingOperation:class extends n{constructor(e,t){super(e,t),this.args=null}getKnexArgs(e){return function(e,t,r){const n=t.internalOptions().skipUndefined;return r.map((r,a)=>d(r)?p(r,t):f(r)?_(r,t):function(e){return Array.isArray(e)}(r)?function(e,t,r,n,o){return e.map(e=>{if(void 0!==e)return d(e)?p(e,t):f(e)?_(e,t):e;if(!o)throw new Error(`undefined passed as an item in argument #${r} for '${n}' operation. Call skipUndefined() method to ignore the undefined values.`)})}(r,t,a,e,n):i(r)?function(e,t){return function(...r){if(l(this))!function(e,t,r){const n=r.constructor.forClass(r.modelClass());n.subqueryOf(r).isPartial(!0),t.call(n,n),n.toKnexQuery(e)}(this,e,t);else{if(!u(this))return e.apply(this,r);!function(e,t,r){const n=h().forClass(r.modelClass());n.subqueryOf(r).isPartial(!0),t.call(n,n),n.toKnexQuery(e)}(this,e,t)}}}(r,t):function(e){return s(e)&&e.$isObjectionModel}(r)?function(e){return e.$toDatabaseJson()}(r):o(r)?function(e,t,r,n,o){return Object.keys(e).reduce((s,i)=>{const a=e[i];if(void 0===a){if(!o)throw new Error(`undefined passed as a property in argument #${r} for '${n}' operation. Call skipUndefined() method to ignore the undefined values.`)}else d(a)?s[i]=p(a,t):f(a)?s[i]=_(a,t):s[i]=a;return s},{})}(r,t,a,e,n):r)}(this.name,e,this.args)}onAdd(e,t){return this.args=Array.from(t),function(e,t,r){const n=t.internalOptions().skipUndefined;for(let t=0,o=r.length;t<o;++t){const o=r[t];if(void 0===o){if(n)return!1;throw new Error(`undefined passed as argument #${t} for '${e}' operation. Call skipUndefined() method to ignore the undefined values.`)}}return!0}(this.name,e,this.args)}clone(){const e=super.clone();return e.args=this.args,e}}}},function(e,t,r){\"use strict\";const{asArray:n,isString:o}=r(0),s={ModelValidation:\"ModelValidation\",RelationExpression:\"RelationExpression\",UnallowedRelation:\"UnallowedRelation\",InvalidGraph:\"InvalidGraph\"};function i(e){return Object.keys(e).reduce((t,r)=>(t.push(`${r}: ${n(e[r]).map(a).join(\", \")}`),t),[]).join(\", \")}function a(e){return o(e)?e:e.message}e.exports={ValidationError:class extends Error{static get Type(){return s}constructor({type:e,message:t,data:r={},statusCode:n=400}){super(t||i(r)),this.name=this.constructor.name,this.type=e,this.data=r,this.statusCode=n}},ValidationErrorType:s}},function(e,t,r){\"use strict\";const n=r(10);e.exports=class extends n{}},function(e,t,r){\"use strict\";e.exports={hiddenProps:[\"$$queryProps\"],staticHiddenProps:[\"$$knex\",\"$$validator\",\"$$jsonSchema\",\"$$colToProp\",\"$$propToCol\",\"$$relationMappings\",\"$$relations\",\"$$relationNames\",\"$$jsonAttributes\",\"$$columnNameMappers\",\"$$tableMetadata\",\"$$readOnlyAttributes\",\"$$idRelationProperty\",\"$$virtualAttributes\"],defineNonEnumerableProperty:function(e,t,r){Object.defineProperty(e,t,{enumerable:!1,writable:!0,configurable:!0,value:r})},keyByProps:function(e,t){const r=new Map;for(let n=0,o=e.length;n<o;++n){const o=e[n];r.set(o.$propKey(t),o)}return r}}},function(e,t,r){\"use strict\";const{isObject:n,isFunction:o}=r(0);e.exports={isPromise:function(e){return n(e)&&o(e.then)}}},function(e,t,r){\"use strict\";const n=r(196),{isObject:o,isNumber:s,isString:i,union:a}=r(0),{RelationDoesNotExistError:l}=r(89);class u extends Error{}class c extends u{constructor(e){super(),this.relationName=e}}class h{constructor(e=m(),t=0){this.node=e,this.recursionDepth=t}static create(e){if(o(e))return e.isObjectionRelationExpression?e:new h(R(e));if(!i(e))return new h;if(0===e.trim().length)return new h;try{return new h(function(e){const t=d.get(e);if(t)return f(t);{const t=n.parse(e);return d.set(e,f(t)),t}}(e))}catch(e){throw e.duplicateRelationName?new c(e.duplicateRelationName):new u(e.message)}}static fromModelGraph(e){return e?new h(_(e,m())):new h}get maxRecursionDepth(){return s(this.node.$recursive)?this.node.$recursive:this.node.$recursive?Number.MAX_SAFE_INTEGER:0}get numChildren(){return this.node.$childNames.length}get isEmpty(){return 0===this.numChildren}merge(e){return e=h.create(e),this.isEmpty?e:new h(function e(t,r){const n={$name:t.$name,$relation:t.$relation,$modify:a(t.$modify,r.$modify),$recursive:(o=t.$recursive,i=r.$recursive,!0===o||!0===i||(s(o)&&s(i)?Math.max(o,i):o||i)),$allRecursive:t.$allRecursive||r.$allRecursive,$childNames:null};var o,i;if(n.$recursive||n.$allRecursive)n.$childNames=[];else{n.$childNames=a(t.$childNames,r.$childNames);for(const o of n.$childNames){const s=t[o],i=r[o];n[o]=s&&i?e(s,i):s||i}}return n}(this.node,e.node))}isSubExpression(e){if(e=h.create(e),this.node.$allRecursive)return!0;if(e.node.$allRecursive)return this.node.$allRecursive;if(this.node.$relation!==e.node.$relation)return!1;const t=e.maxRecursionDepth;if(t>0)return this.node.$allRecursive||this.maxRecursionDepth>=t;for(const t of e.node.$childNames){const r=this.childExpression(t),n=e.childExpression(t);if(!r||!r.isSubExpression(n))return!1}return!0}childExpression(e){if(this.node.$allRecursive||e===this.node.$name&&this.recursionDepth<this.maxRecursionDepth-1)return new h(this.node,this.recursionDepth+1);const t=this.node[e];return t?new h(t):null}forEachChildExpression(e,t){const r=this.maxRecursionDepth;if(this.node.$allRecursive)for(const r of e.getRelationNames()){const n=m(r,!0),o=e.getRelationUnsafe(r);t(new h(n),o)}else if(this.recursionDepth<r-1){const r=e.getRelationUnsafe(this.node.$relation)||null;t(new h(this.node,this.recursionDepth+1),r)}else if(0===r)for(const r of this.node.$childNames){const n=this.node[r],o=e.getRelationUnsafe(n.$relation);if(!o)throw new l(n.$relation);t(new h(n),o)}}expressionsAtPath(e){return function e(t,r,n){if(0==r.node.$childNames.length)n.push(t);else for(const o of r.node.$childNames){const s=r.childExpression(o),i=t.childExpression(o);i&&e(i,s,n)}return n}(this,h.create(e),[])}clone(){return new h(f(this.node),this.recursionDepth)}toString(){return p(this.node)}toPojo(){return f(this.node)}toJSON(){return this.toPojo()}}const d=new Map;function p(e){let t=e.$childNames.map(t=>e[t]).map(p),r=e.$relation;return e.$recursive?s(e.$recursive)?r+=\".^\"+e.$recursive:r+=\".^\":e.$allRecursive&&(r+=\".*\"),t=t.length>1?`[${t.join(\", \")}]`:t[0],e.$modify.length&&(r+=`(${e.$modify.join(\", \")})`),e.$name!==e.$relation&&(r+=` as ${e.$name}`),t?r?`${r}.${t}`:t:r}function f(e){return R(e)}function _(e,t){if(e){if(Array.isArray(e))for(let r=0,n=e.length;r<n;++r)E(e[r],t);else E(e,t);return t}}function E(e,t){const r=e.constructor.getRelationNames();for(let n=0,o=r.length;n<o;++n){const o=r[n];if(e.hasOwnProperty(o)){let r=t[o];r||(r=m(o),t[o]=r,t.$childNames.push(o)),_(e[o],r)}}}function m(e=null,t=!1){return R(null,e,t)}function R(e=null,t=null,r=!1){const n={$name:function(e,t){return e&&e.$name||t||null}(e,t),$relation:function(e,t){return e&&e.$relation||t||null}(e,t),$modify:function(e){if(!e||!e.$modify)return[];return Array.isArray(e.$modify)?e.$modify.slice():[e.$modify]}(e),$recursive:function(e){return e&&e.$recursive||!1}(e),$allRecursive:function(e,t){return e&&e.$allRecursive||t||!1}(e,r),$childNames:function(e){return e&&e.$childNames&&e.$childNames.slice()||function(e){if(!e)return[];const t=[];for(const r of Object.keys(e))\"$\"!==r[0]&&t.push(r);return t}(e)}(e)};for(const t of n.$childNames){const r=e[t];(o(r)||!0===r)&&(n[t]=R(r,t))}return n}Object.defineProperties(h.prototype,{isObjectionRelationExpression:{enumerable:!1,writable:!1,value:!0}}),e.exports={RelationExpression:h,RelationExpressionParseError:u,DuplicateRelationError:c}},function(e,t,r){\"use strict\";e.exports=class extends Error{constructor(e){super(e.nativeError.message),this.name=this.constructor.name,this.nativeError=e.nativeError,this.client=e.client}}},function(e,t,r){\"use strict\";const n=\"$\";e.exports={isInternalProp:function(e){return e[0]===n}}},function(e,t,r){\"use strict\";const n=new Set;e.exports={deprecate:function(e){n.has(e)||(n.add(e),console.warn(e))}}},function(e,t,r){\"use strict\";e.exports={assertHasId:function(e){if(!e.$hasId()){const t=e.constructor,r=t.getIdColumnArray().join(\", \");throw new Error(`one of the identifier columns [${r}] is null or undefined. Have you specified the correct identifier column for the model '${t.name}' using the 'idColumn' property?`)}},assertIdNotUndefined:function e(t,r){if(Array.isArray(t))t.forEach(t=>e(t,r));else if(void 0===t)throw Error(r)}}},function(e,t){function r(e){return{errorCode:e.originalError.info.number,severity:e.originalError.info.class}}e.exports={getCode:r,isCode:function(e,t,n){const o=r(e);return!!o&&o.errorCode===n&&o.severity===t}}},function(e,t,r){\"use strict\";function n(e,t,r,n){var o=n?\" !== \":\" === \",s=n?\" || \":\" && \",i=n?\"!\":\"\",a=n?\"\":\"!\";switch(e){case\"null\":return t+o+\"null\";case\"array\":return i+\"Array.isArray(\"+t+\")\";case\"object\":return\"(\"+i+t+s+\"typeof \"+t+o+'\"object\"'+s+a+\"Array.isArray(\"+t+\"))\";case\"integer\":return\"(typeof \"+t+o+'\"number\"'+s+a+\"(\"+t+\" % 1)\"+s+t+o+t+(r?s+i+\"isFinite(\"+t+\")\":\"\")+\")\";case\"number\":return\"(typeof \"+t+o+'\"'+e+'\"'+(r?s+i+\"isFinite(\"+t+\")\":\"\")+\")\";default:return\"typeof \"+t+o+'\"'+e+'\"'}}e.exports={copy:function(e,t){for(var r in t=t||{},e)t[r]=e[r];return t},checkDataType:n,checkDataTypes:function(e,t,r){switch(e.length){case 1:return n(e[0],t,r,!0);default:var o=\"\",i=s(e);for(var a in i.array&&i.object&&(o=i.null?\"(\":\"(!\"+t+\" || \",o+=\"typeof \"+t+' !== \"object\")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)o+=(o?\" && \":\"\")+n(a,t,r,!0);return o}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var r=[],n=0;n<t.length;n++){var s=t[n];o[s]?r[r.length]=s:\"array\"===e&&\"array\"===s&&(r[r.length]=s)}if(r.length)return r}else{if(o[t])return[t];if(\"array\"===e&&\"array\"===t)return[\"array\"]}},toHash:s,getProperty:l,escapeQuotes:u,equal:r(51),ucs2length:r(165),varOccurences:function(e,t){t+=\"[^0-9]\";var r=e.match(new RegExp(t,\"g\"));return r?r.length:0},varReplace:function(e,t,r){return t+=\"([^0-9])\",r=r.replace(/\\$/g,\"$$$$\"),e.replace(new RegExp(t,\"g\"),r+\"$1\")},schemaHasRules:function(e,t){if(\"boolean\"==typeof e)return!e;for(var r in e)if(t[r])return!0},schemaHasRulesExcept:function(e,t,r){if(\"boolean\"==typeof e)return!e&&\"not\"!=r;for(var n in e)if(n!=r&&t[n])return!0},schemaUnknownRules:function(e,t){if(\"boolean\"==typeof e)return;for(var r in e)if(!t[r])return r},toQuotedString:c,getPathExpr:function(e,t,r,n){return p(e,r?\"'/' + \"+t+(n?\"\":\".replace(/~/g, '~0').replace(/\\\\//g, '~1')\"):n?\"'[' + \"+t+\" + ']'\":\"'[\\\\'' + \"+t+\" + '\\\\']'\")},getPath:function(e,t,r){var n=c(r?\"/\"+f(t):l(t));return p(e,n)},getData:function(e,t,r){var n,o,s,i;if(\"\"===e)return\"rootData\";if(\"/\"==e[0]){if(!h.test(e))throw new Error(\"Invalid JSON-pointer: \"+e);o=e,s=\"rootData\"}else{if(!(i=e.match(d)))throw new Error(\"Invalid JSON-pointer: \"+e);if(n=+i[1],\"#\"==(o=i[2])){if(n>=t)throw new Error(\"Cannot access property/index \"+n+\" levels up, current level is \"+t);return r[t-n]}if(n>t)throw new Error(\"Cannot access data \"+n+\" levels up, current level is \"+t);if(s=\"data\"+(t-n||\"\"),!o)return s}for(var a=s,u=o.split(\"/\"),c=0;c<u.length;c++){var p=u[c];p&&(s+=l(_(p)),a+=\" && \"+s)}return a},unescapeFragment:function(e){return _(decodeURIComponent(e))},unescapeJsonPointer:_,escapeFragment:function(e){return encodeURIComponent(f(e))},escapeJsonPointer:f};var o=s([\"string\",\"number\",\"integer\",\"boolean\",\"null\"]);function s(e){for(var t={},r=0;r<e.length;r++)t[e[r]]=!0;return t}var i=/^[a-z$_][a-z$_0-9]*$/i,a=/'|\\\\/g;function l(e){return\"number\"==typeof e?\"[\"+e+\"]\":i.test(e)?\".\"+e:\"['\"+u(e)+\"']\"}function u(e){return e.replace(a,\"\\\\$&\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/\\f/g,\"\\\\f\").replace(/\\t/g,\"\\\\t\")}function c(e){return\"'\"+u(e)+\"'\"}var h=/^\\/(?:[^~]|~0|~1)*$/,d=/^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;function p(e,t){return'\"\"'==e?t:(e+\" + \"+t).replace(/([^\\\\])' \\+ '/g,\"$1\")}function f(e){return e.replace(/~/g,\"~0\").replace(/\\//g,\"~1\")}function _(e){return e.replace(/~1/g,\"/\").replace(/~0/g,\"~\")}},function(e,t,r){\"use strict\";const{asArray:n,isString:o,isFunction:s,isPlainObject:i}=r(0);e.exports={createModifier:function e({modelClass:t,modifier:r,modifiers:a}){const l=t?t.getModifiers():{},u=n(r).map(r=>{let n=null;if(o(r)){if((n=a&&a[r]||l[r])&&!s(n))return e({modelClass:t,modifier:n,modifiers:a})}else if(s(r))n=r;else if(i(r))n=(e=>e.where(r));else if(Array.isArray(r))return e({modelClass:t,modifier:r,modifiers:a});return n||(n=(e=>t.modifierNotFound(e,r))),n});return(e,...t)=>{for(const r of u)r.call(e,e,...t)}}}},function(e,t,r){\"use strict\";const{isObject:n}=r(0);function o(e,t){if(!Array.isArray(e))throw new Error(`invalid composite key ${JSON.stringify(e)}`);if(e.length!=t.size)throw new Error(`composite identifier ${JSON.stringify(e)} should have ${t.size} values`);const r={};for(let n=0;n<e.length;++n)t.setProp(r,n,e[n]);return r}function s(e){if(n(e))return e;throw new Error(`invalid composite key ${JSON.stringify(e)}`)}e.exports={normalizeIds:function(e,t,r){let i;if(r=r||{},t.size>1)if(Array.isArray(e))if(Array.isArray(e[0])){i=new Array(e.length);for(let r=0,n=e.length;r<n;++r)i[r]=o(e[r],t)}else if(n(e[0])){i=new Array(e.length);for(let t=0,r=e.length;t<r;++t)i[t]=s(e[t])}else i=[o(e,t)];else{if(!n(e))throw new Error(`invalid composite key ${JSON.stringify(e)}`);i=[e]}else if(Array.isArray(e))if(n(e[0])){i=new Array(e.length);for(let t=0,r=e.length;t<r;++t)i[t]=s(e[t])}else{i=new Array(e.length);for(let r=0,n=e.length;r<n;++r)i[r]={},t.setProp(i[r],0,e[r])}else if(n(e))i=[e];else{const r={};t.setProp(r,0,e),i=[r]}return function(e,t){for(let r=0,n=e.length;r<n;++r){const n=e[r];for(let e=0,r=t.size;e<r;++e){const r=t.getProp(n,e);if(void 0===r)throw new Error(`expected id ${JSON.stringify(n)} to have property ${t.propDescription(e)}`)}}}(i,t),r.arrayOutput?function(e,t){const r=new Array(e.length);for(let n=0,o=e.length;n<o;++n)r[n]=t.getProps(e[n]);return r}(i,t):i}}},function(e,t,r){\"use strict\";const{isPostgres:n}=r(3),o=100,s=100;class i{constructor(e){this.graphData=e}static get ReturningAllSelector(){return e=>\"returning\"===e.name&&e.args.includes(\"*\")}static getConcurrency(e,t){return t.reduce((t,r)=>Math.min(t,r.modelClass.getConcurrency(e.unsafeKnex())),s)}get graph(){return this.graphData.graph}get currentGraph(){return this.graphData.currentGraph}get graphOptions(){return this.graphData.graphOptions}run(e){return null}_getConcurrency(e,t){return i.getConcurrency(e,t)}_getBatchSize(e){return n(e.unsafeKnex())?o:1}_resolveReferences(e){e.isReference&&this._resolveReference(e)}_resolveReference(e){const t=e.referencedNode;for(const r of Object.keys(t.obj))e.obj.hasOwnProperty(r)||(e.obj[r]=t.obj[r])}}e.exports={GraphAction:i}},function(e,t,r){\"use strict\";const n=r(6);e.exports=class extends n{constructor(e){super(e),this.table=e.table,this.columns=e.columns,this.constraint=e.constraint,this.schema=e.schema}}},function(e,t,r){\"use strict\";const n=r(6);e.exports=class extends n{constructor(e){super(e),this.table=e.table,this.column=e.column,this.schema=e.schema,this.database=e.database}}},function(e,t,r){\"use strict\";const n=r(6);e.exports=class extends n{constructor(e){super(e),this.table=e.table,this.constraint=e.constraint,this.schema=e.schema}}},function(e,t,r){\"use strict\";const{ref:n}=r(31),{isEmpty:o}=r(0),{isKnexRaw:s,isKnexQueryBuilder:i}=r(3),{QueryBuilderOperation:a}=r(1),{StaticHookArguments:l}=r(34);e.exports={UpdateOperation:class extends a{constructor(e,t){super(e,t),this.model=null,this.modelOptions=Object.assign({},this.opt.modelOptions||{})}onAdd(e,t){const r=t[0],n=e.modelClass();return this.model=n.ensureModel(r,this.modelOptions),!0}async onBefore2(e,t){return await async function(e,t,r){return await function(e,t,r){return t.$beforeUpdate(r,e.context())}(e,t,r),function(e){const t=l.create({builder:e});return e.modelClass().beforeUpdate(t)}(e)}(e,this.model,this.modelOptions),t}onBefore3(e){const t=this.model.$toDatabaseJson(e);o(t)&&e.resolve(0)}onBuildKnex(e,t){const r=this.model.$toDatabaseJson(t),n=this.convertFieldExpressionsToRaw(t,r);e.update(n)}onAfter2(e,t){return async function(e,t,r,n){return await function(e,t,r){return t.$afterUpdate(r,e.context())}(e,t,r),async function(e,t){const r=l.create({builder:e,result:t}),n=await e.modelClass().afterUpdate(r);return void 0===n?t:n}(e,n)}(e,this.model,this.modelOptions,t)}convertFieldExpressionsToRaw(e,t){const r=e.knex(),o={};for(const e of Object.keys(t)){let a=t[e];if(e.indexOf(\":\")>-1){let t=n(e),l=\"{\"+t.parsedExpr.access.map(e=>e.ref).join(\",\")+\"}\",u=\"?\";i(a)||s(a)?u=\"to_jsonb(?)\":a=JSON.stringify(a),o[t.column]=r.raw(`jsonb_set(??, '${l}', ${u}, true)`,[o[t.column]||t.column,a]),delete this.model[e]}else o[e]=a}return o}clone(){const e=super.clone();return e.model=this.model,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1),{StaticHookArguments:o}=r(34),{after:s,mapAfterAllReturn:i}=r(2),{isPostgres:a,isSqlite:l,isMySql:u,isMsSql:c}=r(3),{isObject:h}=r(0);e.exports={InsertOperation:class extends n{constructor(e,t){super(e,t),this.models=null,this.isArray=!1,this.modelOptions=Object.assign({},this.opt.modelOptions||{})}onAdd(e,t){const r=t[0],n=e.modelClass();return this.isArray=Array.isArray(r),this.models=n.ensureModelArray(r,this.modelOptions),!0}async onBefore2(e,t){if(this.models.length>1&&!a(e.knex())&&!c(e.knex()))throw new Error(\"batch insert only works with Postgresql and SQL Server\");return await function(e,t){const r=function(e,t){return i(t,t=>t.$beforeInsert(e.context()),t)}(e,t);return s(r,()=>(function(e){const t=o.create({builder:e});return e.modelClass().beforeInsert(t)})(e))}(e,this.models),t}onBuildKnex(e,t){l(t.knex())||u(t.knex())||t.has(/returning/)||e.returning(t.modelClass().getIdColumn()),e.insert(this.models.map(e=>e.$toDatabaseJson(t)))}onAfter1(e,t){if(!Array.isArray(t)||!t.length||t===this.models)return this.models;if(h(t[0]))for(let e=0,r=this.models.length;e<r;++e)this.models[e].$set(t[e]);else for(let e=0,r=this.models.length;e<r;++e){const r=this.models[e];r.$id()||r.$id(t[e])}return this.models}onAfter2(e,t){const r=this.isArray?t:t[0]||null;return function(e,t,r){const n=function(e,t){return i(t,t=>t.$afterInsert(e.context()),t)}(e,t);return s(n,()=>(function(e,t){const r=o.create({builder:e,result:t}),n=e.modelClass().afterInsert(r);return s(n,e=>void 0===e?t:e)})(e,r))}(e,this.models,r)}clone(){const e=super.clone();return e.models=this.models,e.isArray=this.isArray,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);class o extends n{constructor(e,t){super(e,t),this.delegate=t.delegate}is(e){return super.is(e)||this.delegate.is(e)}onAdd(e,t){return this.delegate.onAdd(e,t)}onBefore1(e,t){return this.delegate.onBefore1(e,t)}hasOnBefore1(){return this.onBefore1!==o.prototype.onBefore1||this.delegate.hasOnBefore1()}onBefore2(e,t){return this.delegate.onBefore2(e,t)}hasOnBefore2(){return this.onBefore2!==o.prototype.onBefore2||this.delegate.hasOnBefore2()}onBefore3(e,t){return this.delegate.onBefore3(e,t)}hasOnBefore3(){return this.onBefore3!==o.prototype.onBefore3||this.delegate.hasOnBefore3()}onBuild(e){return this.delegate.onBuild(e)}hasOnBuild(){return this.onBuild!==o.prototype.onBuild||this.delegate.hasOnBuild()}onBuildKnex(e,t){return this.delegate.onBuildKnex(e,t)}hasOnBuildKnex(){return this.onBuildKnex!==o.prototype.onBuildKnex||this.delegate.hasOnBuildKnex()}onRawResult(e,t){return this.delegate.onRawResult(e,t)}hasOnRawResult(){return this.onRawResult!==o.prototype.onRawResult||this.delegate.hasOnRawResult()}onAfter1(e,t){return this.delegate.onAfter1(e,t)}hasOnAfter1(){return this.onAfter1!==o.prototype.onAfter1||this.delegate.hasOnAfter1()}onAfter2(e,t){return this.delegate.onAfter2(e,t)}hasOnAfter2(){return this.onAfter2!==o.prototype.onAfter2||this.delegate.hasOnAfter2()}onAfter3(e,t){return this.delegate.onAfter3(e,t)}hasOnAfter3(){return this.onAfter3!==o.prototype.onAfter3||this.delegate.hasOnAfter3()}queryExecutor(e){return this.delegate.queryExecutor(e)}hasQueryExecutor(){return this.queryExecutor!==o.prototype.queryExecutor||this.delegate.hasQueryExecutor()}onError(e,t){return this.delegate.onError(e,t)}hasOnError(){return this.onError!==o.prototype.onError||this.delegate.hasOnError()}clone(){const e=super.clone();return e.delegate=this.delegate&&this.delegate.clone(),e}}e.exports={DelegateOperation:o}},function(e,t,r){\"use strict\";const n={Relation:\"Relation\",Reference:\"Reference\"},o={Object:\"Object\",Property:\"Property\"};e.exports={ModelGraphEdge:class{constructor(e,t,r,n=null,o=null){this.type=e,this.ownerNode=t,this.relatedNode=r,this.relation=n,this.relationIndex=o,this.refType=null,this.refMatch=null,this.refOwnerDataPath=null,this.refRelatedDataPath=null}static get Type(){return n}static get ReferenceType(){return o}getOtherNode(e){return this.isOwnerNode(e)?this.relatedNode:this.ownerNode}isOwnerNode(e){return e===this.ownerNode}isRelatedNode(e){return e===this.relatedNode}}}},function(e,t){e.exports={getSqlStateClass:function(e){return e.substr(0,2)}}},function(e,t,r){\"use strict\";const n=r(6);e.exports=class extends n{constructor(e){super(e),this.table=e.table,this.constraint=e.constraint}}},function(e,t,r){\"use strict\";const n=r(10);e.exports=class extends n{}},function(e,t,r){\"use strict\";const{isPlainObject:n}=r(0),{buildArg:o}=r(30);class s{constructor(e,t){this._sql=`${e}`,this._args=t,this._as=null}get alias(){return this._as}as(e){return this._as=e,this}toKnexRaw(e){let t=null,r=this._sql;return 1===this._args.length&&n(this._args[0])?(t=function(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=o(e[n],t),r),{})}(this._args[0],e),this._as&&(t.__alias__=this._as,r+=\" as :__alias__:\")):(t=function(e,t){return e.map(e=>o(e,t))}(this._args,e),this._as&&(t.push(this._as),r+=\" as ??\")),e.knex().raw(r,t)}}function i(e){const[t,...r]=e;return 1===r.length&&Array.isArray(r[0])?{sql:t,args:r[0]}:{sql:t,args:r}}Object.defineProperties(s.prototype,{isObjectionRawBuilder:{enumerable:!1,writable:!1,value:!0}}),e.exports={RawBuilder:s,normalizeRawArgs:i,raw:function(...e){const{sql:t,args:r}=i(e);return new s(t,r)}}},function(e,t,r){\"use strict\";const{isObject:n,isFunction:o}=r(0);e.exports={buildArg:function(e,t){return n(e)?o(e.toKnexRaw)?e.toKnexRaw(t):!0===e.isObjectionQueryBuilderBase?e.subqueryOf(t).toKnexQuery():e:e}}},function(e,t,r){\"use strict\";const{parseFieldExpression:n}=r(32),{isObject:o}=r(0),{deprecate:s}=r(12);class i{constructor(e){this._expr=e,this._parsedExpr=null,this._column=null,this._table=null,this._cast=null,this._toJson=!1,this._table=null,this._alias=null,this._modelClass=null,null!==e&&this._parseExpression(e)}get parsedExpr(){return this._parsedExpr}get column(){return this._column}set column(e){this._column=e}get alias(){return this._alias}set alias(e){this._alias=e}get tableName(){return this._table}set tableName(e){this._table=e}get modelClass(){return this._modelClass}set modelClass(e){this._modelClass=e}get isPlainColumnRef(){return!(this._parsedExpr&&0!==this._parsedExpr.access.length||this._cast||this._toJson)}get expression(){return this._expr}get cast(){return this._cast}fullColumn(e){const t=this.tableName?this.tableName:this.modelClass?e.tableRefFor(this.modelClass):null;return t?`${t}.${this.column}`:this.column}castText(){return this.castTo(\"text\")}castInt(){return this.castTo(\"integer\")}castBigInt(){return this.castTo(\"bigint\")}castFloat(){return this.castTo(\"float\")}castDecimal(){return this.castTo(\"decimal\")}castReal(){return this.castTo(\"real\")}castBool(){return this.castTo(\"boolean\")}castJson(){return this._toJson=!0,this}castType(e){return s(\"castType(type) is deprecated. Use castTo(type) instead. castType(type) will be removed in 2.0\"),this.castTo(e)}castTo(e){return this._cast=e,this}from(e){return this._table=e,this}table(e){return this._table=e,this}model(e){return this._modelClass=e,this}as(e){return this._alias=e,this}clone(){const e=new this.constructor(null);return e._expr=this._expr,e._parsedExpr=this._parsedExpr,e._column=this._column,e._table=this._table,e._cast=this._cast,e._toJson=this._toJson,e._alias=this._alias,e._modelClass=this._modelClass,e}toKnexRaw(e){return e.knex().raw(...this._createRawArgs(e))}_parseExpression(e){this._parsedExpr=n(e),this._column=this._parsedExpr.column,this._table=this._parsedExpr.table}_createRawArgs(e){let t=[],r=this._createReferenceSql(e,t);return r=this._maybeCast(r,t),r=this._maybeToJsonb(r,t),[r=this._maybeAlias(r,t),t]}_createReferenceSql(e,t){if(t.push(this.fullColumn(e)),this._parsedExpr.access.length>0){return`??${this._cast?\"#>>\":\"#>\"}'{${this._parsedExpr.access.map(e=>e.ref).join(\",\")}}'`}return\"??\"}_maybeCast(e){return this._cast?`CAST(${e} AS ${this._cast})`:e}_maybeToJsonb(e){return this._toJson?`to_jsonb(${e})`:e}_maybeAlias(e,t){return this._shouldAlias()?(t.push(this._alias),`${e} as ??`):e}_shouldAlias(){return!!this._alias&&(!this.isPlainColumnRef||this._alias!==this._column)}}Object.defineProperties(i.prototype,{isObjectionReferenceBuilder:{enumerable:!1,writable:!1,value:!0}});e.exports={ReferenceBuilder:i,ref:e=>o(e)&&e.isObjectionReferenceBuilder?e:new i(e)}},function(e,t,r){\"use strict\";const n=r(161),o=new Map;e.exports={parseFieldExpression:function(e){let t=o.get(e);return void 0!==t?t:(t=function(e){for(const t of e.access)Object.freeze(t);return Object.freeze(e.access),Object.freeze(e),e}(t=function(e){const t=e.columnName.split(\".\").map(e=>e.trim());return e.column=t[t.length-1],t.length>=2?e.table=t.slice(0,t.length-1).join(\".\"):e.table=null,e}(t=n.parse(e))),o.set(e,t),t)}}},function(e,t,r){\"use strict\";const n=\"objectiontmpjoin\";e.exports={getTempColumn:function(e){return`${n}${e}`},isTempColumn:function(e){return e.startsWith(n)}}},function(e,t,r){\"use strict\";const{asArray:n}=r(0),o=Symbol();class s{constructor({builder:e,result:t=null}){Object.defineProperty(this,o,{value:e}),Object.defineProperty(this,\"result\",{value:n(t)})}static create(e){return new s(e)}get asFindQuery(){return()=>this[o].toFindQuery().clearWithGraphFetched().runAfter(n)}get context(){return this[o].context()}get transaction(){return this[o].unsafeKnex()}get relation(){const e=this[o].findOperation(a);return e?i(e):void 0}get modelOptions(){const e=this[o].findOperation(u);return e?l(e):void 0}get items(){const e=this[o].findOperation(h);return e?n(c(e)):[]}get inputItems(){const e=this[o].findOperation(p);return e?n(d(e)):[]}get cancelQuery(){const e=this;return t=>{const r=this[o];void 0===t&&(t=r.isInsert()?e.inputItems:r.isFind()?[]:0),r.resolve(t)}}}function i(e){return e.relation}function a(e){return!!i(e)}function l(e){return e.modelOptions}function u(e){return!!l(e)}function c(e){return e.instance||e.owner&&e.owner.isModels&&e.owner.modelArray}function h(e){return!!c(e)}function d(e){return e.models||e.model}function p(e){return!!d(e)}e.exports={StaticHookArguments:s}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1),{StaticHookArguments:o}=r(34);e.exports={DeleteOperation:class extends n{async onBefore2(e,t){return await function(e){return function(e){const t=o.create({builder:e});return e.modelClass().beforeDelete(t)}(e)}(e),t}onBuildKnex(e){e.delete()}onAfter2(e,t){return function(e,t){return async function(e,t){const r=o.create({builder:e,result:t}),n=await e.modelClass().afterDelete(r);return void 0===n?t:n}(e,t)}(e,t)}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={RelateOperation:class extends n{constructor(e,t){super(e,t),this.relation=t.relation,this.owner=t.owner,this.input=null,this.ids=null}clone(){const e=super.clone();return e.input=this.input,e.ids=this.ids,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={UnrelateOperation:class extends n{constructor(e,t){super(e,t),this.relation=t.relation,this.owner=t.owner,this.ids=null}clone(){const e=super.clone();return e.ids=this.ids,e}}}},function(e,t,r){\"use strict\";e.exports={GraphOperation:class{constructor(e){this.graphData=e}get graph(){return this.graphData.graph}get currentGraph(){return this.graphData.currentGraph}get graphOptions(){return this.graphData.graphOptions}createActions(){return[]}}}},function(e,t,r){\"use strict\";const{RelationProperty:n}=r(60),{RelationFindOperation:o}=r(59),{RelationUpdateOperation:s}=r(246),{RelationDeleteOperation:i}=r(107),{resolveModel:a}=r(40),{get:l,isFunction:u}=r(0),{mapAfterAllReturn:c}=r(2),{createModifier:h}=r(16);class d{constructor(e,t){this.name=e,this.ownerModelClass=t,this.relatedModelClass=null,this.ownerProp=null,this.relatedProp=null,this.joinTableModelClass=null,this.joinTableOwnerProp=null,this.joinTableRelatedProp=null,this.joinTableBeforeInsert=null,this.joinTableExtras=[],this.modify=null,this.beforeInsert=null}setMapping(e){let t={name:this.name,mapping:e,ownerModelClass:this.ownerModelClass,relatedModelClass:null,relatedProp:null,ownerProp:null,modify:null,beforeInsert:null,forbiddenMappingProperties:this.forbiddenMappingProperties,createError:e=>this.createError(e)};t=function(e){let t;t=u(e.mapping.beforeInsert)?e.mapping.beforeInsert:e=>e;return Object.assign(e,{beforeInsert:t})}(t=function(e){const t=e.mapping,r=t.modify||t.filter,n=r&&h({modifier:r,modelClass:e.relatedModelClass});return Object.assign(e,{modify:n})}(t=function(e){const t=e.mapping;if(!t.join||!t.join.from||!t.join.to)throw e.createError('join must be an object that maps the columns of the related models together. For example: {from: \"SomeTable.id\", to: \"SomeOtherTable.someModelId\"}');const r=p(e,t.join.from,\"join.from\"),n=p(e,t.join.to,\"join.to\");let o,s;if(r.modelClass.getTableName()===e.ownerModelClass.getTableName())o=r,s=n;else{if(n.modelClass.getTableName()!==e.ownerModelClass.getTableName())throw e.createError(\"join: either `from` or `to` must point to the owner model table.\");o=n,s=r}if(o.props.some(t=>t===e.name))throw e.createError(`join: relation name and join property '${e.name}' cannot have the same name. If you cannot change one or the other, you can use $parseDatabaseJson and $formatDatabaseJson methods to convert the column name.`);if(s.modelClass.getTableName()!==e.relatedModelClass.getTableName())throw e.createError(\"join: either `from` or `to` must point to the related model table.\");return Object.assign(e,{ownerProp:o,relatedProp:s})}(t=function(e){if(!e.mapping.relation)throw e.createError(\"relation is not defined\");if(!u(e.mapping.relation)||!e.mapping.relation.isObjectionRelationClass)throw e.createError(\"relation is not a subclass of Relation\");return e}(t=function(e){let t;try{t=a(e.mapping.modelClass,e.ownerModelClass.modelPaths,\"modelClass\")}catch(t){throw e.createError(t.message)}return Object.assign(e,{relatedModelClass:t})}(t=function(e){if(!e.mapping.modelClass)throw e.createError(\"modelClass is not defined\");return e}(t=function(e){if(!u(e.ownerModelClass)||!e.ownerModelClass.isObjectionModelClass)throw e.createError(\"Relation's owner is not a subclass of Model\");return e}(t=function(e){return e.forbiddenMappingProperties.forEach(t=>{if(void 0!==l(e.mapping,t.split(\".\")))throw e.createError(`Property ${t} is not supported for this relation type.`)}),e}(t)))))))),this.relatedModelClass=t.relatedModelClass,this.ownerProp=t.ownerProp,this.relatedProp=t.relatedProp,this.modify=t.modify,this.beforeInsert=t.beforeInsert}get forbiddenMappingProperties(){return[\"join.through\"]}get joinTable(){return this.joinTableModelClass?this.joinTableModelClass.getTableName():null}get joinModelClass(){return this.getJoinModelClass(this.ownerModelClass.knex())}getJoinModelClass(e){return this.joinTableModelClass&&e!==this.joinTableModelClass.knex()?this.joinTableModelClass.bindKnex(e):this.joinTableModelClass}isOneToOne(){return!1}clone(){const e=new this.constructor(this.name,this.ownerModelClass);return e.relatedModelClass=this.relatedModelClass,e.ownerProp=this.ownerProp,e.relatedProp=this.relatedProp,e.modify=this.modify,e.beforeInsert=this.beforeInsert,e.joinTableModelClass=this.joinTableModelClass,e.joinTableOwnerProp=this.joinTableOwnerProp,e.joinTableRelatedProp=this.joinTableRelatedProp,e.joinTableBeforeInsert=this.joinTableBeforeInsert,e.joinTableExtras=this.joinTableExtras,e}bindKnex(e){const t=this.clone();return t.relatedModelClass=this.relatedModelClass.bindKnex(e),t.ownerModelClass=this.ownerModelClass.bindKnex(e),this.joinTableModelClass&&(t.joinTableModelClass=this.joinTableModelClass.bindKnex(e)),t}findQuery(e,t){const r=this.relatedProp.refs(e);return t.buildFindQuery(e,this,r),this.applyModify(e)}applyModify(e){try{return e.modify(this.modify)}catch(e){throw e instanceof this.relatedModelClass.ModifierNotFoundError?this.createError(e.message):e}}join(e,{joinOperation:t=\"join\",relatedTableAlias:r=e.tableRefFor(this.relatedModelClass),relatedJoinSelectQuery:n=this.relatedModelClass.query().childQueryOf(e),relatedTable:o=e.tableNameFor(this.relatedModelClass),ownerTable:s=e.tableRefFor(this.ownerModelClass)}={}){let i=this.applyModify(n).as(r);var a,l;return i.isSelectAll()&&(i=(a=o)===(l=r)?a:`${a} as ${l}`),e[t](i,t=>{const n=this.relatedProp,o=this.ownerProp;n.forEach(i=>{const a=n.ref(e,i).table(r),l=o.ref(e,i).table(s);t.on(a,l)})})}find(e,t){return new o(\"find\",{relation:this,owner:t})}insert(e,t){throw this.createError(\"not implemented\")}update(e,t){return new s(\"update\",{relation:this,owner:t})}patch(e,t){return new s(\"patch\",{relation:this,owner:t,modelOptions:{patch:!0}})}delete(e,t){return new i(\"delete\",{relation:this,owner:t})}relate(){throw this.createError(\"not implemented\")}unrelate(){throw this.createError(\"not implemented\")}hasRelateProp(e){return e.$hasProps(this.relatedProp.props)}setRelateProp(e,t){this.relatedProp.forEach(r=>{this.relatedProp.setProp(e,r,t[r])})}executeBeforeInsert(e,t,r){return c(e,e=>this.beforeInsert(e,t),r)}createError(e){return this.ownerModelClass&&this.ownerModelClass.name&&this.name?new Error(`${this.ownerModelClass.name}.relationMappings.${this.name}: ${e}`):new Error(`${this.constructor.name}: ${e}`)}}function p(e,t,r){try{return new n(t,t=>[e.ownerModelClass,e.relatedModelClass].find(e=>e.getTableName()===t))}catch(t){throw t instanceof n.ModelNotFoundError?e.createError(`join: either \\`from\\` or \\`to\\` must point to the owner model table and the other one to the related table. It might be that specified table '${t.tableName}' is not correct`):t instanceof n.InvalidReferenceError?e.createError(`${r} must have format TableName.columnName. For example \"SomeTable.id\" or in case of composite key [\"SomeTable.a\", \"SomeTable.b\"].`):t}}Object.defineProperties(d,{isObjectionRelationClass:{enumerable:!1,writable:!1,value:!0}}),Object.defineProperties(d.prototype,{isObjectionRelation:{enumerable:!1,writable:!1,value:!0}}),e.exports={Relation:d}},function(e,t,r){\"use strict\";const n=r(247),{isString:o,isFunction:s}=r(0);class i extends Error{}function a(e){let t=r(248)(`${n.resolve(e)}`),o=null;if(l(t)?o=t:l(t.default)?o=t.default:Object.keys(t).forEach(r=>{const n=t[r];if(l(n)){if(null!==o)throw new i(`path ${e} exports multiple models. Don't know which one to choose.`);o=n}}),!l(o))throw new i(`${e} is an invalid file path to a model class`);return o}function l(e){return s(e)&&e.isObjectionModelClass}e.exports={resolveModel:function(e,t,r){try{if(!o(e)){if(s(e)&&!l(e)&&(e=e()),!l(e))throw new i(\"is not a subclass of Model or a file path to a module that exports one. You may be dealing with a require loop. See the documentation section about require loops.\");return e}if(u=e,n.normalize(u+\"/\")===n.normalize(n.resolve(u)+\"/\"))return a(e);if(t)return function(e,t){let r=null;for(const o of t)try{return a(n.join(o,e))}catch(e){null===r&&(r=e)}throw r||new i(`could not resolve ${e} using modelPaths`)}(e,t)}catch(e){throw e instanceof i?new Error(`${r}: ${e.message}`):e}var u}}},function(e,t,r){\"use strict\";e.exports={ManyToManyModifyMixin:e=>(class extends e{constructor(...e){super(...e),this.modifyFilterSubquery=null}get modifyMainQuery(){return!0}onBuild(e){return this.modifyFilterSubquery=this.createModifyFilterSubquery(e),this.modifyMainQuery&&(this.removeFiltersFromMainQuery(e),this.applyModifyFilterForRelatedTable(e)),super.onBuild(e)}createModifyFilterSubquery(e){const t=this.relation.relatedModelClass,r=e.constructor,n=t.query().childQueryOf(e);return this.relation.findQuery(n,this.owner),n.copyFrom(e,r.WhereSelector).copyFrom(e,r.JoinSelector),n.clearSelect()}removeFiltersFromMainQuery(e){const t=e.constructor;e.clear(t.WhereSelector),e.clear(t.JoinSelector)}applyModifyFilterForRelatedTable(e){const t=this.relation.relatedModelClass.getIdRelationProperty().refs(e),r=this.modifyFilterSubquery.clone().select(t);return e.whereInComposite(t,r)}applyModifyFilterForJoinTable(e){const t=this.relation.joinTableOwnerProp.refs(e),r=this.relation.joinTableRelatedProp.refs(e),n=this.relation.relatedProp.refs(e),o=this.owner.getProps(this.relation),s=this.modifyFilterSubquery.clone().select(n);return e.whereInComposite(r,s).whereInComposite(t,o)}clone(){const e=super.clone();return e.modifyFilterSubquery=this.modifyFilterSubquery,e}})}},function(e,t,r){\"use strict\";const n=r(120),o=r(121),s=r(122);e.exports={postgres:n,mysql:o,mssql:s}},function(e,t,r){\"use strict\";(function(e){\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nvar n=r(147),o=r(148),s=r(149);function i(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(i()<t)throw new RangeError(\"Invalid typed array length\");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if(\"number\"==typeof e){if(\"string\"==typeof t)throw new Error(\"If encoding is specified then the first argument must be a string\");return h(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number');return\"undefined\"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError(\"'offset' is out of bounds\");if(t.byteLength<r+(n||0))throw new RangeError(\"'length' is out of bounds\");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,r,n):\"string\"==typeof t?function(e,t,r){\"string\"==typeof r&&\"\"!==r||(r=\"utf8\");if(!l.isEncoding(r))throw new TypeError('\"encoding\" must be a valid string encoding');var n=0|f(t,r),o=(e=a(e,n)).write(t,r);o!==n&&(e=e.slice(0,o));return e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|p(t.length);return 0===(e=a(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if(\"undefined\"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||\"length\"in t)return\"number\"!=typeof t.length||(n=t.length)!=n?a(e,0):d(e,t);if(\"Buffer\"===t.type&&s(t.data))return d(e,t.data)}var n;throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}(e,t)}function c(e){if(\"number\"!=typeof e)throw new TypeError('\"size\" argument must be a number');if(e<0)throw new RangeError('\"size\" argument must not be negative')}function h(e,t){if(c(t),e=a(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|p(t.length);e=a(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=i())throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+i().toString(16)+\" bytes\");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if(\"undefined\"!=typeof ArrayBuffer&&\"function\"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;\"string\"!=typeof e&&(e=\"\"+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case\"ascii\":case\"latin1\":case\"binary\":return r;case\"utf8\":case\"utf-8\":case void 0:return $(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*r;case\"hex\":return r>>>1;case\"base64\":return G(e).length;default:if(n)return $(e).length;t=(\"\"+t).toLowerCase(),n=!0}}function _(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function E(e,t,r,n,o){if(0===e.length)return-1;if(\"string\"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if(\"string\"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,o);if(\"number\"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&\"function\"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,o);throw new TypeError(\"val must be string, number or Buffer\")}function m(e,t,r,n,o){var s,i=1,a=e.length,l=t.length;if(void 0!==n&&(\"ucs2\"===(n=String(n).toLowerCase())||\"ucs-2\"===n||\"utf16le\"===n||\"utf-16le\"===n)){if(e.length<2||t.length<2)return-1;i=2,a/=2,l/=2,r/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o){var c=-1;for(s=r;s<a;s++)if(u(e,s)===u(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*i}else-1!==c&&(s-=s-c),c=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var h=!0,d=0;d<l;d++)if(u(e,s+d)!==u(t,d)){h=!1;break}if(h)return s}return-1}function R(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var s=t.length;if(s%2!=0)throw new TypeError(\"Invalid hex string\");n>s/2&&(n=s/2);for(var i=0;i<n;++i){var a=parseInt(t.substr(2*i,2),16);if(isNaN(a))return i;e[r+i]=a}return i}function O(e,t,r,n){return V($(t,e.length-r),e,r,n)}function y(e,t,r,n){return V(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function g(e,t,r,n){return y(e,t,r,n)}function A(e,t,r,n){return V(G(t),e,r,n)}function v(e,t,r,n){return V(function(e,t){for(var r,n,o,s=[],i=0;i<e.length&&!((t-=2)<0);++i)r=e.charCodeAt(i),n=r>>8,o=r%256,s.push(o),s.push(n);return s}(t,e.length-r),e,r,n)}function N(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function b(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var s,i,a,l,u=e[o],c=null,h=u>239?4:u>223?3:u>191?2:1;if(o+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(s=e[o+1]))&&(l=(31&u)<<6|63&s)>127&&(c=l);break;case 3:s=e[o+1],i=e[o+2],128==(192&s)&&128==(192&i)&&(l=(15&u)<<12|(63&s)<<6|63&i)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=e[o+1],i=e[o+2],a=e[o+3],128==(192&s)&&128==(192&i)&&128==(192&a)&&(l=(15&u)<<18|(63&s)<<12|(63&i)<<6|63&a)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),o+=h}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var r=\"\",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=T));return r}(n)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&\"function\"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=i(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,\"undefined\"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,n){return c(t),t<=0?a(e,t):void 0!==r?\"string\"==typeof n?a(e,t).fill(r,n):a(e,t).fill(r):a(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError(\"Arguments must be Buffers\");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);o<s;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},l.concat=function(e,t){if(!s(e))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(!l.isBuffer(i))throw new TypeError('\"list\" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?\"\":0===arguments.length?b(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return\"\";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return\"\";if((r>>>=0)<=(t>>>=0))return\"\";for(e||(e=\"utf8\");;)switch(e){case\"hex\":return I(this,t,r);case\"utf8\":case\"utf-8\":return b(this,t,r);case\"ascii\":return w(this,t,r);case\"latin1\":case\"binary\":return P(this,t,r);case\"base64\":return N(this,t,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return S(this,t,r);default:if(n)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase(),n=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e=\"\",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString(\"hex\",0,r).match(/.{2}/g).join(\" \"),this.length>r&&(e+=\" ... \")),\"<Buffer \"+e+\">\"},l.prototype.compare=function(e,t,r,n,o){if(!l.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError(\"out of range index\");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(o>>>=0)-(n>>>=0),i=(r>>>=0)-(t>>>=0),a=Math.min(s,i),u=this.slice(n,o),c=e.slice(t,r),h=0;h<a;++h)if(u[h]!==c[h]){s=u[h],i=c[h];break}return s<i?-1:i<s?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return E(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return E(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n=\"utf8\",r=this.length,t=0;else if(void 0===r&&\"string\"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");t|=0,isFinite(r)?(r|=0,void 0===n&&(n=\"utf8\")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");n||(n=\"utf8\");for(var s=!1;;)switch(n){case\"hex\":return R(this,e,t,r);case\"utf8\":case\"utf-8\":return O(this,e,t,r);case\"ascii\":return y(this,e,t,r);case\"latin1\":case\"binary\":return g(this,e,t,r);case\"base64\":return A(this,e,t,r);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return v(this,e,t,r);default:if(s)throw new TypeError(\"Unknown encoding: \"+n);n=(\"\"+n).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function w(e,t,r){var n=\"\";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function P(e,t,r){var n=\"\";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function I(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o=\"\",s=t;s<r;++s)o+=U(e[s]);return o}function S(e,t,r){for(var n=e.slice(t,r),o=\"\",s=0;s<n.length;s+=2)o+=String.fromCharCode(n[s]+256*n[s+1]);return o}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError(\"offset is not uint\");if(e+t>r)throw new RangeError(\"Trying to access beyond buffer length\")}function x(e,t,r,n,o,s){if(!l.isBuffer(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('\"value\" argument is out of bounds');if(r+n>e.length)throw new RangeError(\"Index out of range\")}function F(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,s=Math.min(e.length-r,2);o<s;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function D(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,s=Math.min(e.length-r,4);o<s;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function M(e,t,r,n,o,s){if(r+n>e.length)throw new RangeError(\"Index out of range\");if(r<0)throw new RangeError(\"Index out of range\")}function j(e,t,r,n,s){return s||M(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,s){return s||M(e,0,r,8),o.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var o=t-e;r=new l(o,void 0);for(var s=0;s<o;++s)r[s]=this[s+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=this[e],o=1,s=0;++s<t&&(o*=256);)n+=this[e+s]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||C(e,t,this.length);for(var n=t,o=1,s=this[e+--n];n>0&&(o*=256);)s+=this[e+--n]*o;return s>=(o*=128)&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,s=0;for(this[t]=255&e;++s<r&&(o*=256);)this[t+s]=e/o&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||x(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);x(this,e,t,r,o-1,-o)}var s=0,i=1,a=0;for(this[t]=255&e;++s<r&&(i*=256);)e<0&&0===a&&0!==this[t+s-1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);x(this,e,t,r,o-1,-o)}var s=r-1,i=1,a=0;for(this[t+s]=255&e;--s>=0&&(i*=256);)e<0&&0===a&&0!==this[t+s+1]&&(a=1),this[t+s]=(e/i>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):F(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):F(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError(\"targetStart out of bounds\");if(r<0||r>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(n<0)throw new RangeError(\"sourceEnd out of bounds\");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,s=n-r;if(this===e&&r<t&&t<n)for(o=s-1;o>=0;--o)e[o+t]=this[o+r];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<s;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},l.prototype.fill=function(e,t,r,n){if(\"string\"==typeof e){if(\"string\"==typeof t?(n=t,t=0,r=this.length):\"string\"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&\"string\"!=typeof n)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof n&&!l.isEncoding(n))throw new TypeError(\"Unknown encoding: \"+n)}else\"number\"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError(\"Out of range index\");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),\"number\"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var i=l.isBuffer(e)?e:$(new l(e,n).toString()),a=i.length;for(s=0;s<r-t;++s)this[s+t]=i[s%a]}return this};var B=/[^+\\/0-9A-Za-z-_]/g;function U(e){return e<16?\"0\"+e.toString(16):e.toString(16)}function $(e,t){var r;t=t||1/0;for(var n=e.length,o=null,s=[],i=0;i<n;++i){if((r=e.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(i+1===n){(t-=3)>-1&&s.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&s.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error(\"Invalid code point\");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function G(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\\s+|\\s+$/g,\"\")}(e).replace(B,\"\")).length<2)return\"\";for(;e.length%4!=0;)e+=\"=\";return e}(e))}function V(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}}).call(this,r(71))},function(e,t,r){\"use strict\";(function(e,r){\n/**\n * @license\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash include=\"cloneDeep,clone\" exports=\"node\" --development`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n(function(){var n,o=200,s=\"__lodash_hash_undefined__\",i=1,a=2,l=4,u=9007199254740991,c=\"[object Arguments]\",h=\"[object AsyncFunction]\",d=\"[object Boolean]\",p=\"[object Date]\",f=\"[object Function]\",_=\"[object GeneratorFunction]\",E=\"[object Map]\",m=\"[object Number]\",R=\"[object Null]\",O=\"[object Object]\",y=\"[object Proxy]\",g=\"[object RegExp]\",A=\"[object Set]\",v=\"[object String]\",N=\"[object Symbol]\",b=\"[object Undefined]\",T=\"[object WeakMap]\",w=\"[object ArrayBuffer]\",P=\"[object DataView]\",I=\"[object Float32Array]\",S=\"[object Float64Array]\",C=\"[object Int8Array]\",x=\"[object Int16Array]\",F=\"[object Int32Array]\",D=\"[object Uint8Array]\",M=\"[object Uint8ClampedArray]\",j=\"[object Uint16Array]\",L=\"[object Uint32Array]\",B=/\\w*$/,U=/^\\[object .+?Constructor\\]$/,$=/^(?:0|[1-9]\\d*)$/,G={};G[I]=G[S]=G[C]=G[x]=G[F]=G[D]=G[M]=G[j]=G[L]=!0,G[c]=G[\"[object Array]\"]=G[w]=G[d]=G[P]=G[p]=G[\"[object Error]\"]=G[f]=G[E]=G[m]=G[O]=G[g]=G[A]=G[v]=G[T]=!1;var V={};V[c]=V[\"[object Array]\"]=V[w]=V[P]=V[d]=V[p]=V[I]=V[S]=V[C]=V[x]=V[F]=V[E]=V[m]=V[O]=V[g]=V[A]=V[v]=V[N]=V[D]=V[M]=V[j]=V[L]=!0,V[\"[object Error]\"]=V[f]=V[T]=!1;var k=\"object\"==typeof e&&e&&e.Object===Object&&e,W=k||Function(\"return this\")(),Q=t&&!t.nodeType&&t,J=Q&&\"object\"==typeof r&&r&&!r.nodeType&&r,K=J&&J.exports===Q,H=K&&k.process,q=function(){try{return H&&H.binding&&H.binding(\"util\")}catch(e){}}(),Y=q&&q.isMap,z=q&&q.isSet,X=q&&q.isTypedArray;function Z(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function ee(e){return function(t){return e(t)}}function te(e,t){return function(r){return e(t(r))}}var re,ne=Array.prototype,oe=Function.prototype,se=Object.prototype,ie=W[\"__core-js_shared__\"],ae=oe.toString,le=se.hasOwnProperty,ue=(re=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||\"\"))?\"Symbol(src)_1.\"+re:\"\",ce=se.toString,he=RegExp(\"^\"+ae.call(le).replace(/[\\\\^$.*+?()[\\]{}|]/g,\"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,\"$1.*?\")+\"$\"),de=K?W.Buffer:n,pe=W.Symbol,fe=W.Uint8Array,_e=de?de.allocUnsafe:n,Ee=te(Object.getPrototypeOf,Object),me=Object.create,Re=se.propertyIsEnumerable,Oe=ne.splice,ye=pe?pe.toStringTag:n,ge=function(){try{var e=st(Object,\"defineProperty\");return e({},\"\",{}),e}catch(e){}}(),Ae=Object.getOwnPropertySymbols,ve=de?de.isBuffer:n,Ne=te(Object.keys,Object),be=st(W,\"DataView\"),Te=st(W,\"Map\"),we=st(W,\"Promise\"),Pe=st(W,\"Set\"),Ie=st(W,\"WeakMap\"),Se=st(Object,\"create\"),Ce=ht(be),xe=ht(Te),Fe=ht(we),De=ht(Pe),Me=ht(Ie),je=pe?pe.prototype:n,Le=je?je.valueOf:n;function Be(){}var Ue=function(){function e(){}return function(t){if(!Ot(t))return{};if(me)return me(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function $e(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ge(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ve(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ke(e){var t=this.__data__=new Ge(e);this.size=t.size}function We(e,t){var r=ft(e),n=!r&&pt(e),o=!r&&!n&&Et(e),s=!r&&!n&&!o&&vt(e),i=r||n||o||s,a=i?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=a.length;for(var u in e)!t&&!le.call(e,u)||i&&(\"length\"==u||o&&(\"offset\"==u||\"parent\"==u)||s&&(\"buffer\"==u||\"byteLength\"==u||\"byteOffset\"==u)||ut(u,l))||a.push(u);return a}function Qe(e,t,r){var o=e[t];le.call(e,t)&&dt(o,r)&&(r!==n||t in e)||Ke(e,t,r)}function Je(e,t){for(var r=e.length;r--;)if(dt(e[r][0],t))return r;return-1}function Ke(e,t,r){\"__proto__\"==t&&ge?ge(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function He(e,t,r,o,s,u){var h,R=t&i,y=t&a,b=t&l;if(r&&(h=s?r(e,o,s,u):r(e)),h!==n)return h;if(!Ot(e))return e;var T=ft(e);if(T){if(h=function(e){var t=e.length,r=new e.constructor(t);t&&\"string\"==typeof e[0]&&le.call(e,\"index\")&&(r.index=e.index,r.input=e.input);return r}(e),!R)return function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(e,h)}else{var U=lt(e),$=U==f||U==_;if(Et(e))return function(e,t){if(t)return e.slice();var r=e.length,n=_e?_e(r):new e.constructor(r);return e.copy(n),n}(e,R);if(U==O||U==c||$&&!s){if(h=y||$?{}:function(e){return\"function\"!=typeof e.constructor||ct(e)?{}:Ue(Ee(e))}(e),!R)return y?function(e,t){return tt(e,at(e),t)}(e,function(e,t){return e&&tt(t,bt(t),e)}(h,e)):function(e,t){return tt(e,it(e),t)}(e,function(e,t){return e&&tt(t,Nt(t),e)}(h,e))}else{if(!V[U])return s?e:{};h=function(e,t,r){var n=e.constructor;switch(t){case w:return et(e);case d:case p:return new n(+e);case P:return function(e,t){var r=t?et(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case I:case S:case C:case x:case F:case D:case M:case j:case L:return function(e,t){var r=t?et(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case E:return new n;case m:case v:return new n(e);case g:return(i=new(s=e).constructor(s.source,B.exec(s))).lastIndex=s.lastIndex,i;case A:return new n;case N:return o=e,Le?Object(Le.call(o)):{}}var o;var s,i}(e,U,R)}}u||(u=new ke);var G=u.get(e);if(G)return G;if(u.set(e,h),At(e))return e.forEach(function(n){h.add(He(n,t,r,n,e,u))}),h;if(gt(e))return e.forEach(function(n,o){h.set(o,He(n,t,r,o,e,u))}),h;var k=T?n:(b?y?nt:rt:y?bt:Nt)(e);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););}(k||e,function(n,o){k&&(n=e[o=n]),Qe(h,o,He(n,t,r,o,e,u))}),h}function qe(e,t,r){var n=t(e);return ft(e)?n:Z(n,r(e))}function Ye(e){return null==e?e===n?b:R:ye&&ye in Object(e)?function(e){var t=le.call(e,ye),r=e[ye];try{e[ye]=n;var o=!0}catch(e){}var s=ce.call(e);o&&(t?e[ye]=r:delete e[ye]);return s}(e):function(e){return ce.call(e)}(e)}function ze(e){return yt(e)&&Ye(e)==c}function Xe(e){return!(!Ot(e)||(t=e,ue&&ue in t))&&(mt(e)?he:U).test(ht(e));var t}function Ze(e){if(!Ot(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ct(e),r=[];for(var n in e)(\"constructor\"!=n||!t&&le.call(e,n))&&r.push(n);return r}function et(e){var t=new e.constructor(e.byteLength);return new fe(t).set(new fe(e)),t}function tt(e,t,r,o){var s=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var l=t[i],u=o?o(r[l],e[l],l,r,e):n;u===n&&(u=e[l]),s?Ke(r,l,u):Qe(r,l,u)}return r}function rt(e){return qe(e,Nt,it)}function nt(e){return qe(e,bt,at)}function ot(e,t){var r,n,o=e.__data__;return(\"string\"==(n=typeof(r=t))||\"number\"==n||\"symbol\"==n||\"boolean\"==n?\"__proto__\"!==r:null===r)?o[\"string\"==typeof t?\"string\":\"hash\"]:o.map}function st(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Xe(r)?r:n}$e.prototype.clear=function(){this.__data__=Se?Se(null):{},this.size=0},$e.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$e.prototype.get=function(e){var t=this.__data__;if(Se){var r=t[e];return r===s?n:r}return le.call(t,e)?t[e]:n},$e.prototype.has=function(e){var t=this.__data__;return Se?t[e]!==n:le.call(t,e)},$e.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Se&&t===n?s:t,this},Ge.prototype.clear=function(){this.__data__=[],this.size=0},Ge.prototype.delete=function(e){var t=this.__data__,r=Je(t,e);return!(r<0||(r==t.length-1?t.pop():Oe.call(t,r,1),--this.size,0))},Ge.prototype.get=function(e){var t=this.__data__,r=Je(t,e);return r<0?n:t[r][1]},Ge.prototype.has=function(e){return Je(this.__data__,e)>-1},Ge.prototype.set=function(e,t){var r=this.__data__,n=Je(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Ve.prototype.clear=function(){this.size=0,this.__data__={hash:new $e,map:new(Te||Ge),string:new $e}},Ve.prototype.delete=function(e){var t=ot(this,e).delete(e);return this.size-=t?1:0,t},Ve.prototype.get=function(e){return ot(this,e).get(e)},Ve.prototype.has=function(e){return ot(this,e).has(e)},Ve.prototype.set=function(e,t){var r=ot(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ke.prototype.clear=function(){this.__data__=new Ge,this.size=0},ke.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ke.prototype.get=function(e){return this.__data__.get(e)},ke.prototype.has=function(e){return this.__data__.has(e)},ke.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ge){var n=r.__data__;if(!Te||n.length<o-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ve(n)}return r.set(e,t),this.size=r.size,this};var it=Ae?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,s=[];++r<n;){var i=e[r];t(i,r,e)&&(s[o++]=i)}return s}(Ae(e),function(t){return Re.call(e,t)}))}:Tt,at=Ae?function(e){for(var t=[];e;)Z(t,it(e)),e=Ee(e);return t}:Tt,lt=Ye;function ut(e,t){var r=typeof e;return!!(t=null==t?u:t)&&(\"number\"==r||\"symbol\"!=r&&$.test(e))&&e>-1&&e%1==0&&e<t}function ct(e){var t=e&&e.constructor;return e===(\"function\"==typeof t&&t.prototype||se)}function ht(e){if(null!=e){try{return ae.call(e)}catch(e){}try{return e+\"\"}catch(e){}}return\"\"}function dt(e,t){return e===t||e!=e&&t!=t}(be&&lt(new be(new ArrayBuffer(1)))!=P||Te&&lt(new Te)!=E||we&&\"[object Promise]\"!=lt(we.resolve())||Pe&&lt(new Pe)!=A||Ie&&lt(new Ie)!=T)&&(lt=function(e){var t=Ye(e),r=t==O?e.constructor:n,o=r?ht(r):\"\";if(o)switch(o){case Ce:return P;case xe:return E;case Fe:return\"[object Promise]\";case De:return A;case Me:return T}return t});var pt=ze(function(){return arguments}())?ze:function(e){return yt(e)&&le.call(e,\"callee\")&&!Re.call(e,\"callee\")},ft=Array.isArray;function _t(e){return null!=e&&Rt(e.length)&&!mt(e)}var Et=ve||wt;function mt(e){if(!Ot(e))return!1;var t=Ye(e);return t==f||t==_||t==h||t==y}function Rt(e){return\"number\"==typeof e&&e>-1&&e%1==0&&e<=u}function Ot(e){var t=typeof e;return null!=e&&(\"object\"==t||\"function\"==t)}function yt(e){return null!=e&&\"object\"==typeof e}var gt=Y?ee(Y):function(e){return yt(e)&&lt(e)==E},At=z?ee(z):function(e){return yt(e)&&lt(e)==A},vt=X?ee(X):function(e){return yt(e)&&Rt(e.length)&&!!G[Ye(e)]};function Nt(e){return _t(e)?We(e):function(e){if(!ct(e))return Ne(e);var t=[];for(var r in Object(e))le.call(e,r)&&\"constructor\"!=r&&t.push(r);return t}(e)}function bt(e){return _t(e)?We(e,!0):Ze(e)}function Tt(){return[]}function wt(){return!1}Be.keys=Nt,Be.keysIn=bt,Be.clone=function(e){return He(e,l)},Be.cloneDeep=function(e){return He(e,i|l)},Be.eq=dt,Be.isArguments=pt,Be.isArray=ft,Be.isArrayLike=_t,Be.isBuffer=Et,Be.isFunction=mt,Be.isLength=Rt,Be.isMap=gt,Be.isObject=Ot,Be.isObjectLike=yt,Be.isSet=At,Be.isTypedArray=vt,Be.stubArray=Tt,Be.stubFalse=wt,Be.VERSION=\"4.17.5\",J&&((J.exports=Be)._=Be,Q._=Be)}).call(this)}).call(this,r(71),r(150)(e))},function(e,t,r){\"use strict\";const{isPromise:n}=r(8);e.exports={after:function(e,t){return n(e)?e.then(t):t(e)}}},function(e,t,r){\"use strict\";const{isPromise:n}=r(8);e.exports={afterReturn:function(e,t){return n(e)?e.then(()=>t):t}}},function(e,t,r){\"use strict\";const{isPromise:n}=r(8);e.exports={mapAfterAllReturn:function(e,t,r){const o=new Array(e.length);let s=!1;for(let r=0,i=e.length;r<i;++r)o[r]=t(e[r]),n(o[r])&&(s=!0);return s?Promise.all(o).then(()=>r):r}}},function(e,t,r){\"use strict\";(function(t){const{isPromise:n}=r(8);function o(e){return[e]}function s(e){try{if(e.rejected)return;const r=e.index++,o=e.items[r],s=e.mapper(o,r);return n(s)?s.then(t=>i(e,t,r)).catch(t=>a(e,t)):t.nextTick(()=>i(e,s,r)),null}catch(t){a(e,t)}}function i(e,t,r){return e.rejected?null:(e.results[r]=t,e.numFinished++,e.numFinished===e.items.length&&e.resolve(e.results),e.index<e.items.length&&s(e),null)}function a(e,t){e.rejected=!0,e.reject(t)}e.exports={promiseMap:function(e,t,r){switch(e.length){case 0:return Promise.resolve([]);case 1:return function(e,t){try{const r=t(e[0],0);return n(r)?r.then(o):Promise.resolve(o(r))}catch(e){return Promise.reject(e)}}(e,t);default:return function(e,t,r={}){return new Promise((n,o)=>{const i=r.concurrency||Number.MAX_SAFE_INTEGER,a={reject:o,resolve:n,rejected:!1,index:0,numFinished:0,results:new Array(e.length),items:e,mapper:t};for(;a.index<i&&a.index<e.length&&!a.rejected;)s(a)})}(e,t,r)}}}}).call(this,r(73))},function(e,t,r){\"use strict\";const{isPromise:n}=r(8);e.exports={promiseTry:function(e){try{const t=e();return n(t)?t:Promise.resolve(t)}catch(e){return Promise.reject(e)}}}},function(e,t,r){\"use strict\";var n=r(164),o=r(51),s=r(15),i=r(80),a=r(166);function l(e,t,r){var n=this._refs[r];if(\"string\"==typeof n){if(!this._refs[n])return l.call(this,e,t,n);n=this._refs[n]}if((n=n||this._schemas[r])instanceof i)return p(n.schema,this._opts.inlineRefs)?n.schema:n.validate||this._compile(n);var o,s,a,c=u.call(this,t,r);return c&&(o=c.schema,t=c.root,a=c.baseId),o instanceof i?s=o.validate||e.call(this,o.schema,t,void 0,a):void 0!==o&&(s=p(o,this._opts.inlineRefs)?o:e.call(this,o,t,void 0,a)),s}function u(e,t){var r=n.parse(t),o=_(r),s=f(this._getId(e.schema));if(0===Object.keys(e.schema).length||o!==s){var a=m(o),l=this._refs[a];if(\"string\"==typeof l)return function(e,t,r){var n=u.call(this,e,t);if(n){var o=n.schema,s=n.baseId;e=n.root;var i=this._getId(o);return i&&(s=R(s,i)),h.call(this,r,s,o,e)}}.call(this,e,l,r);if(l instanceof i)l.validate||this._compile(l),e=l;else{if(!((l=this._schemas[a])instanceof i))return;if(l.validate||this._compile(l),a==m(t))return{schema:l,root:e,baseId:s};e=l}if(!e.schema)return;s=f(this._getId(e.schema))}return h.call(this,r,s,e.schema,e)}e.exports=l,l.normalizeId=m,l.fullPath=f,l.url=R,l.ids=function(e){var t=m(this._getId(e)),r={\"\":t},i={\"\":f(t,!1)},l={},u=this;return a(e,{allKeys:!0},function(e,t,a,c,h,d,p){if(\"\"!==t){var f=u._getId(e),_=r[c],E=i[c]+\"/\"+h;if(void 0!==p&&(E+=\"/\"+(\"number\"==typeof p?p:s.escapeFragment(p))),\"string\"==typeof f){f=_=m(_?n.resolve(_,f):f);var R=u._refs[f];if(\"string\"==typeof R&&(R=u._refs[R]),R&&R.schema){if(!o(e,R.schema))throw new Error('id \"'+f+'\" resolves to more than one schema')}else if(f!=m(E))if(\"#\"==f[0]){if(l[f]&&!o(e,l[f]))throw new Error('id \"'+f+'\" resolves to more than one schema');l[f]=e}else u._refs[f]=E}r[t]=_,i[t]=E}}),l},l.inlineRef=p,l.schema=u;var c=s.toHash([\"properties\",\"patternProperties\",\"enum\",\"dependencies\",\"definitions\"]);function h(e,t,r,n){if(e.fragment=e.fragment||\"\",\"/\"==e.fragment.slice(0,1)){for(var o=e.fragment.split(\"/\"),i=1;i<o.length;i++){var a=o[i];if(a){if(void 0===(r=r[a=s.unescapeFragment(a)]))break;var l;if(!c[a]&&((l=this._getId(r))&&(t=R(t,l)),r.$ref)){var h=R(t,r.$ref),d=u.call(this,n,h);d&&(r=d.schema,n=d.root,t=d.baseId)}}}return void 0!==r&&r!==n.schema?{schema:r,root:n,baseId:t}:void 0}}var d=s.toHash([\"type\",\"format\",\"pattern\",\"maxLength\",\"minLength\",\"maxProperties\",\"minProperties\",\"maxItems\",\"minItems\",\"maximum\",\"minimum\",\"uniqueItems\",\"multipleOf\",\"required\",\"enum\"]);function p(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var r;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if(\"object\"==typeof(r=t[n])&&!e(r))return!1}else for(var o in t){if(\"$ref\"==o)return!1;if(\"object\"==typeof(r=t[o])&&!e(r))return!1}return!0}(e):t?function e(t){var r,n=0;if(Array.isArray(t)){for(var o=0;o<t.length;o++)if(\"object\"==typeof(r=t[o])&&(n+=e(r)),n==1/0)return 1/0}else for(var s in t){if(\"$ref\"==s)return 1/0;if(d[s])n++;else if(\"object\"==typeof(r=t[s])&&(n+=e(r)+1),n==1/0)return 1/0}return n}(e)<=t:void 0)}function f(e,t){return!1!==t&&(e=m(e)),_(n.parse(e))}function _(e){return n.serialize(e).split(\"#\")[0]+\"#\"}var E=/#\\/?$/;function m(e){return e?e.replace(E,\"\"):\"\"}function R(e,t){return t=m(t),n.resolve(e,t)}},function(e,t,r){\"use strict\";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&\"object\"==typeof t&&\"object\"==typeof r){if(t.constructor!==r.constructor)return!1;var n,o,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(o=n;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=n;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,s[o]))return!1;for(o=n;0!=o--;){var i=s[o];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},function(e,t,r){\"use strict\";var n=r(50);function o(e,t,r){this.message=r||o.message(e,t),this.missingRef=n.url(e,t),this.missingSchema=n.normalizeId(n.fullPath(this.missingRef))}function s(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:s(function(e){this.message=\"validation failed\",this.errors=e,this.ajv=this.validation=!0}),MissingRef:s(o)},o.message=function(e,t){return\"can't resolve reference \"+t+\" from id \"+e}},function(e,t,r){\"use strict\";const{isString:n,isObject:o}=r(0),s=/\\s+as\\s+/i;class i{constructor(e,t,r){this.table=e,this.column=t,this.alias=r}get name(){return this.alias||this.column}static create(e){return o(e)?e.isObjectionSelection?e:e.isObjectionReferenceBuilder?new i((r=e).tableName,r.column,r.alias):e.isObjectionRawBuilder&&(t=e).alias?new i(null,null,t.alias):null:n(e)?function(e){let t=null,r=null,n=null;if(s.test(e)){const t=e.split(s);e=t[0].trim(),n=t[1].trim()}const o=e.lastIndexOf(\".\");-1!==o?(t=e.substr(0,o),r=e.substr(o+1)):r=e;return new i(t,r,n)}(e):null;var t,r}static doesSelect(e,t,r){if(t=i.create(t),r=i.create(r),\"*\"===t.column)return!t.table||(\"*\"===r.column?r.table===t.table:null===r.table||r.table===t.table);{const n=t.table||e.tableRef();return\"*\"!==r.column&&(r.column===t.column&&(null===r.table||r.table===n))}}}Object.defineProperties(i.prototype,{isObjectionSelection:{enumerable:!1,writable:!1,value:!0}}),e.exports={Selection:i}},function(e,t,r){\"use strict\";const{ObjectionToKnexConvertingOperation:n}=r(4);e.exports={KnexOperation:class extends n{onBuildKnex(e,t){e[this.name].apply(e,this.getKnexArgs(t))}}}},function(e,t,r){\"use strict\";const n=r(32),{asArray:o,isObject:s,isString:i}=r(0);function a(e,t){let r=n.parseFieldExpression(e),o=r.access.map(e=>e.ref).join(\",\"),s=t?\"#>>\":\"#>\";return`\"${r.columnName.split(\".\").join('\".\"')}\"${s}'{${o}}'`}function l(e,t,r,n){let o=a(e);if(i(r)){let e=[\"(\",o,\")::jsonb\",t,\"(\",a(r),\")::jsonb\"];return n&&e.unshift(n),[e.join(\" \")]}if(s(r)){let e=[\"(\",o,\")::jsonb\",t,\"?::jsonb\"];return n&&e.unshift(n),[e.join(\" \"),JSON.stringify(r)]}throw new Error(\"Invalid right hand expression.\")}e.exports={parseFieldExpression:a,whereJsonbRefOnLeftJsonbValOrRefOnRight:function(e,t,r,n,o){let s=l(t,r,n,o);return e.whereRaw.apply(e,s)},whereJsonbRefOnLeftJsonbValOrRefOnRightRawQueryParams:l,whereJsonFieldRightStringArrayOnLeftQuery:function(e,t,r,n){let s=a(t),l=\"array[\"+(n=o(n)).map(e=>{if(!i(e))throw new Error(\"All keys to find must be strings.\");return\"?\"}).join(\",\")+\"]\",u=e.raw(l,n);return`${s} ${r.replace(\"?\",\"\\\\?\")} ${u}`},whereJsonFieldQuery:function(e,t,r,n){let o,s=a(t,!0),i=function(e,t){let r=t.trim().toLowerCase();switch(r){case\"is\":case\"is not\":return r;default:return e.client.formatter().operator(t)}}(e,r),l=e.raw(\" ?\",[n]),u=typeof n;if(\"number\"===u)o=\"::NUMERIC\";else if(\"boolean\"===u)o=\"::BOOLEAN\";else if(\"string\"===u)o=\"::TEXT\";else{if(null!==n)throw new Error(\"Value must be string, number, boolean or null.\");o=\"::TEXT\",l=\"NULL\"}return`(${s})${o} ${i} ${l}`}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1),{StaticHookArguments:o}=r(34),{isPromise:s,after:i,afterReturn:a}=r(2),{isObject:l}=r(0);function u(e,t,r){return Array.isArray(t)?1===t.length?c(e,t[0],t,r):function(e,t,r){if(0===t.length||!l(t[0]))return t;const n=new Array(t.length);let o=!1;for(let i=0,a=t.length;i<a;++i)n[i]=c(e,t[i],t[i],r),s(n[i])&&(o=!0);return o?Promise.all(n):n}(e,t,r):c(e,t,t,r)}function c(e,t,r,n){if(!l(t)||!t.$isObjectionModel)return r;if(n){const n=[];return function(e,t,r){const n=Object.keys(t);let o=!1;for(let i=0,a=n.length;i<a;++i){const a=n[i],l=t[a];if(h(l)){const t=u(e,l,!0);s(t)&&(o=!0),r.push(t)}}return o}(e,t,n)?Promise.all(n).then(()=>d(e,t,r)):d(e,t,r)}return d(e,t,r)}function h(e){return l(e)&&e.$isObjectionModel||function(e){return Array.isArray(e)&&e.length>0&&l(e[0])}(e)&&e[0].$isObjectionModel}function d(e,t,r){const n=function(e){return e.$afterFind!==e.$objectionModelClass.prototype.$afterFind?e.$afterFind:e.$afterGet!==e.$objectionModelClass.prototype.$afterGet?e.$afterGet:null}(t);if(null!==n){const o=n.call(t,e);return s(o)?o.then(()=>r):r}return r}e.exports={FindOperation:class extends n{onBefore2(e,t){return a(function(e){const t=o.create({builder:e});return e.modelClass().beforeFind(t)}(e),t)}onAfter3(e,t){return e.findOptions().dontCallFindHooks?t:function(e,t){const r=e.findOptions(),n=u(e.context(),t,r.callAfterFindDeeply);return i(n,()=>(function(e,t){const r=o.create({builder:e,result:t}),n=e.modelClass().afterFind(r);return i(n,e=>void 0===e?t:e)})(e,t))}(e,t)}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1),{RelationExpression:o}=r(9);function s(e){return`_f${e}_`}e.exports={EagerOperation:class extends n{constructor(e,t){super(e,t),this.expression=o.create(),this.modifiersAtPath=[],this.graphOptions=this.opt.defaultGraphOptions}buildFinalExpression(){const e=this.expression.clone();return this.modifiersAtPath.forEach((t,r)=>{const n=s(r);e.expressionsAtPath(t.path).forEach(e=>{e.node.$modify.push(n)})}),e}buildFinalModifiers(e){const t=e.modifiers();return this.modifiersAtPath.forEach((e,r)=>{const n=s(r);t[n]=e.modifier}),t}cloneFrom(e){this.expression=e.expression.clone(),this.modifiersAtPath=e.modifiersAtPath.slice(),this.graphOptions=Object.assign({},e.graphOptions)}clone(){const e=super.clone();return e.cloneFrom(this),e}}}},function(e,t,r){\"use strict\";const{isObject:n,isString:o,asArray:s,asSingle:i}=r(0),{ValidationErrorType:a}=r(5),{ModelGraphNode:l}=r(219),{ModelGraphEdge:u}=r(25);function c(e,t){const r=e.constructor,n=r.getRelationNames();for(const o of Object.keys(e))n.includes(o)||h(e[o],[o],(e,n)=>{d(r.propRefRegex,e,e=>{const[r,o,s]=e;t({path:n,refMatch:r,ref:o,refPath:s.trim().split(\".\")})})})}function h(e,t,r){Array.isArray(e)?function(e,t,r){for(let n=0;n<e.length;++n)t.push(n),h(e[n],t,r),t.pop()}(e,t,r):n(e)?function(e,t,r){for(const n of Object.keys(e))t.push(n),h(e[n],t,r),t.pop()}(e,t,r):o(e)&&r(e,t)}function d(e,t,r){let n=e.exec(t);for(;n;)r(n),n=e.exec(t)}function p(e){return new Error([`could not resolve reference ${e} in a graph.`,\"If you are sure the #id exist in the same graph,\",\"this may be due to a limitation that a subgraph under a related item\",\"cannot reference an item in a subgraph under another related item.\",\"If you run into this limitation, please open an issue in objection github.\"].join(\" \"))}function f(e,t){throw e.createValidationError({type:a.InvalidGraph,message:`expected value \"${t}\" to be an instance of ${e.name}`})}e.exports={ModelGraphBuilder:class{constructor(){this.nodes=[],this.edges=[]}static buildGraph(e,t){const r=new this;return r._buildGraph(e,t),r}_buildGraph(e,t){if(t)if(Array.isArray(t))this._buildNodes(e,t);else{if(!n(t))throw f(e,t);this._buildNode(e,t)}this._buildReferences()}_buildNodes(e,t,r=null,n=null){(t=s(t)).forEach((t,o)=>{this._buildNode(e,t,r,n,o)})}_buildNode(e,t,r=null,o=null,s=null){if(t=i(t),!n(t)||!t.$isObjectionModel)throw f(e,t);const a=new l(e,t);if(this.nodes.push(a),r){const e=new u(u.Type.Relation,r,a,o,s);a.parentEdge=e,this._addEdge(r,a,e)}this._buildRelationNodes(a)}_buildRelationNodes(e){for(const t of e.modelClass.getRelationNames()){const r=e.obj[t];if(!r)continue;const n=e.modelClass.getRelation(t);n.isOneToOne()?this._buildNode(n.relatedModelClass,r,e,n):this._buildNodes(n.relatedModelClass,r,e,n)}}_buildReferences(){const e=this._nodesByUid();this._buildObjectReferences(e),this._buildPropertyReferences(e)}_nodesByUid(){const e=new Map;for(const t of this.nodes){const r=t.uid;void 0!==r&&e.set(r,t)}return e}_buildObjectReferences(e){for(const t of this.nodes){const r=t.reference;if(void 0===r)continue;const n=e.get(r);if(!n)throw p(r);const o=new u(u.Type.Reference,t,n);o.refType=u.ReferenceType.Object,this._addEdge(t,n,o)}}_buildPropertyReferences(e){for(const t of this.nodes)c(t.obj,({path:r,refMatch:n,ref:o,refPath:s})=>{const i=e.get(o);if(!i)throw p(o);const a=new u(u.Type.Reference,t,i);a.refType=u.ReferenceType.Property,a.refMatch=n,a.refOwnerDataPath=r.slice(),a.refRelatedDataPath=s,this._addEdge(t,i,a)})}_addEdge(e,t,r){this.edges.push(r),e.edges.push(r),t.edges.push(r),r.type===u.Type.Reference&&(e.refEdges.push(r),t.refEdges.push(r))}},createNotModelError:f,forEachPropertyReference:c}},function(e,t,r){\"use strict\";const{FindOperation:n}=r(56);e.exports={RelationFindOperation:class extends n{constructor(e,t){super(e,t),this.relation=t.relation,this.owner=t.owner,this.alwaysReturnArray=!1,this.assignResultToOwner=!0,this.relationProperty=t.relationProperty||this.relation.name,this.omitProps=[],this.alias=null}onBuild(e){this.maybeApplyAlias(e),this.relation.findQuery(e,this.owner),this.assignResultToOwner&&this.owner.isModels&&this.selectMissingJoinColumns(e)}onAfter2(e,t){const r=this.relation.isOneToOne();if(this.assignResultToOwner&&this.owner.isModels){const e=this.owner.modelArray,n=new Map;for(let e=0,r=t.length;e<r;++e){const r=t[e],o=this.relation.relatedProp.propKey(r);let s=n.get(o);s||(s=[],n.set(o,s)),s.push(r)}for(let t=0,o=e.length;t<o;++t){const o=e[t],s=this.relation.ownerProp.propKey(o),i=n.get(s);o[this.relationProperty]=r?i&&i[0]||null:i||[]}}return t}onAfter3(e,t){const r=this.relation.isOneToOne();return e.internalOptions().keepImplicitJoinProps||this.omitImplicitJoinProps(t),!this.alwaysReturnArray&&r&&t.length<=1&&(t=t[0]||void 0),super.onAfter3(e,t)}selectMissingJoinColumns(e){const t=this.relation.relatedProp,r=[];for(let n=0,o=t.size;n<o;++n){const o=t.ref(e,n).fullColumn(e),s=t.props[n],i=t.cols[n];e.hasSelectionAs(o,i)||-1!==r.indexOf(o)||(this.omitProps.push(s),r.push(o))}r.length&&e.select(r)}maybeApplyAlias(e){!e.alias()&&this.alias&&e.alias(this.alias)}omitImplicitJoinProps(e){const t=this.relation.relatedModelClass;if(!this.omitProps.length||!e)return e;if(!Array.isArray(e))return this.omitImplicitJoinPropsFromOne(t,e);if(!e.length)return e;for(let r=0,n=e.length;r<n;++r)this.omitImplicitJoinPropsFromOne(t,e[r]);return e}omitImplicitJoinPropsFromOne(e,t){for(let r=0,n=this.omitProps.length;r<n;++r)e.omitImpl(t,this.omitProps[r]);return t}clone(){const e=super.clone();return e.alwaysReturnArray=this.alwaysReturnArray,e.assignResultToOwner=this.assignResultToOwner,e.relationProperty=this.relationProperty,e.omitProps=this.omitProps.slice(),e.alias=this.alias,e}}}},function(e,t,r){\"use strict\";const{asArray:n,isObject:o,uniqBy:s,get:i,set:a}=r(0),{ref:l}=r(31),{propToStr:u,PROP_KEY_PREFIX:c}=r(75);class h extends Error{constructor(e){super(),this.name=this.constructor.name,this.tableName=e}}class d extends Error{constructor(){super(),this.name=this.constructor.name}}e.exports={RelationProperty:class{constructor(e,t){const r=function(e){try{return e.map(e=>o(e)&&e.isObjectionReferenceBuilder?e:l(e))}catch(e){throw new d}}(n(e)),u=function(e,t){return e.map(e=>{if(!e.tableName)throw new d;const r=t(e.tableName);if(!r)throw new h(e.tableName);const n=r.columnNameToPropertyName(e.column),o=e.parsedExpr.access.map(e=>e.ref);return{path:[n].concat(o),modelClass:r}})}(r,t),c=function(e){const t=e.map(e=>e.modelClass);if(1!==s(t).length)throw new d;return t[0]}(u);this._refs=r.map(e=>e.model(c)),this._modelClass=c,this._props=u.map(e=>e.path[0]),this._cols=r.map(e=>e.column),this._propGetters=u.map(e=>(function(e){if(1===e.length){const t=e[0];return e=>e[t]}return t=>i(t,e)})(e.path)),this._propSetters=u.map(e=>(function(e){if(1===e.length){const t=e[0];return(e,r)=>e[t]=r}return(t,r)=>a(t,e,r)})(e.path)),this._patchers=r.map((e,t)=>(function(e,t){return e.isPlainColumnRef?(e,r)=>e[t[0]]=r:(t,r)=>t[e.expression]=r})(e,u[t].path))}static get ModelNotFoundError(){return h}static get InvalidReferenceError(){return d}get size(){return this._refs.length}get modelClass(){return this._modelClass}get props(){return this._props}get cols(){return this._cols}forEach(e){for(let t=0,r=this.size;t<r;++t)e(t)}propKey(e){const t=this.size;let r=c;for(let n=0;n<t;++n)r+=u(this.getProp(e,n)),n!==t-1&&(r+=\",\");return r}getProps(e){const t=this.size,r=new Array(t);for(let n=0;n<t;++n)r[n]=this.getProp(e,n);return r}hasProps(e){const t=this.size;for(let r=0;r<t;++r){const t=this.getProp(e,r);if(null==t)return!1}return!0}getProp(e,t){return this._propGetters[t](e)}setProp(e,t,r){return this._propSetters[t](e,r)}ref(e,t){const r=e.tableRefFor(this.modelClass);return this._refs[t].clone().table(r)}refs(e){const t=new Array(this.size);for(let r=0,n=t.length;r<n;++r)t[r]=this.ref(e,r);return t}patch(e,t,r){return this._patchers[t](e,r)}propDescription(e){return this._refs[e].expression}}}},function(e,t,r){\"use strict\";const{Relation:n}=r(39),{HasManyInsertOperation:o}=r(249),{HasManyRelateOperation:s}=r(250),{HasManyUnrelateOperation:i}=r(251);class a extends n{insert(e,t){return new o(\"insert\",{relation:this,owner:t})}relate(e,t){return new s(\"relate\",{relation:this,owner:t})}unrelate(e,t){return new i(\"unrelate\",{relation:this,owner:t})}hasRelateProp(e){return e.$hasId()}setRelateProp(e,t){e.$id(t)}}Object.defineProperties(a.prototype,{isObjectionHasManyRelation:{enumerable:!1,writable:!1,value:!0}}),e.exports={HasManyRelation:a}},function(e,t,r){\"use strict\";e.exports={inherit:function(e,t){return e.prototype=Object.create(t.prototype),e.prototype.constructor=t,Object.setPrototypeOf(e,t),e}}},function(e,t,r){\"use strict\";const{isObject:n}=r(0);function o(e){const t=new Map;return r=>{let n=t.get(r);return void 0===n&&(n=e(r),t.set(r,n)),n}}function s(e,{upperCase:t=!1,underscoreBeforeDigits:r=!1,underscoreBetweenUppercaseLetters:n=!1}={}){if(0===e.length)return e;const o=e.toUpperCase(),s=e.toLowerCase();let i=s[0];for(let t=1,l=e.length;t<l;++t){const l=e[t],u=e[t-1],c=o[t],h=o[t-1],d=s[t],p=s[t-1];if(r&&a(l)&&!a(u))i+=\"_\"+l;else if(l===c&&c!==d){const e=u===h&&h!==p;i+=n||!e?\"_\"+d:d}else i+=l}return t?i.toUpperCase():i}function i(e,{upperCase:t=!1}={}){if(0===e.length)return e;t&&function(e){for(let t=1,r=e.length;t<r;++t){const r=e[t];if(\"_\"!==r&&r!==r.toUpperCase())return!1}return!0}(e)&&(e=e.toLowerCase());let r=e[0];for(let t=1,n=e.length;t<n;++t){const n=e[t],o=e[t-1];\"_\"!==n&&(r+=\"_\"===o?n.toUpperCase():n)}return r}function a(e){return e>=\"0\"&&e<=\"9\"}function l(e,t){return r=>{const n=r.lastIndexOf(t),o=e(r.slice(n+t.length));return r.slice(0,n+t.length)+o}}function u(e){return t=>{if(!n(t)||Array.isArray(t))return t;const r=Object.keys(t),o={};for(let n=0,s=r.length;n<s;++n){const s=r[n];o[e(s)]=t[s]}return o}}function c({parse:e,format:t,idSeparator:r=\":\"}={}){const n=o(l(t,r)),s=u(o(l(e,r)));return{wrapIdentifier:(e,t)=>t(n(e)),postProcessResponse(e){if(Array.isArray(e)){const t=new Array(e.length);for(let r=0,n=e.length;r<n;++r)t[r]=s(e[r]);return t}return s(e)}}}e.exports={snakeCase:s,camelCase:i,snakeCaseMappers:function(e={}){return{parse:u(o(t=>i(t,e))),format:u(o(t=>s(t,e)))}},knexSnakeCaseMappers:function(e={}){return c({parse:t=>i(t,e),format:t=>s(t,e)})},knexIdentifierMappers:c,knexIdentifierMapping:function(e){const t=Object.keys(e).reduce((t,r)=>(t[e[r]]=r,t),{});return c({parse:t=>e[t]||t,format:e=>t[e]||e})},camelCaseKeys:u(o(i)),snakeCaseKeys:u(o(s))}},function(e,t,r){\"use strict\";const{flatten:n}=r(0);function o(){const e=n(arguments);return e.slice(1).reduce((e,t)=>t(e),e[0])}e.exports={compose:function(){const e=n(arguments);return function(t){return o(t,e)}},mixin:o}},function(e,t,r){\"use strict\";const{InsertOperation:n}=r(23);e.exports={RelationInsertOperation:class extends n{constructor(e,t){super(e,t),this.relation=t.relation,this.owner=t.owner,this.assignResultToOwner=!0}async onBefore2(e,t){const r=e.context();return t=await this.relation.executeBeforeInsert(this.models,r,t),super.onBefore2(e,t)}clone(){const e=super.clone();return e.relation=this.relation,e.owner=this.owner,e.assignResultToOwner=this.assignResultToOwner,e}}}},function(e,t,r){\"use strict\";const n=()=>r(69).Model,{Relation:o}=r(39),{RelationProperty:s}=r(60),{isSqlite:i}=r(3),{inheritModel:a}=r(72),{resolveModel:l}=r(40),{mapAfterAllReturn:u}=r(2),{isFunction:c,isObject:h,isString:d}=r(0),{ManyToManyFindOperation:p}=r(252),{ManyToManyInsertOperation:f}=r(253),{ManyToManyRelateOperation:_}=r(108),{ManyToManyUnrelateOperation:E}=r(254),{ManyToManyUnrelateSqliteOperation:m}=r(255),{ManyToManyUpdateOperation:R}=r(256),{ManyToManyUpdateSqliteOperation:O}=r(257),{ManyToManyDeleteOperation:y}=r(258),{ManyToManyDeleteSqliteOperation:g}=r(259);class A extends o{setMapping(e){const t=super.setMapping(e);let r={mapping:e,ownerModelClass:this.ownerModelClass,relatedModelClass:this.relatedModelClass,ownerProp:this.ownerProp,relatedProp:this.relatedProp,joinTableModelClass:null,joinTableOwnerProp:null,joinTableRelatedProp:null,joinTableBeforeInsert:null,joinTableExtras:[],createError:e=>this.createError(e)};return r=function(e){null===e.joinTableModelClass.getIdColumn()&&(e.joinTableModelClass.idColumn=e.joinTableRelatedProp.cols);return e}(r=function(e){let t;t=c(e.mapping.join.through.beforeInsert)?e.mapping.join.through.beforeInsert:e=>e;return Object.assign(e,{joinTableBeforeInsert:t})}(r=function(e){let t=e.mapping.join.through.extra;if(!t)return e;d(t)?t={[t]:t}:Array.isArray(t)&&(t=t.reduce((e,t)=>(e[t]=t,e),{}));const r=Object.keys(t).map(r=>{const n=t[r];return{joinTableCol:n,joinTableProp:e.joinTableModelClass.columnNameToPropertyName(n),aliasCol:r,aliasProp:e.joinTableModelClass.columnNameToPropertyName(r)}});return Object.assign(e,{joinTableExtras:r})}(r=function(e){let t,r,n,o,s;if(t=N(e,e.mapping.join.through.from,\"join.through.from\"),r=t.prop,e=t.ctx,t=N(e,e.mapping.join.through.to,\"join.through.to\"),n=t.prop,e=t.ctx,r.modelClass.getTableName()!==n.modelClass.getTableName())throw e.createError(\"join.through `from` and `to` must point to the same join table.\");e.relatedProp.modelClass.getTableName()===r.modelClass.getTableName()?(o=r,s=n):(o=n,s=r);return Object.assign(e,{joinTableOwnerProp:s,joinTableRelatedProp:o})}(r=function(e){let t=null;if(e.mapping.join.through.modelClass)try{t=l(e.mapping.join.through.modelClass,e.ownerModelClass.modelPaths,\"join.through.modelClass\")}catch(t){throw e.createError(t.message)}return Object.assign(e,{joinTableModelClass:t})}(r=function(e){const t=e.mapping;if(!h(t.join.through))throw e.createError(\"join must have a `through` object that describes the join table.\");if(!t.join.through.from||!t.join.through.to)throw e.createError('join.through must be an object that describes the join table. For example: {from: \"JoinTable.someId\", to: \"JoinTable.someOtherId\"}');return e}(r)))))),this.joinTableExtras=r.joinTableExtras,this.joinTableModelClass=r.joinTableModelClass,this.joinTableOwnerProp=r.joinTableOwnerProp,this.joinTableRelatedProp=r.joinTableRelatedProp,this.joinTableBeforeInsert=r.joinTableBeforeInsert,t}get forbiddenMappingProperties(){return[]}findQuery(e,t){const r=this.joinTableOwnerProp.refs(e),n=e.tableNameFor(this.joinTable),o=e.tableRefFor(this.joinTable);return e.join(v(n,o),t=>{this.relatedProp.forEach(r=>{const n=this.relatedProp.ref(e,r),o=this.joinTableRelatedProp.ref(e,r);t.on(n,o)})}),t.buildFindQuery(e,this,r),this.applyModify(e)}join(e,{joinOperation:t=\"join\",relatedTableAlias:r=function(e,t){return t.tableRefFor(e.relatedModelClass)}(this,e),relatedJoinSelectQuery:n=function(e,t){return e.relatedModelClass.query().childQueryOf(t)}(this,e),relatedTable:o=function(e,t){return t.tableNameFor(e.relatedModelClass)}(this,e),ownerTable:s=function(e,t){return t.tableRefFor(e.ownerModelClass)}(this,e),joinTableAlias:i=function(e,t,r){const n=r.tableRefFor(e.joinTable);return n===e.joinTable?e.ownerModelClass.joinTableAlias(t):n}(this,r,e)}={}){let a=this.applyModify(n).as(r);return a.isSelectAll()&&(a=v(o,r)),e[t](v(this.joinTable,i),t=>{const r=this.ownerProp,n=this.joinTableOwnerProp;r.forEach(o=>{const a=n.ref(e,o).table(i),l=r.ref(e,o).table(s);t.on(a,l)})})[t](a,t=>{const n=this.relatedProp,o=this.joinTableRelatedProp;n.forEach(s=>{const a=o.ref(e,s).table(i),l=n.ref(e,s).table(r);t.on(a,l)})})}find(e,t){return new p(\"find\",{relation:this,owner:t})}insert(e,t){return new f(\"insert\",{relation:this,owner:t})}update(e,t){return i(e.knex())?new O(\"update\",{relation:this,owner:t}):new R(\"update\",{relation:this,owner:t})}patch(e,t){return i(e.knex())?new O(\"patch\",{modelOptions:{patch:!0},relation:this,owner:t}):new R(\"patch\",{modelOptions:{patch:!0},relation:this,owner:t})}delete(e,t){return i(e.knex())?new g(\"delete\",{relation:this,owner:t}):new y(\"delete\",{relation:this,owner:t})}relate(e,t){return new _(\"relate\",{relation:this,owner:t})}unrelate(e,t){return i(e.knex())?new m(\"unrelate\",{relation:this,owner:t}):new E(\"unrelate\",{relation:this,owner:t})}createJoinModels(e,t){return t.map(t=>this.createJoinModel(e,t))}createJoinModel(e,t){let r={};for(let t=0,n=this.joinTableOwnerProp.size;t<n;++t)this.joinTableOwnerProp.setProp(r,t,e[t]);for(let e=0,n=this.joinTableRelatedProp.size;e<n;++e){const n=this.relatedProp.getProp(t,e);void 0!==n&&this.joinTableRelatedProp.setProp(r,e,n)}for(const e of this.joinTableExtras){let n=t[e.aliasProp];void 0===n&&t.$$queryProps&&(n=t.$$queryProps[e.aliasProp]),void 0!==n&&(r[e.joinTableProp]=n)}return r}omitExtraProps(e){if(this.joinTableExtras&&this.joinTableExtras.length){const t=this.joinTableExtras.map(e=>e.aliasProp);for(const r of e)r.$omitFromDatabaseJson(t)}}executeJoinTableBeforeInsert(e,t,r){return u(e,e=>this.joinTableBeforeInsert(e,t),r)}}function v(e,t){return e===t?e:`${e} as ${t}`}function N(e,t,r){let o=null,i=e.joinTableModelClass;const l=t=>(null===i&&((i=a(n())).tableName=t,i.idColumn=null,i.concurrency=e.ownerModelClass.concurrency),i.getTableName()===t?i:null);try{o=new s(t,l)}catch(t){throw t instanceof s.ModelNotFoundError?e.createError(\"join.through `from` and `to` must point to the same join table.\"):e.createError(`${r} must have format JoinTable.columnName. For example \"JoinTable.someId\" or in case of composite key [\"JoinTable.a\", \"JoinTable.b\"].`)}return{ctx:Object.assign(e,{joinTableModelClass:i}),prop:o}}Object.defineProperties(A.prototype,{isObjectionManyToManyRelation:{enumerable:!1,writable:!1,value:!0}}),e.exports={ManyToManyRelation:A}},function(e,t,r){\"use strict\";const{ManyToManyModifyMixin:n}=r(41);e.exports={ManyToManySqliteModifyMixin:e=>(class extends(n(e)){applyModifyFilterForRelatedTable(e){const t=`${e.tableRefFor(this.relation.relatedModelClass)}._rowid_`,r=this.modifyFilterSubquery.clone().select(t);return e.whereInComposite(t,r)}applyModifyFilterForJoinTable(e){const t=this.relation.joinTableOwnerProp.refs(e),r=`${e.tableRefFor(this.relation.getJoinModelClass(e))}._rowid_`,n=this.owner.getProps(this.relation),o=this.modifyFilterSubquery.clone().select(r);return e.whereInComposite(r,o).whereInComposite(t,n)}})}},function(e,t,r){const n=r(118),o=r(10),s=r(6),i=r(21),a=r(20),l=r(19),u=r(27),c=r(28);function h(e,t,r){const n=e.parse(t);if(null===n)return null;const o={node:e,args:Object.assign({},r&&r.args,n)};for(let r=0;r<e.subclassParsers.length;++r){const n=h(e.subclassParsers[r],t,o);if(null!==n)return n}return o}e.exports={wrapError:function(e){const t=Object.keys(n);for(let r=0,o=t.length;r<o;++r){const o=h(n[t[r]],e,null);if(null!==o)return new o.node.error(o.args)}return e},DBError:o,UniqueViolationError:l,NotNullViolationError:a,ForeignKeyViolationError:i,ConstraintViolationError:s,CheckViolationError:u,DataError:c}},function(e,t,r){\"use strict\";const{clone:n}=r(70),{bindKnex:o}=r(151),{validate:s}=r(152),{isMsSql:i}=r(3),{deprecate:a}=r(12),{omit:l,pick:u}=r(153),{visitModels:c}=r(154),{hasId:h,getSetId:d}=r(155),{map:p}=r(2),{toJson:f,toDatabaseJson:_}=r(156),{values:E,propKey:m,hasProps:R}=r(75),{defineNonEnumerableProperty:O}=r(7),{parseRelationsIntoModelInstances:y}=r(76),{fetchTableMetadata:g,tableMetadata:A}=r(157),{asArray:v,isFunction:N,isString:b,asSingle:T}=r(0),{setJson:w,setFast:P,setRelated:I,appendRelated:S,setDatabaseJson:C}=r(158),{getJsonAttributes:x,parseJsonAttributes:F,formatJsonAttributes:D}=r(159),{columnNameToPropertyName:M,propertyNameToColumnName:j}=r(160),{raw:L}=r(29),{ref:B}=r(31),{fn:U}=r(77),{AjvValidator:$}=r(78),{QueryBuilder:G}=r(88),{NotFoundError:V}=r(105),{ValidationError:k}=r(5),{ModifierNotFoundError:W}=r(245),{RelationProperty:Q}=r(60),{RelationOwner:J}=r(98),{HasOneRelation:K}=r(106),{HasManyRelation:H}=r(61),{ManyToManyRelation:q}=r(66),{BelongsToOneRelation:Y}=r(112),{HasOneThroughRelation:z}=r(114),{InstanceFindOperation:X}=r(263),{InstanceInsertOperation:Z}=r(264),{InstanceUpdateOperation:ee}=r(265),{InstanceDeleteOperation:te}=r(266);class re{$id(e){return d(this,e)}$hasId(){return h(this)}$hasProps(e){return R(this,e)}$query(e){return function({instance:e,transaction:t}){return e.constructor.query(t).findOperationFactory(()=>new X(\"find\",{instance:e})).insertOperationFactory(()=>new Z(\"insert\",{instance:e})).updateOperationFactory(()=>new ee(\"update\",{instance:e})).patchOperationFactory(()=>new ee(\"patch\",{instance:e,modelOptions:{patch:!0}})).deleteOperationFactory(()=>new te(\"delete\",{instance:e})).relateOperationFactory(()=>{throw new Error(\"`relate` makes no sense in this context\")}).unrelateOperationFactory(()=>{throw new Error(\"`unrelate` makes no sense in this context\")})}({instance:this,transaction:e})}$relatedQuery(e,t){return ne({modelClass:this.constructor,relationName:e,transaction:t,alwaysReturnArray:!1}).for(this)}$loadRelated(e,t,r){return a(\"$loadRelated is deprected and will be removed in 3.0. Use $fetchGraph instead\"),this.$fetchGraph(e,{transaction:r}).modifiers(t)}$fetchGraph(e,t){return this.constructor.fetchGraph(this,e,t)}$beforeValidate(e,t,r){return e}$validate(e,t){return s(this,e,t)}$afterValidate(e,t){}$parseDatabaseJson(e){const t=this.constructor.getColumnNameMappers();return t&&(e=t.parse(e)),F(e,this.constructor)}$formatDatabaseJson(e){const t=this.constructor.getColumnNameMappers();return e=D(e,this.constructor),t&&(e=t.format(e)),e}$parseJson(e,t){return e}$formatJson(e){return e}$setJson(e,t){return w(this,e,t)}$setDatabaseJson(e){return C(this,e)}$set(e){return P(this,e)}$setRelated(e,t){return I(this,e,t)}$appendRelated(e,t){return S(this,e,t)}$toJson(e){return f(this,e)}toJSON(e){return this.$toJson(e)}$toDatabaseJson(e){return _(this,e)}$beforeInsert(e){}$afterInsert(e){}$beforeUpdate(e,t){}$afterUpdate(e,t){}$afterGet(e){}$afterFind(e){}$beforeDelete(e){}$afterDelete(e){}$omit(...e){return l(this,e)}$pick(...e){return u(this,e)}$values(e){return E(this,e)}$propKey(e){return m(this,e)}$idKey(){return this.$propKey(this.constructor.getIdPropertyArray())}$clone(e){return n(this,!(!e||!e.shallow),!1)}$traverse(e,t){return void 0===t&&(t=e,e=null),this.constructor.traverse(e,this,t),this}$traverseAsync(e,t){return void 0===t&&(t=e,e=null),this.constructor.traverseAsync(e,this,t)}$omitFromJson(e){if(0===arguments.length)return this.$$omitFromJson;this.hasOwnProperty(\"$$omitFromJson\")?this.$$omitFromJson=this.$$omitFromJson.concat(e):O(this,\"$$omitFromJson\",e)}$omitFromDatabaseJson(e){if(0===arguments.length)return this.$$omitFromDatabaseJson;this.hasOwnProperty(\"$$omitFromDatabaseJson\")?this.$$omitFromDatabaseJson=this.$$omitFromDatabaseJson.concat(e):O(this,\"$$omitFromDatabaseJson\",e)}$knex(){return this.constructor.knex()}$transaction(...e){return this.constructor.transaction(...e)}get $ref(){return this.constructor.ref}static get objectionModelClass(){return re}static fromJson(e,t){const r=new this;return r.$setJson(e||{},t),r}static fromDatabaseJson(e){const t=new this;return t.$setDatabaseJson(e||{}),t}static onCreateQuery(e){}static beforeFind(e){}static afterFind(e){}static beforeInsert(e){}static afterInsert(e){}static beforeUpdate(e){}static afterUpdate(e){}static beforeDelete(e){}static afterDelete(e){}static omitImpl(e,t){delete e[t]}static joinTableAlias(e){return`${e}_join`}static createValidator(){return new $({onCreateAjv:e=>{},options:{allErrors:!0,validateSchema:!1,ownProperties:!0,v5:!0}})}static modifierNotFound(e,t){throw new this.ModifierNotFoundError(t)}static createNotFoundError(e,t){return new this.NotFoundError(t)}static createValidationError(e){return new this.ValidationError(e)}static getTableName(){let e=this.tableName;if(N(e)&&(e=this.tableName()),!b(e))throw new Error(`Model ${this.name} must have a static property tableName`);return e}static getIdColumn(){let e=this.idColumn;return N(e)&&(e=this.idColumn()),e}static getValidator(){return oe(this,\"$$validator\",se)}static getJsonSchema(){return oe(this,\"$$jsonSchema\",ie)}static getJsonAttributes(){return oe(this,\"$$jsonAttributes\",x)}static getColumnNameMappers(){return oe(this,\"$$columnNameMappers\",ae)}static getConcurrency(e){return null===this.concurrency?e&&i(e)?1:4:N(this.concurrency)?this.concurrency():this.concurrency}static getModifiers(){return this.modifiers||this.namedFilters||{}}static columnNameToPropertyName(e){let t=oe(this,\"$$colToProp\",()=>new Map),r=t.get(e);return r||(r=M(this,e),t.set(e,r)),r}static propertyNameToColumnName(e){let t=oe(this,\"$$propToCol\",()=>new Map),r=t.get(e);return r||(r=j(this,e),t.set(e,r)),r}static getReadOnlyAttributes(){return oe(this,\"$$readOnlyAttributes\",ue)}static getIdRelationProperty(){return oe(this,\"$$idRelationProperty\",le)}static getIdColumnArray(){return this.getIdRelationProperty().cols}static getIdPropertyArray(){return this.getIdRelationProperty().props}static getIdProperty(){const e=this.getIdPropertyArray();return 1===e.length?e[0]:e}static getRelationMappings(){return oe(this,\"$$relationMappings\",ce)}static getRelations(){const e=Object.create(null);for(const t of this.getRelationNames())e[t]=this.getRelation(t);return e}static getRelationNames(){return oe(this,\"$$relationNames\",he)}static getVirtualAttributes(){return oe(this,\"$$virtualAttributes\",de)}static getDefaultGraphOptions(){return this.defaultGraphOptions||this.defaultEagerOptions}static getRelatedFindQueryMutates(){return this.relatedFindQueryMutates&&a(\"Model.relatedFindQueryMutates is deprected and will be removed in 3.0.\"),this.relatedFindQueryMutates}static getRelatedInsertQueryMutates(){return this.relatedInsertQueryMutates&&a(\"Model.relatedInsertQueryMutates is deprected and will be removed in 3.0.\"),this.relatedInsertQueryMutates}static query(e){const t=this.QueryBuilder.forClass(this).transacting(e);return this.onCreateQuery(t),t}static relatedQuery(e,t){return ne({modelClass:this,relationName:e,transaction:t,alwaysReturnArray:!0})}static fetchTableMetadata(e){return g(this,e)}static tableMetadata(e){return A(this,e)}static knex(...e){if(!e.length)return this.$$knex;O(this,\"$$knex\",e[0])}static transaction(e,t){return t||(t=e,e=null),(e||this.knex()).transaction(t)}static startTransaction(e){const{transaction:t}=r(115);return t.start(e||this.knex())}static get raw(){return L}static get ref(){return(...e)=>B(...e).model(this)}static get fn(){return U}static knexQuery(){return this.knex().table(this.getTableName())}static uniqueTag(){return this.name?`${this.getTableName()}_${this.name}`:this.getTableName()}static bindKnex(e){return o(this,e)}static bindTransaction(e){return o(this,e)}static ensureModel(e,t){const r=this;return e?e instanceof r?y(e,e,t):r.fromJson(e,t):null}static ensureModelArray(e,t){if(!e)return[];if(Array.isArray(e)){const r=new Array(e.length);for(let n=0,o=e.length;n<o;++n)r[n]=this.ensureModel(e[n],t);return r}return[this.ensureModel(e,t)]}static getRelationUnsafe(e){const t=this.getRelationMappings()[e];return t?(this.hasOwnProperty(\"$$relations\")||O(this,\"$$relations\",Object.create(null)),this.$$relations[e]||(this.$$relations[e]=new t.relation(e,this),this.$$relations[e].setMapping(t)),this.$$relations[e]):null}static getRelation(e){const t=this.getRelationUnsafe(e);if(!t)throw new Error(`A model class ${this.name} doesn't have relation ${e}`);return t}static loadRelated(e,t,r,n){return a(\"loadRelated is deprected and will be removed in 3.0. Use fetchGraph instead\"),this.fetchGraph(e,t,{transaction:n}).modifiers(r)}static fetchGraph(e,t,r={}){return this.query(r.transaction).resolve(this.ensureModelArray(e)).findOptions({dontCallFindHooks:!0}).withGraphFetched(t,r).runAfter(t=>Array.isArray(e)?t:t[0])}static traverse(...e){const{traverser:t,models:r,filterConstructor:n}=pe(...e);if(!T(r))return;const o=T(r).constructor;return c(r,o,(e,r,o,s)=>{(!n||e instanceof n)&&t(e,o,s&&s.name)}),this}static traverseAsync(...e){const{traverser:t,models:r,filterConstructor:n}=pe(...e);if(!T(r))return Promise.resolve();const o=T(r).constructor,s=[];return c(r,o,(e,r,o,i)=>{if(!n||e instanceof n){const r=t(e,o,i&&i.name);s.push(r)}}),p(s,e=>e,{concurrency:this.getConcurrency(this.knex())})}}function ne({modelClass:e,relationName:t,transaction:r,alwaysReturnArray:n}={}){const o=e.getRelation(t);return o.relatedModelClass.query(r).findOperationFactory(t=>{const r=!t.for(),s=r?J.createParentReference(t,o):J.create(t.for()),i=o.find(t,s);return i.assignResultToOwner=e.getRelatedFindQueryMutates(),i.alwaysReturnArray=n,i.alias=r?o.name:null,i}).insertOperationFactory(t=>{const r=J.create(t.for()),n=o.insert(t,r);return n.assignResultToOwner=e.getRelatedInsertQueryMutates(),n}).updateOperationFactory(e=>{const t=J.create(e.for());return o.update(e,t)}).patchOperationFactory(e=>{const t=J.create(e.for());return o.patch(e,t)}).deleteOperationFactory(e=>{const t=J.create(e.for());return o.delete(e,t)}).relateOperationFactory(e=>{const t=J.create(e.for());return o.relate(e,t)}).unrelateOperationFactory(e=>{const t=J.create(e.for());return o.unrelate(e,t)})}function oe(e,t,r){return e.hasOwnProperty(t)||O(e,t,r(e)),e[t]}function se(e){return e.createValidator()}function ie(e){return e.jsonSchema}function ae(e){return e.columnNameMappers}function le(e){const t=v(e.getIdColumn());return new Q(t.map(t=>`${e.getTableName()}.${t}`),()=>e)}function ue(e){return[...new Set(function(e){if(e===re)return[];const t=Object.getOwnPropertyNames(e.prototype);return[...ue(Object.getPrototypeOf(e)),...t.filter(t=>{const r=Object.getOwnPropertyDescriptor(e.prototype,t);return r.get&&!r.set||!1===r.writable||N(r.value)})]}(e))]}function ce(e){let t=e.relationMappings;return N(t)&&(t=t.call(e)),t||{}}function he(e){return Object.keys(e.getRelationMappings())}function de(e){return e.virtualAttributes||[]}function pe(e,t,r){if(e=e||null,void 0===r&&(r=t,t=e,e=null),!N(r))throw new Error(\"traverser must be a function\");return{traverser:r,models:t,filterConstructor:e}}Object.defineProperties(re,{isObjectionModelClass:{enumerable:!1,writable:!1,value:!0}}),Object.defineProperties(re.prototype,{$isObjectionModel:{enumerable:!1,writable:!1,value:!0},$objectionModelClass:{enumerable:!1,writable:!1,value:re}}),re.QueryBuilder=G,re.HasOneRelation=K,re.HasManyRelation=H,re.ManyToManyRelation=q,re.BelongsToOneRelation=Y,re.HasOneThroughRelation=z,re.JoinEagerAlgorithm=\"JoinEagerAlgorithm\",re.NaiveEagerAlgorithm=\"NaiveEagerAlgorithm\",re.WhereInEagerAlgorithm=\"WhereInEagerAlgorithm\",re.ValidationError=k,re.NotFoundError=V,re.ModifierNotFoundError=W,re.tableName=null,re.jsonSchema=null,re.idColumn=\"id\",re.uidProp=\"#id\",re.uidRefProp=\"#ref\",re.dbRefProp=\"#dbRef\",re.propRefRegex=/#ref{([^\\.]+)\\.([^}]+)}/g,re.jsonAttributes=null,re.cloneObjectAttributes=!0,re.virtualAttributes=null,re.relationMappings=null,re.modelPaths=[],re.pickJsonSchemaProperties=!1,re.defaultEagerAlgorithm=re.WhereInEagerAlgorithm,re.defaultEagerOptions=Object.freeze({minimize:!1,separator:\":\",aliases:{}}),re.defaultGraphOptions=null,re.defaultFindOptions=Object.freeze({}),re.modifiers=null,re.namedFilters=null,re.useLimitInFirst=!1,re.columnNameMappers=null,re.relatedFindQueryMutates=!1,re.relatedInsertQueryMutates=!1,re.concurrency=null,e.exports={Model:re}},function(e,t,r){\"use strict\";(function(t){const{isObject:n,cloneDeep:o}=r(0),{hiddenProps:s}=r(7),{defineNonEnumerableProperty:i}=r(7),{isInternalProp:a}=r(11);function l(e,t,r){let o=null;const l=e.$omitFromJson(),c=e.$omitFromDatabaseJson();return o=t||r?function(e,t,r){const o=new e.constructor,s=Object.keys(e),i=e.constructor.getRelationNames();for(let l=0,c=s.length;l<c;++l){const c=s[l],h=e[c];t&&i.includes(c)||r&&a(c)||(n(h)?o[c]=u(h):o[c]=h)}return o}(e,t,r):function(e){const t=new e.constructor,r=Object.keys(e);for(let o=0,s=r.length;o<s;++o){const s=r[o],i=e[s];n(i)?t[s]=u(i):t[s]=i}return t}(e),l&&o.$omitFromJson(l),c&&o.$omitFromDatabaseJson(c),o=function(e,t){for(let r=0,n=s.length;r<n;++r){const n=s[r];e.hasOwnProperty(n)&&i(t,n,e[n])}return t}(e,o)}function u(e){return Array.isArray(e)?function(e){const t=new Array(e.length);for(let r=0,o=t.length;r<o;++r){const o=e[r];n(o)?t[r]=u(o):t[r]=o}return t}(e):e.$isObjectionModel?l(e,!1,!1):t.isBuffer(e)?new t(e):o(e)}e.exports={clone:l}}).call(this,r(43).Buffer)},function(e,t){var r;r=function(){return this}();try{r=r||new Function(\"return this\")()}catch(e){\"object\"==typeof window&&(r=window)}e.exports=r},function(e,t,r){\"use strict\";const n=new Map;e.exports={inheritModel:function(e){let t=n.get(e.name);var r;return t||(r=e.name,t=new Function(\"BaseClass\",`\\n    'use strict';\\n    return class ${r} extends BaseClass {}\\n  `),n.set(e.name,t)),t(e)}}},function(e,t){var r,n,o=e.exports={};function s(){throw new Error(\"setTimeout has not been defined\")}function i(){throw new Error(\"clearTimeout has not been defined\")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r=\"function\"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n=\"function\"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function _(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||c||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title=\"browser\",o.browser=!0,o.env={},o.argv=[],o.version=\"\",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(e){return[]},o.binding=function(e){throw new Error(\"process.binding is not supported\")},o.cwd=function(){return\"/\"},o.chdir=function(e){throw new Error(\"process.chdir is not supported\")},o.umask=function(){return 0}},function(e,t,r){\"use strict\";const{isObject:n,isFunction:o}=r(0),{defineNonEnumerableProperty:s}=r(7),{isKnexRaw:i,isKnexQueryBuilder:a}=r(3),l=\"$$queryProps\";function u(e){return!!n(e)&&(a(e)||i(e)||h(e)||e.isObjectionQueryBuilderBase)}function c(e,t){return e?e.isObjectionQueryBuilderBase?function(e,t){return e.subqueryOf(t).toKnexQuery()}(e,t):h(e)?function(e,t){if(!t)throw new Error(\"toDatabaseJson called without a query builder instance for a model with query properties\");return e.toKnexRaw(t)}(e,t):e:e}function h(e){return o(e.toKnexRaw)}e.exports={splitQueryProps:function(e,t){const r=Object.keys(t);if(function(e,t){for(let r=0,n=t.length;r<n;++r)if(u(e[t[r]]))return!0;return!1}(t,r)){const n={},o={};for(let e=0,s=r.length;e<s;++e){const s=r[e],i=t[s];u(i)?n[s]=i:o[s]=i}return s(e,l,n),o}return t},mergeQueryProps:function(e,t,r,n){return t=function(e,t,r,n){const o=e[l];if(!o)return t;const s=e.constructor,i=Object.keys(o);for(let e=0,a=i.length;e<a;++e){const a=i[e];if(!r||!r.includes(a)){const e=c(o[a],n);t[s.propertyNameToColumnName(a)]=e}}return t}(e,t=function(e,t){const r=Object.keys(e);for(let n=0,o=r.length;n<o;++n){const o=r[n],s=e[o];u(s)&&(e[o]=c(s,t))}return e}(t,n),r,n)}}},function(e,t,r){\"use strict\";(function(t){const{isObject:n}=r(0),o=\"k_\";function s(e){return null===e?\"null\":void 0===e?\"undefined\":t.isBuffer(e)?e.toString(\"hex\"):n(e)?JSON.stringify(e):`${e}`}e.exports={PROP_KEY_PREFIX:o,propToStr:s,values:function(e,t){switch(t.length){case 1:return function(e,t){return[e[t[0]]]}(e,t);case 2:return function(e,t){return[e[t[0]],e[t[1]]]}(e,t);case 3:return function(e,t){return[e[t[0]],e[t[1]],e[t[2]]]}(e,t);default:return function(e,t){const r=new Array(t.length);for(let n=0,o=t.length;n<o;++n)r[n]=e[t[n]];return r}(e,t)}},hasProps:function(e,t){for(let r=0;r<t.length;++r){const n=e[t[r]];if(null==n)return!1}return!0},propKey:function(e,t){switch(t.length){case 1:return function(e,t){return o+s(e[t[0]])}(e,t);case 2:return function(e,t){return o+s(e[t[0]])+\",\"+s(e[t[1]])}(e,t);case 3:return function(e,t){return o+s(e[t[0]])+\",\"+s(e[t[1]])+\",\"+s(e[t[2]])}(e,t);default:return function(e,t){let r=o;for(let n=0,o=t.length;n<o;++n)r+=s(e[t[n]]),n<o-1&&(r+=\",\");return r}(e,t)}}}}).call(this,r(43).Buffer)},function(e,t,r){\"use strict\";const{isObject:n}=r(0);function o(e,t,r={}){r.cache||(r=Object.assign({},r,{cache:new Map})),r.cache.set(t,e);for(const n of e.constructor.getRelationNames()){const o=t[n];if(void 0!==o){const t=e.constructor.getRelation(n),i=s(o,t,r);i!==o&&(e[t.name]=i)}}return e}function s(e,t,r){return Array.isArray(e)?function(e,t,r){const n=new Array(e.length);let o=!1;for(let s=0,a=e.length;s<a;++s){const a=i(e[s],t,r);a!==e[s]&&(o=!0),n[s]=a}return o?n:e}(e,t,r):e?i(e,t,r):null}function i(e,t,r){if(n(e)){const n=t.relatedModelClass;let s=r.cache.get(e);return void 0===s&&(s=e instanceof n?o(e,e,r):n.fromJson(e,r)),s}return e}e.exports={parseRelationsIntoModelInstances:o}},function(e,t,r){\"use strict\";const{RawBuilder:n,normalizeRawArgs:o}=r(29),{asSingle:s,isNumber:i}=r(0);class a extends n{}function l(...e){const{sql:t,args:r}=o(e);return new a(`${t}(${r.map(()=>\"?\").join(\", \")})`,r)}for(const e of[\"coalesce\",\"concat\",\"sum\",\"avg\",\"min\",\"max\",\"count\",\"upper\",\"lower\"])l[e]=((...t)=>l(e.toUpperCase(),t));l.now=(e=>(e=parseInt(s(e),10),!isNaN(e)&&i(e)||(e=6),new a(`CURRENT_TIMESTAMP(${e})`,[]))),e.exports={FunctionBuilder:a,fn:l}},function(e,t,r){\"use strict\";const{Validator:n}=r(79),{ValidationErrorType:o}=r(5),{isObject:s,once:i,cloneDeep:a,omit:l}=r(0),u=i(()=>{try{return r(162)}catch(e){throw new Error(\"Optional ajv dependency not installed. Please run `npm install ajv --save`\")}});function c(e){return s(e)&&e.$isObjectionModel?e.$clone():a(e)}function h(e){return Array.isArray(e)?function(e){for(let t=0,r=e.length;t<r;++t){const r=e[t];if(s(r)&&h(r))return!0}return!1}(e):function(e){const t=Object.keys(e);for(let r=0,n=t.length;r<n;++r){const n=t[r];if(\"default\"===n)return!0;{const t=e[n];if(s(t)&&h(t))return!0}}return!1}(e)}function d(e){const t=[\"anyOf\",\"oneOf\",\"allOf\",\"not\",\"then\",\"else\"];return Object.assign(l(e,[\"required\",...t]),...t.map(t=>(function(e,t){if(e[t]){if(Array.isArray(e[t])){const r=e[t].map(d).filter(p);return 0!==r.length?{[t]:r}:{}}return{[t]:d(e[t])}}return{}})(e,t)),e&&e.definitions?{definitions:Object.assign(...Object.keys(e.definitions).map(t=>({[t]:d(e.definitions[t])})))}:{})}function p(e){return 0!==Object.keys(e).length}e.exports={AjvValidator:class extends n{static init(e,t){super.init(e,t),e.ajvOptions=Object.assign({errorDataPath:\"property\"},t.options,{allErrors:!0}),e.ajv=(new u)(Object.assign({useDefaults:!0},e.ajvOptions)),e.ajvNoDefaults=(new u)(Object.assign({},e.ajvOptions,{useDefaults:!1})),e.cache=new Map,t.onCreateAjv(e.ajv),t.onCreateAjv(e.ajvNoDefaults)}beforeValidate({json:e,model:t,options:r,ctx:n}){if(n.jsonSchema=t.constructor.getJsonSchema(),t.$beforeValidate!==t.$objectionModelClass.prototype.$beforeValidate){n.jsonSchema=c(n.jsonSchema);const o=t.$beforeValidate(n.jsonSchema,e,r);void 0!==o&&(n.jsonSchema=o)}}validate({json:e,model:t,options:r,ctx:n}){if(!n.jsonSchema)return e;const s=t.constructor,i=this.getValidator(s,n.jsonSchema,!!r.patch);var a;!r.mutable&&!r.patch&&(a=n.jsonSchema)&&a.properties&&h(a.properties)&&(e=c(e)),i.call(t,e);const l=function(e,t,r){if(!e)return null;let n=t.getRelationNames(),s={},i=0;for(const t of e){const e=`${r.dataPath||\"\"}${t.dataPath}`;if(t.params&&t.params.additionalProperty&&n.includes(t.params.additionalProperty))continue;const o=e.replace(/\\['([^' ]*)'\\]/g,\".$1\").substring(1),a=s[o]||(s[o]=[]);a.unshift({message:t.message,keyword:t.keyword,params:t.params}),++i}return 0===i?null:t.createValidationError({type:o.ModelValidation,data:s})}(i.errors,s,r);if(l)throw l;return e}getValidator(e,t,r){const n=this.ajvOptions.serialize||JSON.stringify,o=t===e.getJsonSchema()?e.uniqueTag():n(t);let s=this.cache.get(o),i=null;return s||(s={patchValidator:null,normalValidator:null},this.cache.set(o,s)),r?(i=s.patchValidator)||(i=this.compilePatchValidator(t),s.patchValidator=i):(i=s.normalValidator)||(i=this.compileNormalValidator(t),s.normalValidator=i),i}compilePatchValidator(e){return e=d(e),this.ajvNoDefaults.compile(e)}compileNormalValidator(e){return this.ajv.compile(e)}}}},function(e,t,r){\"use strict\";e.exports={Validator:class{constructor(...e){this.constructor.init(this,...e)}static init(){}beforeValidate({model:e,json:t,options:r}){e.$beforeValidate(null,t,r)}validate(){throw new Error(\"not implemented\")}afterValidate({model:e,json:t,options:r}){e.$afterValidate(t,r)}}}},function(e,t,r){\"use strict\";var n=r(15);e.exports=function(e){n.copy(e,this)}},function(e,t,r){\"use strict\";e.exports=function(e,t){t||(t={}),\"function\"==typeof t&&(t={cmp:t});var r,n=\"boolean\"==typeof t.cycles&&t.cycles,o=t.cmp&&(r=t.cmp,function(e){return function(t,n){var o={key:t,value:e[t]},s={key:n,value:e[n]};return r(o,s)}}),s=[];return function e(t){if(t&&t.toJSON&&\"function\"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if(\"number\"==typeof t)return isFinite(t)?\"\"+t:\"null\";if(\"object\"!=typeof t)return JSON.stringify(t);var r,i;if(Array.isArray(t)){for(i=\"[\",r=0;r<t.length;r++)r&&(i+=\",\"),i+=e(t[r])||\"null\";return i+\"]\"}if(null===t)return\"null\";if(-1!==s.indexOf(t)){if(n)return JSON.stringify(\"__cycle__\");throw new TypeError(\"Converting circular structure to JSON\")}var a=s.push(t)-1,l=Object.keys(t).sort(o&&o(t));for(i=\"\",r=0;r<l.length;r++){var u=l[r],c=e(t[u]);c&&(i&&(i+=\",\"),i+=JSON.stringify(u)+\":\"+c)}return s.splice(a,1),\"{\"+i+\"}\"}}(e)}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\"\",o=!0===e.schema.$async,s=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,\"$ref\"),i=e.self._getId(e.schema);if(e.opts.strictKeywords){var a=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(a){var l=\"unknown keyword: \"+a;if(\"log\"!==e.opts.strictKeywords)throw new Error(l);e.logger.warn(l)}}if(e.isTop&&(n+=\" var validate = \",o&&(e.async=!0,n+=\"async \"),n+=\"function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; \",i&&(e.opts.sourceCode||e.opts.processCode)&&(n+=\" /*# sourceURL=\"+i+\" */ \")),\"boolean\"==typeof e.schema||!s&&!e.schema.$ref){var u=e.level,c=e.dataLevel,h=e.schema[\"false schema\"],d=e.schemaPath+e.util.getProperty(\"false schema\"),p=e.errSchemaPath+\"/false schema\",f=!e.opts.allErrors,_=\"data\"+(c||\"\"),E=\"valid\"+u;if(!1===e.schema){e.isTop?f=!0:n+=\" var \"+E+\" = false; \",(Y=Y||[]).push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'false schema' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(p)+\" , params: {} \",!1!==e.opts.messages&&(n+=\" , message: 'boolean schema is false' \"),e.opts.verbose&&(n+=\" , schema: false , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+_+\" \"),n+=\" } \"):n+=\" {} \";var m=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=\" throw new ValidationError([\"+m+\"]); \":n+=\" validate.errors = [\"+m+\"]; return false; \":n+=\" var err = \"+m+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \"}else e.isTop?n+=o?\" return data; \":\" validate.errors = null; return true; \":n+=\" var \"+E+\" = true; \";return e.isTop&&(n+=\" }; return validate; \"),n}if(e.isTop){var R=e.isTop;u=e.level=0,c=e.dataLevel=0,_=\"data\";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[\"\"],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var O=\"default is ignored in the schema root\";if(\"log\"!==e.opts.strictDefaults)throw new Error(O);e.logger.warn(O)}n+=\" var vErrors = null; \",n+=\" var errors = 0;     \",n+=\" if (rootData === undefined) rootData = data; \"}else{u=e.level,_=\"data\"+((c=e.dataLevel)||\"\");if(i&&(e.baseId=e.resolve.url(e.baseId,i)),o&&!e.async)throw new Error(\"async schema in sync schema\");n+=\" var errs_\"+u+\" = errors;\"}E=\"valid\"+u,f=!e.opts.allErrors;var y=\"\",g=\"\",A=e.schema.type,v=Array.isArray(A);if(A&&e.opts.nullable&&!0===e.schema.nullable&&(v?-1==A.indexOf(\"null\")&&(A=A.concat(\"null\")):\"null\"!=A&&(A=[A,\"null\"],v=!0)),v&&1==A.length&&(A=A[0],v=!1),e.schema.$ref&&s){if(\"fail\"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path \"'+e.errSchemaPath+'\" (see option extendRefs)');!0!==e.opts.extendRefs&&(s=!1,e.logger.warn('$ref: keywords ignored in schema at path \"'+e.errSchemaPath+'\"'))}if(e.schema.$comment&&e.opts.$comment&&(n+=\" \"+e.RULES.all.$comment.code(e,\"$comment\")),A){if(e.opts.coerceTypes)var N=e.util.coerceToTypes(e.opts.coerceTypes,A);var b=e.RULES.types[A];if(N||v||!0===b||b&&!z(b)){d=e.schemaPath+\".type\",p=e.errSchemaPath+\"/type\",d=e.schemaPath+\".type\",p=e.errSchemaPath+\"/type\";var T=v?\"checkDataTypes\":\"checkDataType\";if(n+=\" if (\"+e.util[T](A,_,e.opts.strictNumbers,!0)+\") { \",N){var w=\"dataType\"+u,P=\"coerced\"+u;n+=\" var \"+w+\" = typeof \"+_+\"; var \"+P+\" = undefined; \",\"array\"==e.opts.coerceTypes&&(n+=\" if (\"+w+\" == 'object' && Array.isArray(\"+_+\") && \"+_+\".length == 1) { \"+_+\" = \"+_+\"[0]; \"+w+\" = typeof \"+_+\"; if (\"+e.util.checkDataType(e.schema.type,_,e.opts.strictNumbers)+\") \"+P+\" = \"+_+\"; } \"),n+=\" if (\"+P+\" !== undefined) ; \";var I=N;if(I)for(var S,C=-1,x=I.length-1;C<x;)\"string\"==(S=I[C+=1])?n+=\" else if (\"+w+\" == 'number' || \"+w+\" == 'boolean') \"+P+\" = '' + \"+_+\"; else if (\"+_+\" === null) \"+P+\" = ''; \":\"number\"==S||\"integer\"==S?(n+=\" else if (\"+w+\" == 'boolean' || \"+_+\" === null || (\"+w+\" == 'string' && \"+_+\" && \"+_+\" == +\"+_+\" \",\"integer\"==S&&(n+=\" && !(\"+_+\" % 1)\"),n+=\")) \"+P+\" = +\"+_+\"; \"):\"boolean\"==S?n+=\" else if (\"+_+\" === 'false' || \"+_+\" === 0 || \"+_+\" === null) \"+P+\" = false; else if (\"+_+\" === 'true' || \"+_+\" === 1) \"+P+\" = true; \":\"null\"==S?n+=\" else if (\"+_+\" === '' || \"+_+\" === 0 || \"+_+\" === false) \"+P+\" = null; \":\"array\"==e.opts.coerceTypes&&\"array\"==S&&(n+=\" else if (\"+w+\" == 'string' || \"+w+\" == 'number' || \"+w+\" == 'boolean' || \"+_+\" == null) \"+P+\" = [\"+_+\"]; \");n+=\" else {   \",(Y=Y||[]).push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'type' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(p)+\" , params: { type: '\",n+=v?\"\"+A.join(\",\"):\"\"+A,n+=\"' } \",!1!==e.opts.messages&&(n+=\" , message: 'should be \",n+=v?\"\"+A.join(\",\"):\"\"+A,n+=\"' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+d+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+_+\" \"),n+=\" } \"):n+=\" {} \";m=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=\" throw new ValidationError([\"+m+\"]); \":n+=\" validate.errors = [\"+m+\"]; return false; \":n+=\" var err = \"+m+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" } if (\"+P+\" !== undefined) {  \";var F=c?\"data\"+(c-1||\"\"):\"parentData\";n+=\" \"+_+\" = \"+P+\"; \",c||(n+=\"if (\"+F+\" !== undefined)\"),n+=\" \"+F+\"[\"+(c?e.dataPathArr[c]:\"parentDataProperty\")+\"] = \"+P+\"; } \"}else{(Y=Y||[]).push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'type' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(p)+\" , params: { type: '\",n+=v?\"\"+A.join(\",\"):\"\"+A,n+=\"' } \",!1!==e.opts.messages&&(n+=\" , message: 'should be \",n+=v?\"\"+A.join(\",\"):\"\"+A,n+=\"' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+d+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+_+\" \"),n+=\" } \"):n+=\" {} \";m=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=\" throw new ValidationError([\"+m+\"]); \":n+=\" validate.errors = [\"+m+\"]; return false; \":n+=\" var err = \"+m+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \"}n+=\" } \"}}if(e.schema.$ref&&!s)n+=\" \"+e.RULES.all.$ref.code(e,\"$ref\")+\" \",f&&(n+=\" } if (errors === \",n+=R?\"0\":\"errs_\"+u,n+=\") { \",g+=\"}\");else{var D=e.RULES;if(D)for(var M=-1,j=D.length-1;M<j;)if(z(b=D[M+=1])){if(b.type&&(n+=\" if (\"+e.util.checkDataType(b.type,_,e.opts.strictNumbers)+\") { \"),e.opts.useDefaults)if(\"object\"==b.type&&e.schema.properties){h=e.schema.properties;var L=Object.keys(h);if(L)for(var B,U=-1,$=L.length-1;U<$;){if(void 0!==(k=h[B=L[U+=1]]).default){var G=_+e.util.getProperty(B);if(e.compositeRule){if(e.opts.strictDefaults){O=\"default is ignored for: \"+G;if(\"log\"!==e.opts.strictDefaults)throw new Error(O);e.logger.warn(O)}}else n+=\" if (\"+G+\" === undefined \",\"empty\"==e.opts.useDefaults&&(n+=\" || \"+G+\" === null || \"+G+\" === '' \"),n+=\" ) \"+G+\" = \",\"shared\"==e.opts.useDefaults?n+=\" \"+e.useDefault(k.default)+\" \":n+=\" \"+JSON.stringify(k.default)+\" \",n+=\"; \"}}}else if(\"array\"==b.type&&Array.isArray(e.schema.items)){var V=e.schema.items;if(V){C=-1;for(var k,W=V.length-1;C<W;)if(void 0!==(k=V[C+=1]).default){G=_+\"[\"+C+\"]\";if(e.compositeRule){if(e.opts.strictDefaults){O=\"default is ignored for: \"+G;if(\"log\"!==e.opts.strictDefaults)throw new Error(O);e.logger.warn(O)}}else n+=\" if (\"+G+\" === undefined \",\"empty\"==e.opts.useDefaults&&(n+=\" || \"+G+\" === null || \"+G+\" === '' \"),n+=\" ) \"+G+\" = \",\"shared\"==e.opts.useDefaults?n+=\" \"+e.useDefault(k.default)+\" \":n+=\" \"+JSON.stringify(k.default)+\" \",n+=\"; \"}}}var Q=b.rules;if(Q)for(var J,K=-1,H=Q.length-1;K<H;)if(X(J=Q[K+=1])){var q=J.code(e,J.keyword,b.type);q&&(n+=\" \"+q+\" \",f&&(y+=\"}\"))}if(f&&(n+=\" \"+y+\" \",y=\"\"),b.type&&(n+=\" } \",A&&A===b.type&&!N)){n+=\" else { \";var Y;d=e.schemaPath+\".type\",p=e.errSchemaPath+\"/type\";(Y=Y||[]).push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'type' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(p)+\" , params: { type: '\",n+=v?\"\"+A.join(\",\"):\"\"+A,n+=\"' } \",!1!==e.opts.messages&&(n+=\" , message: 'should be \",n+=v?\"\"+A.join(\",\"):\"\"+A,n+=\"' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+d+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+_+\" \"),n+=\" } \"):n+=\" {} \";m=n;n=Y.pop(),!e.compositeRule&&f?e.async?n+=\" throw new ValidationError([\"+m+\"]); \":n+=\" validate.errors = [\"+m+\"]; return false; \":n+=\" var err = \"+m+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" } \"}f&&(n+=\" if (errors === \",n+=R?\"0\":\"errs_\"+u,n+=\") { \",g+=\"}\")}}function z(e){for(var t=e.rules,r=0;r<t.length;r++)if(X(t[r]))return!0}function X(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var r=t.implements,n=0;n<r.length;n++)if(void 0!==e.schema[r[n]])return!0}(t)}return f&&(n+=\" \"+g+\" \"),R?(o?(n+=\" if (errors === 0) return data;           \",n+=\" else throw new ValidationError(vErrors); \"):(n+=\" validate.errors = vErrors; \",n+=\" return errors === 0;       \"),n+=\" }; return validate;\"):n+=\" var \"+E+\" = errors === errs_\"+u+\";\",n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o=\" \",s=e.level,i=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+\"/\"+t,c=!e.opts.allErrors,h=\"data\"+(i||\"\"),d=e.opts.$data&&a&&a.$data;d?(o+=\" var schema\"+s+\" = \"+e.util.getData(a.$data,i,e.dataPathArr)+\"; \",n=\"schema\"+s):n=a;var p=\"maximum\"==t,f=p?\"exclusiveMaximum\":\"exclusiveMinimum\",_=e.schema[f],E=e.opts.$data&&_&&_.$data,m=p?\"<\":\">\",R=p?\">\":\"<\",O=void 0;if(!d&&\"number\"!=typeof a&&void 0!==a)throw new Error(t+\" must be number\");if(!E&&void 0!==_&&\"number\"!=typeof _&&\"boolean\"!=typeof _)throw new Error(f+\" must be number or boolean\");if(E){var y=e.util.getData(_.$data,i,e.dataPathArr),g=\"exclusive\"+s,A=\"exclType\"+s,v=\"exclIsNumber\"+s,N=\"' + \"+(w=\"op\"+s)+\" + '\";o+=\" var schemaExcl\"+s+\" = \"+y+\"; \",o+=\" var \"+g+\"; var \"+A+\" = typeof \"+(y=\"schemaExcl\"+s)+\"; if (\"+A+\" != 'boolean' && \"+A+\" != 'undefined' && \"+A+\" != 'number') { \";var b;O=f;(b=b||[]).push(o),o=\"\",!1!==e.createErrors?(o+=\" { keyword: '\"+(O||\"_exclusiveLimit\")+\"' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(u)+\" , params: {} \",!1!==e.opts.messages&&(o+=\" , message: '\"+f+\" should be boolean' \"),e.opts.verbose&&(o+=\" , schema: validate.schema\"+l+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+h+\" \"),o+=\" } \"):o+=\" {} \";var T=o;o=b.pop(),!e.compositeRule&&c?e.async?o+=\" throw new ValidationError([\"+T+\"]); \":o+=\" validate.errors = [\"+T+\"]; return false; \":o+=\" var err = \"+T+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",o+=\" } else if ( \",d&&(o+=\" (\"+n+\" !== undefined && typeof \"+n+\" != 'number') || \"),o+=\" \"+A+\" == 'number' ? ( (\"+g+\" = \"+n+\" === undefined || \"+y+\" \"+m+\"= \"+n+\") ? \"+h+\" \"+R+\"= \"+y+\" : \"+h+\" \"+R+\" \"+n+\" ) : ( (\"+g+\" = \"+y+\" === true) ? \"+h+\" \"+R+\"= \"+n+\" : \"+h+\" \"+R+\" \"+n+\" ) || \"+h+\" !== \"+h+\") { var op\"+s+\" = \"+g+\" ? '\"+m+\"' : '\"+m+\"='; \",void 0===a&&(O=f,u=e.errSchemaPath+\"/\"+f,n=y,d=E)}else{N=m;if((v=\"number\"==typeof _)&&d){var w=\"'\"+N+\"'\";o+=\" if ( \",d&&(o+=\" (\"+n+\" !== undefined && typeof \"+n+\" != 'number') || \"),o+=\" ( \"+n+\" === undefined || \"+_+\" \"+m+\"= \"+n+\" ? \"+h+\" \"+R+\"= \"+_+\" : \"+h+\" \"+R+\" \"+n+\" ) || \"+h+\" !== \"+h+\") { \"}else{v&&void 0===a?(g=!0,O=f,u=e.errSchemaPath+\"/\"+f,n=_,R+=\"=\"):(v&&(n=Math[p?\"min\":\"max\"](_,a)),_===(!v||n)?(g=!0,O=f,u=e.errSchemaPath+\"/\"+f,R+=\"=\"):(g=!1,N+=\"=\"));w=\"'\"+N+\"'\";o+=\" if ( \",d&&(o+=\" (\"+n+\" !== undefined && typeof \"+n+\" != 'number') || \"),o+=\" \"+h+\" \"+R+\" \"+n+\" || \"+h+\" !== \"+h+\") { \"}}O=O||t,(b=b||[]).push(o),o=\"\",!1!==e.createErrors?(o+=\" { keyword: '\"+(O||\"_limit\")+\"' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(u)+\" , params: { comparison: \"+w+\", limit: \"+n+\", exclusive: \"+g+\" } \",!1!==e.opts.messages&&(o+=\" , message: 'should be \"+N+\" \",o+=d?\"' + \"+n:n+\"'\"),e.opts.verbose&&(o+=\" , schema:  \",o+=d?\"validate.schema\"+l:\"\"+a,o+=\"         , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+h+\" \"),o+=\" } \"):o+=\" {} \";T=o;return o=b.pop(),!e.compositeRule&&c?e.async?o+=\" throw new ValidationError([\"+T+\"]); \":o+=\" validate.errors = [\"+T+\"]; return false; \":o+=\" var err = \"+T+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",o+=\" } \",c&&(o+=\" else { \"),o}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o=\" \",s=e.level,i=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+\"/\"+t,c=!e.opts.allErrors,h=\"data\"+(i||\"\"),d=e.opts.$data&&a&&a.$data;if(d?(o+=\" var schema\"+s+\" = \"+e.util.getData(a.$data,i,e.dataPathArr)+\"; \",n=\"schema\"+s):n=a,!d&&\"number\"!=typeof a)throw new Error(t+\" must be number\");o+=\"if ( \",d&&(o+=\" (\"+n+\" !== undefined && typeof \"+n+\" != 'number') || \"),o+=\" \"+h+\".length \"+(\"maxItems\"==t?\">\":\"<\")+\" \"+n+\") { \";var p=t,f=f||[];f.push(o),o=\"\",!1!==e.createErrors?(o+=\" { keyword: '\"+(p||\"_limitItems\")+\"' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(u)+\" , params: { limit: \"+n+\" } \",!1!==e.opts.messages&&(o+=\" , message: 'should NOT have \",o+=\"maxItems\"==t?\"more\":\"fewer\",o+=\" than \",o+=d?\"' + \"+n+\" + '\":\"\"+a,o+=\" items' \"),e.opts.verbose&&(o+=\" , schema:  \",o+=d?\"validate.schema\"+l:\"\"+a,o+=\"         , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+h+\" \"),o+=\" } \"):o+=\" {} \";var _=o;return o=f.pop(),!e.compositeRule&&c?e.async?o+=\" throw new ValidationError([\"+_+\"]); \":o+=\" validate.errors = [\"+_+\"]; return false; \":o+=\" var err = \"+_+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",o+=\"} \",c&&(o+=\" else { \"),o}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o=\" \",s=e.level,i=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+\"/\"+t,c=!e.opts.allErrors,h=\"data\"+(i||\"\"),d=e.opts.$data&&a&&a.$data;if(d?(o+=\" var schema\"+s+\" = \"+e.util.getData(a.$data,i,e.dataPathArr)+\"; \",n=\"schema\"+s):n=a,!d&&\"number\"!=typeof a)throw new Error(t+\" must be number\");var p=\"maxLength\"==t?\">\":\"<\";o+=\"if ( \",d&&(o+=\" (\"+n+\" !== undefined && typeof \"+n+\" != 'number') || \"),!1===e.opts.unicode?o+=\" \"+h+\".length \":o+=\" ucs2length(\"+h+\") \",o+=\" \"+p+\" \"+n+\") { \";var f=t,_=_||[];_.push(o),o=\"\",!1!==e.createErrors?(o+=\" { keyword: '\"+(f||\"_limitLength\")+\"' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(u)+\" , params: { limit: \"+n+\" } \",!1!==e.opts.messages&&(o+=\" , message: 'should NOT be \",o+=\"maxLength\"==t?\"longer\":\"shorter\",o+=\" than \",o+=d?\"' + \"+n+\" + '\":\"\"+a,o+=\" characters' \"),e.opts.verbose&&(o+=\" , schema:  \",o+=d?\"validate.schema\"+l:\"\"+a,o+=\"         , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+h+\" \"),o+=\" } \"):o+=\" {} \";var E=o;return o=_.pop(),!e.compositeRule&&c?e.async?o+=\" throw new ValidationError([\"+E+\"]); \":o+=\" validate.errors = [\"+E+\"]; return false; \":o+=\" var err = \"+E+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",o+=\"} \",c&&(o+=\" else { \"),o}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o=\" \",s=e.level,i=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+\"/\"+t,c=!e.opts.allErrors,h=\"data\"+(i||\"\"),d=e.opts.$data&&a&&a.$data;if(d?(o+=\" var schema\"+s+\" = \"+e.util.getData(a.$data,i,e.dataPathArr)+\"; \",n=\"schema\"+s):n=a,!d&&\"number\"!=typeof a)throw new Error(t+\" must be number\");o+=\"if ( \",d&&(o+=\" (\"+n+\" !== undefined && typeof \"+n+\" != 'number') || \"),o+=\" Object.keys(\"+h+\").length \"+(\"maxProperties\"==t?\">\":\"<\")+\" \"+n+\") { \";var p=t,f=f||[];f.push(o),o=\"\",!1!==e.createErrors?(o+=\" { keyword: '\"+(p||\"_limitProperties\")+\"' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(u)+\" , params: { limit: \"+n+\" } \",!1!==e.opts.messages&&(o+=\" , message: 'should NOT have \",o+=\"maxProperties\"==t?\"more\":\"fewer\",o+=\" than \",o+=d?\"' + \"+n+\" + '\":\"\"+a,o+=\" properties' \"),e.opts.verbose&&(o+=\" , schema:  \",o+=d?\"validate.schema\"+l:\"\"+a,o+=\"         , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+h+\" \"),o+=\" } \"):o+=\" {} \";var _=o;return o=f.pop(),!e.compositeRule&&c?e.async?o+=\" throw new ValidationError([\"+_+\"]); \":o+=\" validate.errors = [\"+_+\"]; return false; \":o+=\" var err = \"+_+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",o+=\"} \",c&&(o+=\" else { \"),o}},function(e){e.exports={$schema:\"http://json-schema.org/draft-07/schema#\",$id:\"http://json-schema.org/draft-07/schema#\",title:\"Core schema meta-schema\",definitions:{schemaArray:{type:\"array\",minItems:1,items:{$ref:\"#\"}},nonNegativeInteger:{type:\"integer\",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:\"#/definitions/nonNegativeInteger\"},{default:0}]},simpleTypes:{enum:[\"array\",\"boolean\",\"integer\",\"null\",\"number\",\"object\",\"string\"]},stringArray:{type:\"array\",items:{type:\"string\"},uniqueItems:!0,default:[]}},type:[\"object\",\"boolean\"],properties:{$id:{type:\"string\",format:\"uri-reference\"},$schema:{type:\"string\",format:\"uri\"},$ref:{type:\"string\",format:\"uri-reference\"},$comment:{type:\"string\"},title:{type:\"string\"},description:{type:\"string\"},default:!0,readOnly:{type:\"boolean\",default:!1},examples:{type:\"array\",items:!0},multipleOf:{type:\"number\",exclusiveMinimum:0},maximum:{type:\"number\"},exclusiveMaximum:{type:\"number\"},minimum:{type:\"number\"},exclusiveMinimum:{type:\"number\"},maxLength:{$ref:\"#/definitions/nonNegativeInteger\"},minLength:{$ref:\"#/definitions/nonNegativeIntegerDefault0\"},pattern:{type:\"string\",format:\"regex\"},additionalItems:{$ref:\"#\"},items:{anyOf:[{$ref:\"#\"},{$ref:\"#/definitions/schemaArray\"}],default:!0},maxItems:{$ref:\"#/definitions/nonNegativeInteger\"},minItems:{$ref:\"#/definitions/nonNegativeIntegerDefault0\"},uniqueItems:{type:\"boolean\",default:!1},contains:{$ref:\"#\"},maxProperties:{$ref:\"#/definitions/nonNegativeInteger\"},minProperties:{$ref:\"#/definitions/nonNegativeIntegerDefault0\"},required:{$ref:\"#/definitions/stringArray\"},additionalProperties:{$ref:\"#\"},definitions:{type:\"object\",additionalProperties:{$ref:\"#\"},default:{}},properties:{type:\"object\",additionalProperties:{$ref:\"#\"},default:{}},patternProperties:{type:\"object\",additionalProperties:{$ref:\"#\"},propertyNames:{format:\"regex\"},default:{}},dependencies:{type:\"object\",additionalProperties:{anyOf:[{$ref:\"#\"},{$ref:\"#/definitions/stringArray\"}]}},propertyNames:{$ref:\"#\"},const:!0,enum:{type:\"array\",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:\"#/definitions/simpleTypes\"},{type:\"array\",items:{$ref:\"#/definitions/simpleTypes\"},minItems:1,uniqueItems:!0}]},format:{type:\"string\"},contentMediaType:{type:\"string\"},contentEncoding:{type:\"string\"},if:{$ref:\"#\"},then:{$ref:\"#\"},else:{$ref:\"#\"},allOf:{$ref:\"#/definitions/schemaArray\"},anyOf:{$ref:\"#/definitions/schemaArray\"},oneOf:{$ref:\"#/definitions/schemaArray\"},not:{$ref:\"#\"}},default:!0}},function(e,t,r){\"use strict\";const{wrapError:n}=r(68),{raw:o}=r(29),{deprecate:s}=r(12),{createModifier:i}=r(16),{ValidationErrorType:a}=r(5),{isObject:l,isString:u,isFunction:c,last:h,flatten:d}=r(0),{RelationExpression:p,DuplicateRelationError:f}=r(9),{assertIdNotUndefined:_}=r(13),{Selection:E}=r(53),{QueryBuilderContext:m}=r(197),{QueryBuilderBase:R}=r(91),{FindOperation:O}=r(56),{DeleteOperation:y}=r(35),{UpdateOperation:g}=r(22),{InsertOperation:A}=r(23),{RelateOperation:v}=r(36),{UnrelateOperation:N}=r(37),{JoinEagerOperation:b}=r(212),{NaiveEagerOperation:T}=r(217),{WhereInEagerOperation:w}=r(97),{InsertGraphAndFetchOperation:P}=r(218),{UpsertGraphAndFetchOperation:I}=r(231),{InsertAndFetchOperation:S}=r(232),{UpdateAndFetchOperation:C}=r(233),{JoinRelatedOperation:x}=r(234),{OnBuildKnexOperation:F}=r(235),{InsertGraphOperation:D}=r(99),{UpsertGraphOperation:M}=r(104),{RunBeforeOperation:j}=r(236),{RunAfterOperation:L}=r(237),{FindByIdOperation:B}=r(238),{FindByIdsOperation:U}=r(239),{OnBuildOperation:$}=r(240),{OnErrorOperation:G}=r(241),{SelectOperation:V}=r(94),{EagerOperation:k}=r(57),{RangeOperation:W}=r(242),{FirstOperation:Q}=r(243),{FromOperation:J}=r(244),{KnexOperation:K}=r(54);class H extends R{static init(e,t){super.init(e,t),e._resultModelClass=null,e._explicitRejectValue=null,e._explicitResolveValue=null,e._modifiers={},e._allowedGraphExpression=null,e._findOperationOptions=t.defaultFindOptions,e._relatedQueryFor=null,e._findOperationFactory=pe,e._insertOperationFactory=fe,e._updateOperationFactory=_e,e._patchOperationFactory=Ee,e._relateOperationFactory=me,e._unrelateOperationFactory=Re,e._deleteOperationFactory=Oe}static get QueryBuilderContext(){return m}static parseRelationExpression(e){return p.create(e).toPojo()}tableNameFor(e,t){return super.tableNameFor(q(e),t)}tableName(e){return this.tableNameFor(this.modelClass().getTableName(),e)}tableRef(){return this.tableRefFor(this.modelClass().getTableName())}aliasFor(e,t){return super.aliasFor(q(e),t)}alias(e){return this.aliasFor(this.modelClass().getTableName(),e)}fullIdColumnFor(e){const t=this.tableRefFor(e),r=e.getIdColumn();return Array.isArray(r)?r.map(e=>`${t}.${e}`):`${t}.${r}`}fullIdColumn(){return this.fullIdColumnFor(this.modelClass())}applyModifier(...e){return s(\"applyModifier is deprecated. Use the modify method instead. applyModifier will be removed in objection 3.0\"),this.modify(d(e))}applyFilter(...e){return s(\"applyFilter is deprecated. Use the modify method instead. applyFilter will be removed in objection 3.0\"),this.modify(d(e))}modifiers(e){return 0===arguments.length?{...this._modifiers}:(this._modifiers={...this._modifiers,...e},this)}modify(e,...t){return e?((e=i({modifier:e,modelClass:this.modelClass(),modifiers:this._modifiers}))(this,...t),this):this}reject(e){return this._explicitRejectValue=e,this}resolve(e){return this._explicitResolveValue=e,this}isExplicitlyResolvedOrRejected(){return!(!this._explicitRejectValue&&!this._explicitResolveValue)}isExecutable(){return!this.isExplicitlyResolvedOrRejected()&&!ne(this)}findOperationFactory(e){return this._findOperationFactory=e,this}insertOperationFactory(e){return this._insertOperationFactory=e,this}updateOperationFactory(e){return this._updateOperationFactory=e,this}patchOperationFactory(e){return this._patchOperationFactory=e,this}deleteOperationFactory(e){return this._deleteOperationFactory=e,this}relateOperationFactory(e){return this._relateOperationFactory=e,this}unrelateOperationFactory(e){return this._unrelateOperationFactory=e,this}withGraphFetched(e,t={}){return this._withGraph(e,t,z(this))}withGraphJoined(e,t={}){return this._withGraph(e,t,X(this))}_withGraph(e,t,r){const n=Y(this,r),o=te(this.modelClass(),e);return n.expression=n.expression.merge(o),n.graphOptions={...n.graphOptions,...t},re(this),this}eagerAlgorithm(...e){return s(\"`QueryBuilder#eagerAlgorithm` method is deprecated. You should explicitly use either withGraphFetched or withGraphJoined methods. `eagerAlgoritm` method will be removed in 3.0\"),this._eagerAlgorithm(...e)}_eagerAlgorithm(e,t){return Y(this,e),t&&this._eagerOptions(t),this}eager(...e){return s(\"`QueryBuilder#eager` method is deprecated. You should use the `withGraphFetched` method instead. `eager` method will be removed in 3.0\"),this._eager(...e)}_eager(e,t){return Y(this).expression=te(this.modelClass(),e),re(this),t&&this.clearModifiers().modifiers(t),this}joinEager(e,t){return s(\"`QueryBuilder#joinEager` method is deprecated. You should use the `withGraphJoined` method instead. `joinEager` method will be removed in 3.0\"),this._eagerAlgorithm(X(this))._eager(e,t)}naiveEager(e,t){return s(\"`QueryBuilder#naiveEager` method is deprecated. You should use the `withGraphFetched` method with the `maxBatchSize: 1` option instead. `naiveEager` method will be removed in 3.0\"),this._eagerAlgorithm(Z(this))._eager(e,t)}mergeEager(...e){return s(\"`QueryBuilder#mergeEager` method is deprecated. You should use the `withGraphFetched` method instead. `mergeEager` method will be removed in 3.0\"),this._mergeEager(...e)}_mergeEager(e,t){const r=Y(this);return r.expression=r.expression.merge(te(this.modelClass(),e)),re(this),this.modifiers(t)}mergeJoinEager(e,t){return s(\"`QueryBuilder#mergeJoinEager` method is deprecated. You should use the `withGraphJoined` method instead. `mergeJoinEager` method will be removed in 3.0\"),this._eagerAlgorithm(this.modelClass().JoinEagerAlgorithm)._mergeEager(e,t)}mergeNaiveEager(e,t){return s(\"`QueryBuilder#mergeNaiveEager` method is deprecated. You should use the `withGraphFetched` method with the `maxBatchSize: 1` option instead. `mergeNaiveEager` method will be removed in 3.0\"),this._eagerAlgorithm(this.modelClass().NaiveEagerAlgorithm)._mergeEager(e,t)}allowEager(e){return s(\"`QueryBuilder#allowEager` method is deprecated. You should use `allowGraph` instead. `allowEager` method will be removed in 3.0\"),this.clearAllowGraph().allowGraph(e)}allowGraph(e){const t=this._allowedGraphExpression||p.create();return this._allowedGraphExpression=t.merge(te(this.modelClass(),e)),re(this),this}allowedGraphExpression(){return this._allowedGraphExpression}mergeAllowEager(e){return s(\"`QueryBuilder#mergeAllowEager` method is deprecated. You should use `allowGraph` instead. `mergeAllowEager` method will be removed in 3.0\"),this.allowGraph(e)}eagerObject(){return s(\"`QueryBuilder#eagerObject` method is deprecated. You should use `graphExpressionObject` instead. `eagerObject` method will be removed in 3.0\"),this.graphExpressionObject()}graphExpressionObject(){const e=this.findOperation(k);return e&&!e.expression.isEmpty?e.expression.toPojo():null}eagerModifiers(){return s(\"`QueryBuilder#eagerModifiers` method is deprecated. You should use `modifiers` instead. `eagerModifiers` method will be removed in 3.0\"),this.modifiers()}eagerModifiersAtPath(){return s(\"`QueryBuilder#eagerModifiersAtPath` method is deprecated. You should use `graphModifiersAtPath` instead. `eagerModifiersAtPath` method will be removed in 3.0\"),this.graphModifiersAtPath()}graphModifiersAtPath(){const e=this.findOperation(k);return e&&!e.expression.isEmpty?e.modifiersAtPath.map(e=>Object.assign({},e)):[]}modifyEager(...e){return s(\"`QueryBuilder#modifyEager` method is deprecated. You should use `modifyGraph` instead. `modifyEager` method will be removed in 3.0\"),this.modifyGraph(...e)}modifyGraph(e,t){return Y(this).modifiersAtPath.push({path:e,modifier:t}),this}filterEager(...e){return s(\"`QueryBuilder#filterEager` method is deprecated. You should use `modifyGraph` instead. `filterEager` method will be removed in 3.0\"),this.modifyGraph(...e)}allowUpsert(e){return s(\"`QueryBuilder#allowUpsert` method is deprecated. You should use `allowGraph` instead. `allowUpsert` method will be removed in 3.0\"),this.clearAllowGraph().allowGraph(e)}allowInsert(e){return s(\"`QueryBuilder#allowInsert` method is deprecated. You should use `allowGraph` instead. `allowInsert` method will be removed in 3.0\"),this.clearAllowGraph().allowGraph(e)}eagerOptions(...e){return s(\"`QueryBuilder#eagerOptions` method is deprecated. You should use `withGraphFetched` or `withGraphJoined` and pass options in the second argument. `eagerOptions` method will be removed in 3.0\"),this._eagerOptions(...e)}_eagerOptions(e){const t=Y(this);return t.graphOptions=Object.assign({},t.graphOptions,e),this}findOptions(e){return 0!==arguments.length?(this._findOperationOptions=Object.assign({},this._findOperationOptions,e),this):this._findOperationOptions}resultModelClass(){return this._resultModelClass||this.modelClass()}isFind(){return!(this.isInsert()||this.isUpdate()||this.isDelete()||this.isRelate()||this.isUnrelate())}isInsert(){return this.has(A)}isUpdate(){return this.has(g)}isDelete(){return this.has(y)}isRelate(){return this.has(v)}isUnrelate(){return this.has(N)}hasWheres(){return this.has(R.WhereSelector)}hasSelects(){return this.has(R.SelectSelector)}hasEager(){return s(\"QueryBuilder#hasEager is deprecated. Use hasWithGraph instead. This method will be removed in version 3.0\"),this.hasWithGraph()}hasWithGraph(){const e=this.findOperation(k);return!!e&&!e.expression.isEmpty}isSelectAll(){if(0===this._operations.length)return!0;const e=this.tableRef(),t=this.tableName();return this.everyOperation(r=>r.constructor===V?r.selections.length>0&&r.selections.every(t=>(!t.table||t.table===e)&&\"*\"===t.column):r.constructor===J?r.table===t:!(\"as\"!==r.name&&!r.is(O)))}isFindQuery(){return s(\"isFindQuery is deprecated. Use isFind instead. This method will be removed in version 2.0\"),this.isFind()}isEagerQuery(){return s(\"isEagerQuery is deprecated. Use hasWithGraph instead. This method will be removed in version 2.0\"),this.hasEager()}toString(){return\"[object QueryBuilder]\"}toFindQuery(){return this.clone().clear(e=>e.is(A)||e.is(g)||e.is(y))}clone(){const e=this.emptyInstance();return this.baseCloneInto(e),e._resultModelClass=this._resultModelClass,e._explicitRejectValue=this._explicitRejectValue,e._explicitResolveValue=this._explicitResolveValue,e._modifiers={...this._modifiers},e._allowedGraphExpression=this._allowedGraphExpression,e._findOperationOptions=this._findOperationOptions,e._relatedQueryFor=this._relatedQueryFor,e}emptyInstance(){const e=new this.constructor(this.modelClass());return e._findOperationFactory=this._findOperationFactory,e._insertOperationFactory=this._insertOperationFactory,e._updateOperationFactory=this._updateOperationFactory,e._patchOperationFactory=this._patchOperationFactory,e._relateOperationFactory=this._relateOperationFactory,e._unrelateOperationFactory=this._unrelateOperationFactory,e._deleteOperationFactory=this._deleteOperationFactory,e._relatedQueryFor=this._relatedQueryFor,e}clearEager(){return s(\"`QueryBuilder#clearEager` method is deprecated. You should use `clearWithGraph` instead. `clearEager` method will be removed in 3.0\"),this.clearWithGraph()}clearWithGraph(){return this.clear(k),this}clearWithGraphFetched(){return this.clear(w),this}clearAllowGraph(){return this._allowedGraphExpression=null,this}clearModifiers(){return this._modifiers={},this}clearReject(){return this._explicitRejectValue=null,this}clearResolve(){return this._explicitResolveValue=null,this}castTo(e){return this._resultModelClass=e,this}then(...e){return this.execute().then(...e)}catch(...e){return this.execute().catch(...e)}async resultSize(){const e=this.knex(),t=this.clone().clear(/orderBy|offset|limit/),r=e.count(\"* as count\").from(e=>{t.toKnexQuery(e).as(\"temp\")});this.internalOptions().debug&&r.debug();const n=await r;return n[0]&&n[0].count?parseInt(n[0].count):0}toKnexQuery(e=this.knex().queryBuilder()){let t=this.clone();const r=ne(t=ae(t=ie(t)));return r?r.queryExecutor(t).toKnexQuery():ue(t,e)}async execute(){const e=this.clone();try{await function(e){let t=Promise.resolve();return e=ie(e),t=ce(t=oe(t,e,\"onBefore1\"),e,e.context().runBefore),t=oe(t=ce(t,e,e.internalContext().runBefore),e,\"onBefore2\"),t=oe(t,e,\"onBefore3\")}(e);const t=await function(e){let t=Promise.resolve();const r=ne(e=ae(e)),n=e._explicitRejectValue,o=e._explicitResolveValue;t=null!==n?Promise.reject(n):null!==o?Promise.resolve(o):null!==r?Promise.resolve(r.queryExecutor(e)):(t=oe(t=Promise.resolve(ue(e)),e,\"onRawResult\")).then(t=>(function(e,t){const r=t.resultModelClass();if(null==e)return null;if(Array.isArray(e)){if(e.length&&he(e[0],r))for(let t=0,n=e.length;t<n;++t)e[t]=r.fromDatabaseJson(e[t])}else he(e,r)&&(e=r.fromDatabaseJson(e));return e})(t,e));return t}(e);return await function(e,t){let r=Promise.resolve(t);return r=oe(r,e,\"onAfter1\"),r=ce(r=oe(r,e,\"onAfter2\"),e,e.context().runAfter),r=oe(r=ce(r,e,e.internalContext().runAfter),e,\"onAfter3\")}(e,t)}catch(t){return await function(e,t){let r=Promise.reject(n(t));return e.forEachOperation(!0,t=>{t.hasOnError()&&(r=r.catch(r=>e.callAsyncOperationMethod(t,\"onError\",[e,r])))}),r}(e,t)}}pluck(e){return s(\"QueryBuilder#pluck is deprecated. This method will be removed in version 3.0\"),this.runAfter(t=>Array.isArray(t)?t.map(t=>t&&t[e]):l(t)?t[e]:t)}throwIfNotFound(e={}){return this.runAfter(t=>{if(Array.isArray(t)&&0===t.length||null==t||0===t)throw this.modelClass().createNotFoundError(this.context(),e);return t})}findSelection(e,t=!1){let r=!0,n=null;if(this.forEachOperation(!0,t=>{if(t.constructor===V&&(n=t.findSelection(this,e),r=!1,n))return!1}),n)return n;if(r&&!t){const t=new E(this.tableRef(),\"*\");return E.doesSelect(this,t,e)?t:null}return null}findAllSelections(){let e=[];return this.forEachOperation(!0,t=>{t.constructor===V&&(e=e.concat(t.selections))}),e}hasSelection(e,t){return null!==this.findSelection(e,t)}hasSelectionAs(e,t,r){e=E.create(e);const n=this.findSelection(e,r);return null!==n&&(\"*\"===n.column?e.column===t:n.name===t)}traverse(e,t){return void 0===t&&(t=e,e=null),this.runAfter(r=>(this.resultModelClass().traverse(e,r,t),r))}pick(e,t){return s(\"QueryBuilder#pick is deprecated. This method will be removed in version 3.0\"),void 0===t&&(t=e,e=null),t=t.reduce((e,t)=>(e[t]=!0,e),{}),this.traverse(e,e=>{e.$pick(t)})}omit(e,t){return s(\"QueryBuilder#omit is deprecated. This method will be removed in version 3.0\"),void 0===t&&(t=e,e=null),t=Array.isArray(t)?t.reduce((e,t)=>(e[t]=!0,e),{}):{[t]:!0},this.traverse(e,e=>{e.$omit(t)})}page(e,t){return this.range(+e*+t,(+e+1)*+t-1)}columnInfo({table:e=null}={}){e=e||this.tableName();const t=this.knex(),r=e.split(\".\"),n=t(h(r)).columnInfo(),o=this.internalOptions().schema;return o?n.withSchema(o):r.length>1&&n.withSchema(r[0]),this.internalOptions().debug&&n.debug(),n}withSchema(e){return this.internalOptions().schema=e,this.internalContext().onBuild.push(t=>{t.has(/withSchema/)||t.addOperationToFront(new K(\"withSchema\"),[e])}),this}debug(){return this.internalOptions().debug=!0,this.internalContext().onBuild.push(e=>{e.addOperation(new K(\"debug\"),[])}),this}insert(e){return de(this,()=>{const t=this._insertOperationFactory(this);this.addOperation(t,[e])})}insertAndFetch(e){return de(this,()=>{const t=this._insertOperationFactory(this),r=new S(\"insertAndFetch\",{delegate:t});this.addOperation(r,[e])})}insertGraph(e,t){return de(this,()=>{const r=this._insertOperationFactory(this),n=new D(\"insertGraph\",{delegate:r,opt:t});this.addOperation(n,[e])})}insertWithRelated(...e){return s(\"insertWithRelated is deprecated. Use insertGraph instead. This method will be removed in version 2.0\"),this.insertGraph(...e)}insertGraphAndFetch(e,t){return de(this,()=>{const r=this._insertOperationFactory(this),n=new D(\"insertGraph\",{delegate:r,opt:t}),o=new P(\"insertGraphAndFetch\",{delegate:n});return this.addOperation(o,[e])})}insertWithRelatedAndFetch(...e){return s(\"insertWithRelatedAndFetch is deprecated. Use insertGraphAndFetch instead. This method will be removed in version 2.0\"),this.insertGraphAndFetch(...e)}update(e){return de(this,()=>{const t=this._updateOperationFactory(this);this.addOperation(t,[e])})}updateAndFetch(e){return de(this,()=>{const t=this._updateOperationFactory(this);if(!(t.instance instanceof this.modelClass()))throw new Error(\"updateAndFetch can only be called for instance operations\");const r=new C(\"updateAndFetch\",{delegate:t});r.skipIdWhere=!0,this.addOperation(r,[t.instance.$id(),e])})}updateAndFetchById(e,t){return de(this,()=>{const r=this._updateOperationFactory(this),n=new C(\"updateAndFetch\",{delegate:r});this.addOperation(n,[e,t])})}upsertGraph(e,t){return de(this,()=>{const r=new M(\"upsertGraph\",{upsertOptions:t});this.addOperation(r,[e])})}upsertGraphAndFetch(e,t){return de(this,()=>{const r=new M(\"upsertGraph\",{upsertOptions:t}),n=new I(\"upsertGraphAndFetch\",{delegate:r});return this.addOperation(n,[e])})}patch(e){return de(this,()=>{const t=this._patchOperationFactory(this);this.addOperation(t,[e])})}patchAndFetch(e){return de(this,()=>{const t=this._patchOperationFactory(this);if(!(t.instance instanceof this.modelClass()))throw new Error(\"patchAndFetch can only be called for instance operations\");const r=new C(\"patchAndFetch\",{delegate:t});r.skipIdWhere=!0,this.addOperation(r,[t.instance.$id(),e])})}patchAndFetchById(e,t){return de(this,()=>{const r=this._patchOperationFactory(this),n=new C(\"patchAndFetch\",{delegate:r});this.addOperation(n,[e,t])})}delete(...e){return de(this,()=>{if(e.length)throw new Error(\"Don't pass arguments to delete(). You should use it like this: delete().where('foo', 'bar').andWhere(...)\");const t=this._deleteOperationFactory(this);this.addOperation(t,e)})}del(...e){return this.delete(...e)}relate(...e){return de(this,()=>{const t=this._relateOperationFactory(this);this.addOperation(t,e)})}unrelate(...e){return de(this,()=>{if(e.length)throw new Error(\"Don't pass arguments to unrelate(). You should use it like this: unrelate().where('foo', 'bar').andWhere(...)\");const t=this._unrelateOperationFactory(this);this.addOperation(t,e)})}increment(e,t){const r=this.modelClass().propertyNameToColumnName(e);return this.patch({[r]:o(\"?? + ?\",[r,t])})}decrement(e,t){const r=this.modelClass().propertyNameToColumnName(e);return this.patch({[r]:o(\"?? - ?\",[r,t])})}findOne(...e){return this.where.apply(this,e).first()}range(...e){return this.clear(W).addOperation(new W(\"range\"),e)}first(...e){return this.addOperation(new Q(\"first\"),e)}joinRelated(e,t){return se(this,\"innerJoin\").addCall({expression:e,options:t}),this}joinRelation(...e){return s(\"joinRelation is deprecated. Use joinRelated instead. This method will be removed in version 3.0\"),this.joinRelated(...e)}innerJoinRelated(e,t){return se(this,\"innerJoin\").addCall({expression:e,options:t}),this}innerJoinRelation(...e){return s(\"innerJoinRelation is deprecated. Use innerJoinRelated instead. This method will be removed in version 3.0\"),this.innerJoinRelated(...e)}outerJoinRelated(e,t){return se(this,\"outerJoin\").addCall({expression:e,options:t}),this}outerJoinRelation(...e){return s(\"outerJoinRelation is deprecated. Use outerJoinRelated instead. This method will be removed in version 3.0\"),this.outerJoinRelated(...e)}fullOuterJoinRelated(e,t){return se(this,\"fullOuterJoin\").addCall({expression:e,options:t}),this}fullOuterJoinRelation(...e){return s(\"fullOuterJoinRelation is deprecated. Use fullOuterJoinRelated instead. This method will be removed in version 3.0\"),this.fullOuterJoinRelated(...e)}leftJoinRelated(e,t){return se(this,\"leftJoin\").addCall({expression:e,options:t}),this}leftJoinRelation(...e){return s(\"leftJoinRelation is deprecated. Use leftJoinRelated instead. This method will be removed in version 3.0\"),this.leftJoinRelated(...e)}leftOuterJoinRelated(e,t){return se(this,\"leftOuterJoin\").addCall({expression:e,options:t}),this}leftOuterJoinRelation(...e){return s(\"leftOuterJoinRelation is deprecated. Use leftOuterJoinRelated instead. This method will be removed in version 3.0\"),this.leftOuterJoinRelated(...e)}rightJoinRelated(e,t){return se(this,\"rightJoin\").addCall({expression:e,options:t}),this}rightJoinRelation(...e){return s(\"rightJoinRelation is deprecated. Use rightJoinRelated instead. This method will be removed in version 3.0\"),this.rightJoinRelated(...e)}rightOuterJoinRelated(e,t){return se(this,\"rightOuterJoin\").addCall({expression:e,options:t}),this}rightOuterJoinRelation(...e){return s(\"rightOuterJoinRelation is deprecated. Use rightOuterJoinRelated instead. This method will be removed in version 3.0\"),this.rightOuterJoinRelated(...e)}deleteById(e){return this.findById(e).delete().runBefore((t,r)=>{r.internalOptions().skipUndefined||_(e,\"undefined was passed to deleteById\")})}findById(...e){return this.addOperation(new B(\"findById\"),e).first()}findByIds(...e){return this.addOperation(new U(\"findByIds\"),e)}runBefore(...e){return this.addOperation(new j(\"runBefore\"),e)}onBuild(...e){return this.addOperation(new $(\"onBuild\"),e)}onBuildKnex(...e){return this.addOperation(new F(\"onBuildKnex\"),e)}runAfter(...e){return this.addOperation(new L(\"runAfter\"),e)}onError(...e){return this.addOperation(new G(\"onError\"),e)}from(...e){return this.addOperation(new J(\"from\"),e)}table(...e){return this.addOperation(new J(\"table\"),e)}for(e){return 0===arguments.length?this._relatedQueryFor:(this._relatedQueryFor=e,this)}}function q(e){return u(e)?e:e.getTableName()}function Y(e,t=null){const r=e.modelClass().getDefaultGraphOptions(),n=e.findOperation(k);if(t){const o=ee(e,t);if(n instanceof o)return n;{const t=new o(\"eager\",{defaultGraphOptions:r});return n&&t.cloneFrom(n),e.clear(k),e.addOperation(t),t}}if(n)return n;{const t=new(ee(e,function(e){const t=e.modelClass().defaultEagerAlgorithm;t!==z(e)&&s(\"Model.defaultEagerAlgorithm is deprecated. You need to use `withGraphFetched` or `withGraphJoined` explicitly. `defaultEagerAlgorithm` will be removed in 3.0\");return t}(e)))(\"eager\",{defaultGraphOptions:r});return e.addOperation(t),t}}function z(e){return e.modelClass().WhereInEagerAlgorithm}function X(e){return e.modelClass().JoinEagerAlgorithm}function Z(e){return e.modelClass().NaiveEagerAlgorithm}function ee(e,t){return t===X(e)?b:t===Z(e)?T:w}function te(e,t){try{return p.create(t)}catch(r){throw r instanceof f?e.createValidationError({type:a.RelationExpression,message:`Duplicate relation name \"${r.relationName}\" in relation expression \"${t}\". For example, use \"${r.relationName}.[foo, bar]\" instead of \"[${r.relationName}.foo, ${r.relationName}.bar]\".`}):e.createValidationError({type:a.RelationExpression,message:`Invalid relation expression \"${t}\"`})}}function re(e){const t=e.findOperation(k);if(!t)return;const r=t.expression,n=e.allowedGraphExpression();if(r.numChildren>0&&n&&!n.isSubExpression(r)){const t=e.modelClass();e.reject(t.createValidationError({type:a.UnallowedRelation,message:\"eager expression not allowed\"}))}}function ne(e){return e.findOperation(e=>e.hasQueryExecutor())}function oe(e,t,r){return e.then(e=>{let n=Promise.resolve(e);return t.forEachOperation(!0,e=>{e.hasHook(r)&&(n=n.then(n=>t.callAsyncOperationMethod(e,r,[t,n])))}),n})}function se(e,t){const r=t+\"Relation\";let n=e.findOperation(r);return n||(n=new x(r,{joinOperation:t}),e.addOperation(n)),n}function ie(e){return e.isFind()&&function(e){if(!e.has(O)){const t=e._findOperationFactory(e);e.addOperationToFront(t,[])}}(e),e.hasWithGraph()&&function(e){const t=e.findOperation(k);e.clear(k),e.addOperation(t)}(e),e}function ae(e){return le(e,e.context().onBuild),le(e,e.internalContext().onBuild),e.executeOnBuild(),e}function le(e,t){c(t)?t.call(e,e):Array.isArray(t)&&t.forEach(t=>le(e,t))}function ue(e,t=e.knex().queryBuilder()){e.executeOnBuildKnex(t);const r=e.findLastOperation(R.FromSelector),n=e.has(R.SelectSelector);return e.isPartial()||(r||function(e,t){const r=e.tableName(),n=e.tableRef();r===n?t.table(r):t.table(`${r} as ${n}`)}(e,t),n||r&&!r.table||function(e,t){const r=e.tableRef();t.select(`${r}.*`)}(e,t)),t}async function ce(e,t,r){return e.then(e=>{let n=Promise.resolve(e);return c(r)?n=n.then(e=>r.call(t,e,t)):Array.isArray(r)&&r.forEach(e=>{n=ce(n,t,e)}),n})}function he(e,t){return l(e)&&!(e instanceof t)}function de(e,t){if(!e.isFind())return e.reject(new Error(\"Double call to a write method. You can only call one of the write methods (insert, update, patch, delete, relate, unrelate, increment, decrement) and only once per query builder.\"));try{return t(),e}catch(t){return e.reject(t)}}function pe(){return new O(\"find\")}function fe(){return new A(\"insert\")}function _e(){return new g(\"update\")}function Ee(){return new g(\"patch\",{modelOptions:{patch:!0}})}function me(){return new v(\"relate\",{})}function Re(){return new N(\"unrelate\",{})}function Oe(){return new y(\"delete\")}Object.defineProperties(H.prototype,{isObjectionQueryBuilder:{enumerable:!1,writable:!1,value:!0}}),e.exports={QueryBuilder:H}},function(e,t,r){\"use strict\";e.exports={RelationDoesNotExistError:class extends Error{constructor(e){super(`unknown relation \"${e}\" in a relation expression`),this.name=this.constructor.name,this.relationName=e}}}},function(e,t,r){\"use strict\";const{InternalOptions:n}=r(198);e.exports={QueryBuilderContextBase:class{constructor(e){this.userContext=e?new e.constructor.QueryBuilderUserContext(e):null,this.options=e?new this.constructor.InternalOptions:null,this.knex=null,this.aliasMap=null,this.tableMap=null}static get InternalOptions(){return n}clone(){const e=new this.constructor;return e.userContext=this.userContext,e.options=this.options.clone(),e.knex=this.knex,e.aliasMap=this.aliasMap,e.tableMap=this.tableMap,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperationSupport:n}=r(92),{isSqlite:o,isMsSql:s}=r(3),{KnexOperation:i}=r(54),{SelectOperation:a}=r(94),{ReturningOperation:l}=r(204),{WhereCompositeOperation:u}=r(205),{WhereJsonPostgresOperation:c}=r(206),{WhereInCompositeOperation:h}=r(207),{WhereInCompositeSqliteOperation:d}=r(208),{WhereInCompositeMsSqlOperation:p}=r(209),{WhereJsonHasPostgresOperation:f}=r(210),{WhereJsonNotObjectPostgresOperation:_}=r(211);class E extends n{modify(...e){const t=e[0];return t?(1===e.length?t.call(this,this):(e[0]=this,t(...e)),this):this}transacting(e){return this._context.knex=e||null,this}select(...e){return this.addOperation(new a(\"select\"),e)}insert(...e){return this.addOperation(new i(\"insert\"),e)}update(...e){return this.addOperation(new i(\"update\"),e)}delete(...e){return this.addOperation(new i(\"delete\"),e)}del(...e){return this.delete(...e)}forUpdate(...e){return this.addOperation(new i(\"forUpdate\"),e)}forShare(...e){return this.addOperation(new i(\"forShare\"),e)}as(...e){return this.addOperation(new i(\"as\"),e)}columns(...e){return this.addOperation(new a(\"columns\"),e)}column(...e){return this.addOperation(new a(\"column\"),e)}from(...e){return this.addOperation(new i(\"from\"),e)}fromJS(...e){return this.addOperation(new i(\"fromJS\"),e)}into(...e){return this.addOperation(new i(\"into\"),e)}withSchema(...e){return this.addOperation(new i(\"withSchema\"),e)}table(...e){return this.addOperation(new i(\"table\"),e)}distinct(...e){return this.addOperation(new a(\"distinct\"),e)}distinctOn(...e){return this.addOperation(new a(\"distinctOn\"),e)}join(...e){return this.addOperation(new i(\"join\"),e)}joinRaw(...e){return this.addOperation(new i(\"joinRaw\"),e)}innerJoin(...e){return this.addOperation(new i(\"innerJoin\"),e)}leftJoin(...e){return this.addOperation(new i(\"leftJoin\"),e)}leftOuterJoin(...e){return this.addOperation(new i(\"leftOuterJoin\"),e)}rightJoin(...e){return this.addOperation(new i(\"rightJoin\"),e)}rightOuterJoin(...e){return this.addOperation(new i(\"rightOuterJoin\"),e)}outerJoin(...e){return this.addOperation(new i(\"outerJoin\"),e)}fullOuterJoin(...e){return this.addOperation(new i(\"fullOuterJoin\"),e)}crossJoin(...e){return this.addOperation(new i(\"crossJoin\"),e)}where(...e){return this.addOperation(new i(\"where\"),e)}andWhere(...e){return this.addOperation(new i(\"andWhere\"),e)}orWhere(...e){return this.addOperation(new i(\"orWhere\"),e)}whereNot(...e){return this.addOperation(new i(\"whereNot\"),e)}andWhereNot(...e){return this.addOperation(new i(\"andWhereNot\"),e)}orWhereNot(...e){return this.addOperation(new i(\"orWhereNot\"),e)}whereRaw(...e){return this.addOperation(new i(\"whereRaw\"),e)}andWhereRaw(...e){return this.addOperation(new i(\"andWhereRaw\"),e)}orWhereRaw(...e){return this.addOperation(new i(\"orWhereRaw\"),e)}whereWrapped(...e){return this.addOperation(new i(\"whereWrapped\"),e)}havingWrapped(...e){return this.addOperation(new i(\"havingWrapped\"),e)}whereExists(...e){return this.addOperation(new i(\"whereExists\"),e)}orWhereExists(...e){return this.addOperation(new i(\"orWhereExists\"),e)}whereNotExists(...e){return this.addOperation(new i(\"whereNotExists\"),e)}orWhereNotExists(...e){return this.addOperation(new i(\"orWhereNotExists\"),e)}whereIn(...e){return this.addOperation(new i(\"whereIn\"),e)}orWhereIn(...e){return this.addOperation(new i(\"orWhereIn\"),e)}whereNotIn(...e){return this.addOperation(new i(\"whereNotIn\"),e)}orWhereNotIn(...e){return this.addOperation(new i(\"orWhereNotIn\"),e)}whereNull(...e){return this.addOperation(new i(\"whereNull\"),e)}orWhereNull(...e){return this.addOperation(new i(\"orWhereNull\"),e)}whereNotNull(...e){return this.addOperation(new i(\"whereNotNull\"),e)}orWhereNotNull(...e){return this.addOperation(new i(\"orWhereNotNull\"),e)}whereBetween(...e){return this.addOperation(new i(\"whereBetween\"),e)}andWhereBetween(...e){return this.addOperation(new i(\"andWhereBetween\"),e)}whereNotBetween(...e){return this.addOperation(new i(\"whereNotBetween\"),e)}andWhereNotBetween(...e){return this.addOperation(new i(\"andWhereNotBetween\"),e)}orWhereBetween(...e){return this.addOperation(new i(\"orWhereBetween\"),e)}orWhereNotBetween(...e){return this.addOperation(new i(\"orWhereNotBetween\"),e)}groupBy(...e){return this.addOperation(new i(\"groupBy\"),e)}groupByRaw(...e){return this.addOperation(new i(\"groupByRaw\"),e)}orderBy(...e){return this.addOperation(new i(\"orderBy\"),e)}orderByRaw(...e){return this.addOperation(new i(\"orderByRaw\"),e)}union(...e){return this.addOperation(new i(\"union\"),e)}unionAll(...e){return this.addOperation(new i(\"unionAll\"),e)}intersect(...e){return this.addOperation(new i(\"intersect\"),e)}having(...e){return this.addOperation(new i(\"having\"),e)}clearHaving(...e){return this.addOperation(new i(\"clearHaving\"),e)}clearGroup(...e){return this.addOperation(new i(\"clearGroup\"),e)}orHaving(...e){return this.addOperation(new i(\"orHaving\"),e)}havingIn(...e){return this.addOperation(new i(\"havingIn\"),e)}orHavingIn(...e){return this.addOperation(new i(\"havingIn\"),e)}havingNotIn(...e){return this.addOperation(new i(\"havingNotIn\"),e)}orHavingNotIn(...e){return this.addOperation(new i(\"orHavingNotIn\"),e)}havingNull(...e){return this.addOperation(new i(\"havingNull\"),e)}orHavingNull(...e){return this.addOperation(new i(\"orHavingNull\"),e)}havingNotNull(...e){return this.addOperation(new i(\"havingNotNull\"),e)}orHavingNotNull(...e){return this.addOperation(new i(\"orHavingNotNull\"),e)}havingExists(...e){return this.addOperation(new i(\"havingExists\"),e)}orHavingExists(...e){return this.addOperation(new i(\"orHavingExists\"),e)}havingNotExists(...e){return this.addOperation(new i(\"havingNotExists\"),e)}orHavingNotExists(...e){return this.addOperation(new i(\"orHavingNotExists\"),e)}havingBetween(...e){return this.addOperation(new i(\"havingBetween\"),e)}orHavingBetween(...e){return this.addOperation(new i(\"havingBetween\"),e)}havingNotBetween(...e){return this.addOperation(new i(\"havingNotBetween\"),e)}orHavingNotBetween(...e){return this.addOperation(new i(\"havingNotBetween\"),e)}havingRaw(...e){return this.addOperation(new i(\"havingRaw\"),e)}orHavingRaw(...e){return this.addOperation(new i(\"orHavingRaw\"),e)}offset(...e){return this.addOperation(new i(\"offset\"),e)}limit(...e){return this.addOperation(new i(\"limit\"),e)}count(...e){return this.addOperation(new a(\"count\"),e)}countDistinct(...e){return this.addOperation(new a(\"countDistinct\"),e)}min(...e){return this.addOperation(new a(\"min\"),e)}max(...e){return this.addOperation(new a(\"max\"),e)}sum(...e){return this.addOperation(new a(\"sum\"),e)}sumDistinct(...e){return this.addOperation(new a(\"sumDistinct\"),e)}avg(...e){return this.addOperation(new a(\"avg\"),e)}avgDistinct(...e){return this.addOperation(new a(\"avgDistinct\"),e)}debug(...e){return this.addOperation(new i(\"debug\"),e)}returning(...e){return this.addOperation(new l(\"returning\"),e)}truncate(...e){return this.addOperation(new i(\"truncate\"),e)}connection(...e){return this.addOperation(new i(\"connection\"),e)}options(...e){return this.addOperation(new i(\"options\"),e)}columnInfo(...e){return this.addOperation(new i(\"columnInfo\"),e)}off(...e){return this.addOperation(new i(\"off\"),e)}timeout(...e){return this.addOperation(new i(\"timeout\"),e)}with(...e){return this.addOperation(new i(\"with\"),e)}withWrapped(...e){return this.addOperation(new i(\"withWrapped\"),e)}withRecursive(...e){return this.addOperation(new i(\"withRecursive\"),e)}whereComposite(...e){return this.addOperation(new u(\"whereComposite\"),e)}whereInComposite(...e){let t=null;return t=o(this.knex())?new d(\"whereInComposite\"):s(this.knex())?new p(\"whereInComposite\"):new h(\"whereInComposite\"),this.addOperation(t,e)}whereNotInComposite(...e){let t=null;return t=o(this.knex())?new d(\"whereNotInComposite\",{prefix:\"not\"}):s(this.knex())?new p(\"whereNotInComposite\",{prefix:\"not\"}):new h(\"whereNotInComposite\",{prefix:\"not\"}),this.addOperation(t,e)}whereJsonSupersetOf(...e){return this.addOperation(new c(\"whereJsonSupersetOf\",{operator:\"@>\",bool:\"and\"}),e)}orWhereJsonSupersetOf(...e){return this.addOperation(new c(\"orWhereJsonSupersetOf\",{operator:\"@>\",bool:\"or\"}),e)}whereJsonNotSupersetOf(...e){return this.addOperation(new c(\"whereJsonNotSupersetOf\",{operator:\"@>\",bool:\"and\",prefix:\"not\"}),e)}orWhereJsonNotSupersetOf(...e){return this.addOperation(new c(\"orWhereJsonNotSupersetOf\",{operator:\"@>\",bool:\"or\",prefix:\"not\"}),e)}whereJsonSubsetOf(...e){return this.addOperation(new c(\"whereJsonSubsetOf\",{operator:\"<@\",bool:\"and\"}),e)}orWhereJsonSubsetOf(...e){return this.addOperation(new c(\"orWhereJsonSubsetOf\",{operator:\"<@\",bool:\"or\"}),e)}whereJsonNotSubsetOf(...e){return this.addOperation(new c(\"whereJsonNotSubsetOf\",{operator:\"<@\",bool:\"and\",prefix:\"not\"}),e)}orWhereJsonNotSubsetOf(...e){return this.addOperation(new c(\"orWhereJsonNotSubsetOf\",{operator:\"<@\",bool:\"or\",prefix:\"not\"}),e)}whereJsonNotArray(...e){return this.addOperation(new _(\"whereJsonNotArray\",{bool:\"and\",compareValue:[]}),e)}orWhereJsonNotArray(...e){return this.addOperation(new _(\"orWhereJsonNotArray\",{bool:\"or\",compareValue:[]}),e)}whereJsonNotObject(...e){return this.addOperation(new _(\"whereJsonNotObject\",{bool:\"and\",compareValue:{}}),e)}orWhereJsonNotObject(...e){return this.addOperation(new _(\"orWhereJsonNotObject\",{bool:\"or\",compareValue:{}}),e)}whereJsonHasAny(...e){return this.addOperation(new f(\"whereJsonHasAny\",{bool:\"and\",operator:\"?|\"}),e)}orWhereJsonHasAny(...e){return this.addOperation(new f(\"orWhereJsonHasAny\",{bool:\"or\",operator:\"?|\"}),e)}whereJsonHasAll(...e){return this.addOperation(new f(\"whereJsonHasAll\",{bool:\"and\",operator:\"?&\"}),e)}orWhereJsonHasAll(...e){return this.addOperation(new f(\"orWhereJsonHasAll\",{bool:\"or\",operator:\"?&\"}),e)}whereJsonIsArray(e){return this.whereJsonSupersetOf(e,[])}orWhereJsonIsArray(e){return this.orWhereJsonSupersetOf(e,[])}whereJsonIsObject(e){return this.whereJsonSupersetOf(e,{})}orWhereJsonIsObject(e){return this.orWhereJsonSupersetOf(e,{})}whereColumn(...e){return this.addOperation(new i(\"whereColumn\"),e)}andWhereColumn(...e){return this.addOperation(new i(\"andWhereColumn\"),e)}orWhereColumn(...e){return this.addOperation(new i(\"orWhereColumn\"),e)}whereNotColumn(...e){return this.addOperation(new i(\"whereNotColumn\"),e)}andWhereNotColumn(...e){return this.addOperation(new i(\"andWhereNotColumn\"),e)}orWhereNotColumn(...e){return this.addOperation(new i(\"orWhereNotColumn\"),e)}}Object.defineProperties(E.prototype,{isObjectionQueryBuilderBase:{enumerable:!1,writable:!1,value:!0}}),e.exports={QueryBuilderBase:E}},function(e,t,r){\"use strict\";const{deprecate:n}=r(12),{isString:o,isFunction:s,isRegExp:i,last:a}=r(0),{QueryBuilderContextBase:l}=r(90),{QueryBuilderUserContext:u}=r(199),c=()=>!0,h=/^(select|columns|column|distinct|count|countDistinct|min|max|sum|sumDistinct|avg|avgDistinct)$/,d=/^(where|orWhere|andWhere|find)/,p=/^(on|orOn|andOn)/,f=/orderBy/,_=/(join|joinRaw|joinRelated)$/i,E=/^(from|into|table)$/;e.exports={QueryBuilderOperationSupport:class{constructor(...e){this.constructor.init(this,...e)}static init(e,t){e._modelClass=t,e._operations=[],e._context=new this.QueryBuilderContext(e),e._parentQuery=null,e._isPartialQuery=!1,e._activeOperations=[]}static forClass(e){return new this(e)}static get AllSelector(){return c}static get QueryBuilderContext(){return l}static get QueryBuilderUserContext(){return u}static get SelectSelector(){return h}static get WhereSelector(){return d}static get OnSelector(){return p}static get JoinSelector(){return _}static get FromSelector(){return E}static get OrderBySelector(){return f}modelClass(){return this._modelClass}context(e){const t=this._context;return 0===arguments.length?t.userContext:(t.userContext=t.userContext.newMerge(this,e),this)}mergeContext(e){return n(\"`QueryBuilder#mergeContext` method is deprecated. The `context` method now behaves just like `mergeContext`. `mergeContext` method will be removed in 3.0\"),this.context(e||{})}clearContext(){return this._context.userContext=new this.constructor.QueryBuilderUserContext(this),this}internalContext(e){return 0===arguments.length?this._context:(this._context=e,this)}internalOptions(e){if(0===arguments.length)return this._context.options;{const t=this._context.options;return this._context.options=Object.assign(t,e),this}}isPartial(e){return 0===arguments.length?this._isPartialQuery:(this._isPartialQuery=e,this)}isInternal(){return this.internalOptions().isInternalQuery}tableNameFor(e,t){const r=this.internalContext(),n=r.tableMap;return o(t)?(r.tableMap=n||new Map,r.tableMap.set(e,t),this):n&&n.get(e)||e}aliasFor(e,t){const r=this.internalContext(),n=r.aliasMap;return o(t)?(r.aliasMap=n||new Map,r.aliasMap.set(e,t),this):n&&n.get(e)||null}tableRefFor(e){return this.aliasFor(e)||this.tableNameFor(e)}childQueryOf(e,{fork:t,isInternalQuery:r}={}){if(e){let n=e.internalContext();t&&(n=n.clone()),r&&(n.options.isInternalQuery=!0),this._parentQuery=e,this.internalContext(n),null===this.unsafeKnex()&&this.knex(e.unsafeKnex())}return this}subqueryOf(e){return e&&(this._parentQuery=e,null===this.unsafeKnex()&&this.knex(e.unsafeKnex())),this}parentQuery(){return this._parentQuery}knex(...e){if(0===e.length){const e=this.unsafeKnex();if(!e)throw new Error(\"no database connection available for a query. You need to bind the model class or the query to a knex instance.\");return e}return this._context.knex=e[0],this}unsafeKnex(){return this._context.knex||this._modelClass.knex()||null}clear(e){const t=new Set;this.forEachOperation(e,e=>{e.isAncestorInSet(t)||t.add(e)});for(const e of t)this.removeOperation(e);return this}clearSelect(){return this.clear(h)}clearWhere(){return this.clear(d)}clearOrder(){return this.clear(f)}copyFrom(e,t){const r=new Set;e.forEachOperation(t,e=>{e.isAncestorInSet(r)||r.add(e)});for(const e of r){const t=e.clone();t.parentOperation=null,t.adderHookName=null,this._operations.push(t)}return this}has(e){return!!this.findOperation(e)}forEachOperation(e,t,r=!0){const n=function(e){return!0===e?c:i(e)?t=>e.test(t.name):o(e)?t=>t.name===e:s(e)&&e.isObjectionQueryBuilderOperationClass?t=>t.is(e):s(e)?e:()=>!1}(e);for(const e of this._operations){if(n(e)===r&&!1===t(e))break;if(!1===e.forEachDescendantOperation(e=>{if(n(e)===r&&!1===t(e))return!1}))break}return this}findOperation(e){let t=null;return this.forEachOperation(e,e=>(t=e,!1)),t}findLastOperation(e){let t=null;return this.forEachOperation(e,e=>{t=e}),t}everyOperation(e){let t=!0;return this.forEachOperation(e,()=>(t=!1,!1),!1),t}callOperationMethod(e,t,r){try{return e.removeChildOperationsByHookName(t),this._activeOperations.push({operation:e,hookName:t}),e[t](...r)}finally{this._activeOperations.pop()}}async callAsyncOperationMethod(e,t,r){e.removeChildOperationsByHookName(t),this._activeOperations.push({operation:e,hookName:t});try{return await e[t](...r)}finally{this._activeOperations.pop()}}addOperation(e,t){return this.addOperationUsingMethod(\"push\",e,t)}addOperationToFront(e,t){return this.addOperationUsingMethod(\"unshift\",e,t)}addOperationUsingMethod(e,t,r){if(this.callOperationMethod(t,\"onAdd\",[this,r]))if(this._activeOperations.length){const{operation:e,hookName:r}=a(this._activeOperations);e.addChildOperation(r,t)}else this._operations[e](t);return this}removeOperation(e){if(e.parentOperation)e.parentOperation.removeChildOperation(e);else{const t=this._operations.indexOf(e);-1!==t&&this._operations.splice(t,1)}return this}clone(){return this.baseCloneInto(new this.constructor(this.unsafeKnex()))}baseCloneInto(e){return e._modelClass=this._modelClass,e._operations=this._operations.map(e=>e.clone()),e._context=this._context.clone(),e._parentQuery=this._parentQuery,e._isPartialQuery=this._isPartialQuery,e._activeOperations=[],e}toKnexQuery(e=this.knex().queryBuilder()){return this.executeOnBuild(),this.executeOnBuildKnex(e),e}executeOnBuild(){this.forEachOperation(!0,e=>{e.hasOnBuild()&&this.callOperationMethod(e,\"onBuild\",[this])})}executeOnBuildKnex(e){this.forEachOperation(!0,t=>{t.hasOnBuildKnex()&&this.callOperationMethod(t,\"onBuildKnex\",[e,this])})}toString(){return this.toKnexQuery().toString()}toSql(){return this.toString()}skipUndefined(){return this.internalOptions().skipUndefined=!0,this}}}},function(e,t,r){\"use strict\";e.exports={QueryTransformation:class{onConvertQueryBuilderBase(e,t){return e}}}},function(e,t,r){\"use strict\";const{flatten:n}=r(0),{Selection:o}=r(53),{ObjectionToKnexConvertingOperation:s}=r(4),i=/count/i;e.exports={SelectOperation:class extends s{constructor(e,t){super(e,t),this.selections=[]}onAdd(e,t){const r=n(t);if(0===r.length&&!i.test(this.name))return!1;const s=super.onAdd(e,r);for(const e of r){const t=o.create(e);t&&this.selections.push(t)}return s}onBuildKnex(e,t){e[this.name].apply(e,this.getKnexArgs(t))}findSelection(e,t){const r=o.create(t);if(!r)return null;for(const t of this.selections)if(o.doesSelect(e,t,r))return t;return null}clone(){const e=super.clone();return e.selections=this.selections.slice(),e}}}},function(e,t,r){\"use strict\";const{uniqBy:n}=r(0),{Selection:o}=r(53),{createModifier:s}=r(16),{map:i}=r(2),{ValidationErrorType:a}=r(5),{TableTree:l}=r(213),{JoinResultParser:u}=r(215),{ID_LENGTH_LIMIT:c}=r(96);function h(e){return\"*\"===e.column}function d(e){return\"*\"!==e.column}function p(e,t){if(t.length>c)throw e.createValidationError({type:a.RelationExpression,message:`identifier ${t} is over ${c} characters long and would be truncated by the database engine.`})}e.exports={RelationJoiner:class{constructor({modelClass:e}){this.rootModelClass=e,this.expression=null,this.modifiers=null,this.options={joinOperation:\"leftJoin\",minimize:!1,separator:\":\",aliases:{}},this.tableTree=null,this.internalSelections=null}setExpression(e){return this.expression||(this.expression=e),this}setModifiers(e){return this.modifiers||(this.modifiers=e),this}setOptions(e){return this.options=Object.assign(this.options,e),this}fetchColumnInfo(e){const t=this._getTableTree(e),r=new Set(t.nodes.map(e=>e.modelClass));return i(Array.from(r),t=>t.fetchTableMetadata({parentBuilder:e}),{concurrency:this.rootModelClass.getConcurrency(e.unsafeKnex())})}build(e,t=!0){const r=this._getTableTree(e).rootNode,n=new Map([[r,e]]);for(const t of r.childNodes)this._buildJoinsForNode({builder:e,tableNode:t,userSelectQueries:n});t&&this._buildSelects({builder:e,tableNode:r,userSelectQueries:n})}parseResult(e,t){return u.create({tableTree:this._getTableTree(e),omitColumnAliases:this.internalSelections.map(e=>e.alias)}).parse(t)}_getTableTree(e){return this.tableTree||(this.tableTree=l.create({rootModelClass:this.rootModelClass,rootTableAlias:e.tableRef(),expression:this.expression,options:this.options})),this.tableTree}_buildJoinsForNode({builder:e,tableNode:t,userSelectQueries:r}){const o=function({builder:e,tableNode:t,modifiers:r}){const{relation:n,expression:o,modelClass:i}=t,l=i.query().childQueryOf(e);for(const e of o.node.$modify){const t=s({modifier:e,modelClass:i,modifiers:r});try{t(l)}catch(t){throw t instanceof i.ModifierNotFoundError?i.createValidationError({type:a.RelationExpression,message:`could not find modifier \"${e}\" for relation \"${n.name}\"`}):t}}return l}({builder:e,tableNode:t,modifiers:this.modifiers}),i=o.clone();i.modify(t.relation.modify),r.set(t,i),t.relation.join(e,{joinOperation:this.options.joinOperation,ownerTable:t.parentNode.alias,relatedTableAlias:t.alias,joinTableAlias:t.joinTableAlias,relatedJoinSelectQuery:function({builder:e,tableNode:t}){const r=e.tableRef(),o=[...e.modelClass().getIdColumnArray(),...t.relation.relatedProp.cols,...t.childNodes.reduce((e,t)=>[...e,...t.relation.ownerProp.cols],[])],s=n(o).filter(t=>!e.hasSelectionAs(t,t)).map(e=>`${r}.${e}`);return e.select(s)}({builder:o,tableNode:t})});for(const n of t.childNodes)this._buildJoinsForNode({builder:e,tableNode:n,userSelectQueries:r})}_buildSelects({builder:e,tableNode:t,userSelectQueries:r}){const{selections:n,internalSelections:s}=function e({builder:t,tableNode:r,userSelectQueries:n}){const s=n.get(r),i=s.findAllSelections(),a=function(e){return 0===e.length||e.some(h)}(i);let l=[],u=[];if(r.parentNode&&(l=function({userSelections:e,tableNode:t}){return e.filter(d).map(e=>new o(t.alias,e.name,t.getColumnAliasForColumn(e.name)))}({userSelections:i,tableNode:r}),a&&r.relation.isObjectionManyToManyRelation)){const e=function({tableNode:e}){return e.relation.joinTableExtras.map(t=>new o(e.joinTableAlias,t.joinTableCol,e.getColumnAliasForColumn(t.aliasCol)))}({tableNode:r});l=l.concat(e)}if(a){const e=function({builder:e,tableNode:t}){const r=e.tableNameFor(t.modelClass),n=t.modelClass.tableMetadata({table:r});if(!n)throw new Error(\"table metadata has not been fetched. Are you trying to call toKnexQuery() for a withGraphJoined query? To make sure the table metadata is fetched see the objection.initialize function.\");return n.columns.map(e=>new o(t.alias,e,t.getColumnAliasForColumn(e)))}({builder:t,tableNode:r});l=e.concat(l)}else{const e=function({tableNode:e}){return e.modelClass.getIdColumnArray().map(t=>new o(e.alias,t,e.getColumnAliasForColumn(t)))}({tableNode:r});for(const t of e)s.hasSelectionAs(t.column,t.column)||(l.push(t),u.push(t))}for(const o of r.childNodes){const r=e({builder:t,tableNode:o,userSelectQueries:n});l=l.concat(r.selections),u=u.concat(r.internalSelections)}return{selections:l,internalSelections:u}}({builder:e,tableNode:t,userSelectQueries:r});for(const e of n)p(t.modelClass,e.name);this.internalSelections=s,e.select(function(e){return e.map(e=>{const t=`${e.table}.${e.column}`;return`${t} as ${e.alias}`})}(n))}}}},function(e,t,r){\"use strict\";const{ValidationErrorType:n}=r(5),o=64;e.exports={ID_LENGTH_LIMIT:63,RELATION_RECURSION_LIMIT:o,forEachChildExpression:function(e,t,r){if(e.node.$allRecursive||e.maxRecursionDepth>o)throw t.createValidationError({type:n.RelationExpression,message:`recursion depth of eager expression ${e.toString()} too big for JoinEagerAlgorithm`});e.forEachChildExpression(t,r)}}},function(e,t,r){\"use strict\";const n=r(2),{EagerOperation:o}=r(57),{isMsSql:s,isOracle:i,isSqlite:a}=r(3),{asArray:l,flatten:u,chunk:c}=r(0),{ValidationErrorType:h}=r(5),{createModifier:d}=r(16),{RelationDoesNotExistError:p}=r(89),{RelationOwner:f}=r(98);function _(e,t){const r=[];try{t.forEachChildExpression(e,(e,t)=>{r.push({childExpression:e,relation:t})})}catch(t){if(t instanceof p)throw e.createValidationError({type:h.RelationExpression,message:`unknown relation \"${t.relationName}\" in an eager expression`});throw t}return r}function E(e,t){const r=[];for(const n of e){const e=n[t.node.$name];if(e)if(Array.isArray(e))for(const t of e)r.push(t);else r.push(e)}return r}e.exports={WhereInEagerOperation:class extends o{constructor(e,t){super(e,t),this.relationsToFetch=[],this.omitProps=[]}batchSize(e){return this.graphOptions.maxBatchSize?this.graphOptions.maxBatchSize:s(e)?2e3:i(e)?1e3:a(e)?999:1e4}onBuild(e){const t=_(e.modelClass(),this.buildFinalExpression()),{selectionsToAdd:r,selectedProps:n}=function(e,t){const r=[],n=[];for(const{relation:o}of t){const t=o.ownerProp;for(let o=0,s=t.size;o<s;++o){const s=t.ref(e,o).fullColumn(e),i=t.props[o],a=t.cols[o];e.hasSelectionAs(s,a)||-1!==r.indexOf(s)||(n.push(i),r.push(s))}}return{selectionsToAdd:r,selectedProps:n}}(e,t);r.length&&e.select(r),this.relationsToFetch=t,this.omitProps=n}async onAfter2(e,t){const r=e.resultModelClass();if(!t)return t;const o=l(t);if(!(o.length&&o[0]instanceof r))return t;await n.map(this.relationsToFetch,t=>this.fetchRelation(e,o,t.relation,t.childExpression),{concurrency:r.getConcurrency(e.unsafeKnex())});const s=e.internalOptions();if(!this.omitProps.length||s.keepImplicitJoinProps)return t;for(let e=0,n=t.length;e<n;++e){const n=t[e];for(let e=0,t=this.omitProps.length;e<t;++e)r.omitImpl(n,this.omitProps[e])}return t}async fetchRelation(e,t,r,o){const s=e.resultModelClass(),i=this.batchSize(e.knex()),a=c(t,i),l=await n.map(a,t=>this.fetchRelationBatch(e,t,r,o),{concurrency:s.getConcurrency(e.unsafeKnex())});return u(l)}fetchRelationBatch(e,t,r,n){if(this.shouldSkipFetched(t,r,n))return this.createSkippedQuery(e,t,r,n);const o=this.createRelationQuery(e,r,n),s=r.find(o,f.create(t));s.alwaysReturnArray=!0,s.assignResultToOwner=!0,s.relationProperty=n.node.$name,o.addOperation(s,[]);for(const t of n.node.$modify){const n=d({modifier:t,modelClass:r.relatedModelClass,modifiers:this.buildFinalModifiers(e)});try{n(o)}catch(n){const o=e.modelClass();throw n instanceof o.ModifierNotFoundError?o.createValidationError({type:h.RelationExpression,message:`could not find modifier \"${t}\" for relation \"${r.name}\"`}):n}}return o}shouldSkipFetched(e,t,r){if(!this.graphOptions.skipFetched)return!1;if(e.some(e=>void 0===e[r.node.$name]))return!1;const n=_(t.relatedModelClass,r),o=E(e,r);for(const{relation:e}of n){const{ownerProp:t}=e;for(let e=0,r=t.size;e<r;++e){const r=t.props[e];for(const e of o)if(void 0===e[r])return!1}}return!0}createSkippedQuery(e,t,r,n){const o=E(t,n);return r.relatedModelClass.query().childQueryOf(e).findOptions({dontCallFindHooks:!0}).withGraphFetched(n,this.graphOptions).resolve(o)}createRelationQuery(e,t,r){return t.relatedModelClass.query().childQueryOf(e).withGraphFetched(r,this.graphOptions).modifiers(this.buildFinalModifiers(e))}clone(){const e=super.clone();return e.relationsToFetch=this.relationsToFetch.slice(),e.omitProps=this.omitProps.slice(),e}}}},function(e,t,r){\"use strict\";const{isObject:n,asArray:o,asSingle:s,uniqBy:i}=r(0),{normalizeIds:a}=r(17),l={Models:\"Models\",Reference:\"Reference\",QueryBuilder:\"QueryBuilder\",Identifiers:\"Identifiers\"};class u{constructor(e){this.owner=e,this.type=function(e){return c(e)||(t=e,Array.isArray(t)&&c(t[0]))?l.Models:function(e){return Array.isArray(e)&&function(e){return n(e)&&!!e.isObjectionReferenceBuilder}(e[0])}(e)?l.Reference:h(e)?l.QueryBuilder:l.Identifiers;var t}(e)}static create(e){return new u(e)}static createParentReference(e,t){return this.create(t.ownerProp.refs(function(e){e=e.parentQuery();for(;e.isPartial()&&e.parentQuery();)e=e.parentQuery();return e}(e)))}get isModels(){return this.type===l.Models}get isReference(){return this.type===l.Reference}get isQueryBuilder(){return this.type===l.QueryBuilder}get isIdentifiers(){return this.type===l.Identifiers}get modelArray(){return o(this.owner)}get model(){return s(this.owner)}get reference(){return this.owner}get queryBuilder(){return this.owner}get identifiers(){return this.owner}buildFindQuery(e,t,r){if(this.isReference)r.forEach((t,r)=>{e.where(t,this.reference[r])});else if(this.isModels||this.isIdentifiers||this.isQueryBuilder){const n=this.getProps(t);n?e.whereInComposite(r,n):e.resolve([])}else e.resolve([]);return e}getProps(e,t=e.ownerProp){return this.isModels?this._getPropsFromModels(t):this.isIdentifiers?this._getPropsFromIdentifiers(e,t):this.isQueryBuilder?this._getPropsFromQuery(e,t):void 0}getSplitProps(e,t,r=t.ownerProp){const n=this.getProps(t,t.ownerProp);return h(n)?1===r.size?[[n]]:[Array.from({length:r.size}).map((t,o)=>n.clone().clearSelect().select(r.ref(e,o)))]:n}getNormalizedIdentifiers(e){return a(this.identifiers,e,{arrayOutput:!0})}_getPropsFromModels(e){const t=this.modelArray.map(t=>e.getProps(t));return function e(t){for(let r=0,n=t.length;r<n;++r){const n=t[r];if(Array.isArray(n)){if(e(n))return!0}else if(null!=n)return!0}return!1}(t)?i(t,d):null}_getPropsFromIdentifiers(e,t){const r=this.getNormalizedIdentifiers(t);if((n=t).modelClass.getIdRelationProperty().props.every((e,t)=>e===n.props[t]))return r;{const n=e.ownerModelClass.query();return n.findByIds(r),n.select(t.refs(n)),n}var n}_getPropsFromQuery(e,t){const r=this.queryBuilder.clone();return function(e,t){return e.modelClass().getTableName()===t.ownerModelClass.getTableName()}(r,e)&&(r.clearSelect(),r.select(t.refs(r))),r}}function c(e){return n(e)&&!!e.$isObjectionModel}function h(e){return n(e)&&!!e.isObjectionQueryBuilder}function d(e){return e.join(\",\")}e.exports={RelationOwner:u}},function(e,t,r){\"use strict\";const{DelegateOperation:n}=r(24),{InsertOperation:o}=r(23),{GraphUpsert:s}=r(100);e.exports={InsertGraphOperation:class extends n{constructor(e,t=null){if(super(e,t),!this.delegate.is(o))throw new Error(\"Invalid delegate\");Object.assign(this.delegate.modelOptions,s.modelOptions),this.upsertOptions=t.opt||{},this.upsert=null}get models(){return this.delegate.models}get isArray(){return this.delegate.isArray}get relation(){return this.delegate.relation}onAdd(e,t){const r=super.onAdd(e,t);return this.upsert=new s({objects:this.models,rootModelClass:e.modelClass(),upsertOptions:Object.assign({},this.upsertOptions,{noUpdate:!0,noDelete:!0,noUnrelate:!0,insertMissing:!0})}),e.resolve([]),r}onBefore1(e,t){return t}onBefore2(e,t){return this.relation?this.relation.executeBeforeInsert(this.models,e.context(),t):t}onBefore3(e,t){return t}onBuild(){}onBuildKnex(){}async onAfter1(e,...t){return await this.upsert.run(e),await super.onAfter1(e,...t)}onAfter2(){return this.isArray?this.models:this.models[0]||null}clone(){const e=super.clone();return e.upsert=this.upsert,e}}}},function(e,t,r){\"use strict\";const{ModelGraph:n}=r(101),{ModelGraphEdge:o}=r(25),{createNotModelError:s}=r(58),{GraphFetcher:i}=r(220),{GraphInsert:a}=r(221),{GraphPatch:l}=r(224),{GraphDelete:u}=r(226),{GraphRecursiveUpsert:c}=r(228),{GraphOptions:h}=r(102),{ValidationErrorType:d}=r(5),{RelationExpression:p}=r(9),{GraphNodeDbExistence:f}=r(230),{GraphData:_}=r(103),{uniqBy:E,asArray:m,isObject:R}=r(0);class O{constructor({rootModelClass:e,objects:t,upsertOptions:r}){!function(e,t){m(t).forEach(t=>{if(!R(t))throw s(e,t)})}(e,t),this.objects=e.ensureModelArray(t,O.modelOptions),this.isArray=Array.isArray(t),this.upsertOpt=r}static get modelOptions(){return{skipValidation:!0}}run(e){const t=e.modelClass(),r=new h(this.upsertOpt),s=n.create(t,this.objects);return function(e){for(const t of e.nodes)t.parentEdge&&t.parentEdge.relation&&t.isDbReference&&t.parentEdge.relation.setRelateProp(t.obj,m(t.dbReference))}(s),async function(e,t,r){const o=await function(e,t,r){return t.isInsertOnly()?Promise.resolve(n.createEmpty()):i.fetchCurrentGraph({builder:e,graph:r,graphOptions:t})}(e,t,r),s=await f.create({builder:e,graph:r,graphOptions:t,currentGraph:o});return new _({graph:r,currentGraph:o,graphOptions:t,nodeDbExistence:s})}(e,r,s).then(function(e){return t=>(function(e,t){const{graphOptions:r,currentGraph:n,graph:o}=e;for(const s of o.nodes)if(s.obj.$hasId()&&!r.shouldInsertIgnoreDisable(s,e)&&!r.shouldRelateIgnoreDisable(s,e)&&!n.nodeForNode(s))throw s.parentNode?s.modelClass.createNotFoundError(t.context(),{message:`model (id=${s.obj.$id()}) is not a child of model (id=${s.parentNode.obj.$id()}). If you want to relate it, use the relate option. If you want to insert it with an id, use the insertMissing option`,dataPath:s.dataPath}):s.modelClass.createNotFoundError(t.context(),{message:`root model (id=${s.obj.$id()}) does not exist. If you want to insert it with an id, use the insertMissing option`,dataPath:s.dataPath})}(t,e),function(e,t){const{graph:r}=e,n=t.allowedGraphExpression();if(n){const e=r.nodes.filter(e=>!e.parentEdge).map(e=>e.obj),o=p.fromModelGraph(e);if(!n.isSubExpression(o))throw t.modelClass().createValidationError({type:d.UnallowedRelation,message:\"trying to upsert an unallowed relation\"})}}(t,e),function(e,t){const{graph:r,graphOptions:n}=e;if(n.allowRefs())return;if(r.edges.some(e=>e.type===o.Type.Reference))throw t.modelClass().createValidationError({type:d.InvalidGraph,message:\"#ref references are not allowed in a graph by default. see the allowRefs insert/upsert graph option\"})}(t,e),t.graphOptions.isInsertOnly()&&function(e){const{graph:t,graphOptions:r}=e;for(const n of t.nodes)if(r.shouldRelate(n,e)&&n.parentEdge.relation.isObjectionHasManyRelation)throw new Error(\"You cannot relate HasManyRelation or HasOneRelation using insertGraph, because those require update operations. Consider using upsertGraph instead.\")}(t),t)}(e)).then(e=>(function(e){g(y(e.graph.nodes.filter(t=>!e.currentGraph.nodeForNode(t)&&!e.graphOptions.shouldInsertIgnoreDisable(t,e))),e.graph)}(e),e.graphOptions.isInsertOnly()||function(e){const{graph:t,currentGraph:r}=e,n=y(r.nodes.filter(e=>!t.nodeForNode(e))),o=n.filter(e=>{if(!e.parentNode)return!1;const{relation:r}=e.parentEdge,n=t.nodeForNode(e.parentNode);return!!n&&void 0===n.obj[r.name]});g(n,r),A(new Set(o),r)}(e),e)).then(function(e){return t=>{const r=t.graphOptions.isInsertOnly()?[a]:[u,a,l,c];return r.reduce((r,n)=>{const o=new n(t),s=o.createActions();return r.then(()=>(function(e,t){return t.reduce((t,r)=>t.then(()=>r.run(e)),Promise.resolve())})(e,s))},Promise.resolve())}}(e)).then((E=this.objects,R=this.isArray,()=>R?E:E[0]));var E,R}}function y(e){const t=new Set(e);return E(e.filter(e=>{let r=e.parentNode;for(;r;){if(t.has(r))return!1;r=r.parentNode}return!0}))}function g(e,t){A(new Set(e.reduce((e,t)=>[...e,...t.descendantRelationNodes],[])),t)}function A(e,t){const r=new Set;for(const t of e)for(const n of t.edges){const o=n.getOtherNode(t);e.has(o)||(o.removeEdge(n),r.add(n))}return t.nodes=t.nodes.filter(t=>!e.has(t)),t.edges=t.edges.filter(e=>!r.has(e)),t}e.exports={GraphUpsert:O}},function(e,t,r){\"use strict\";const{ModelGraphBuilder:n}=r(58),o={};class s{constructor(e,t){this.nodes=e,this.edges=t,this._nodesByObjects=o,this._nodesByIdPathKeys=o}static create(e,t){const r=n.buildGraph(e,t);return new s(r.nodes,r.edges)}static createEmpty(){return new s([],[])}get rootObjects(){return this.nodes.filter(e=>!e.parentEdge).map(e=>e.obj)}nodeForObject(e){return e?(this._nodesByObjects===o&&(this._nodesByObjects=function(e){const t=new Map;for(const r of e)t.set(r.obj,r);return t}(this.nodes)),this._nodesByObjects.get(e)||null):null}nodeForNode(e){return e?(this._nodesByIdPathKeys===o&&(this._nodesByIdPathKeys=function(e){const t=new Map;for(const r of e){const e=r.idPathKey;null!==e&&t.set(e,r)}return t}(this.nodes)),this._nodesByIdPathKeys.get(e.idPathKey)||null):null}}e.exports={ModelGraph:s}},function(e,t,r){\"use strict\";const n=\"noRelate\",o=\"noUnrelate\",s=\"noInsert\",i=\"noUpdate\",a=\"noDelete\",l=\"update\",u=\"relate\",c=\"unrelate\",h=\"insertMissing\",d=\"fetchStrategy\",p=\"allowRefs\",f={OnlyIdentifiers:\"OnlyIdentifiers\",Everything:\"Everything\",OnlyNeeded:\"OnlyNeeded\"};class _{constructor(e){this.options=e instanceof _?e.options:e}isFetchStrategy(e){if(!f[e])throw new Error(`unknown strategy \"${e}\"`);return this.options[d]?this.options[d]===e:e===f.OnlyNeeded}isInsertOnly(){return[a,i,o,h].every(e=>!0===this.options[e])}shouldRelateIgnoreDisable(e,t){return!(!e.isReference&&!e.isDbReference)||this._hasOption(e,u)&&!E(e,t)&&!!e.parentEdge&&!!e.parentEdge.relation&&e.parentEdge.relation.hasRelateProp(e.obj)&&t.nodeDbExistence.doesNodeExistInDb(e)}shouldRelate(e,t){return!this._hasOption(e,n)&&this.shouldRelateIgnoreDisable(e,t)}shouldInsertIgnoreDisable(e,t){return!E(e,t)&&!this.shouldRelateIgnoreDisable(e,t)&&(!e.hasId||this.shouldInsertMissing(e))}shouldInsert(e,t){return!this._hasOption(e,s)&&this.shouldInsertIgnoreDisable(e,t)}shouldInsertMissing(e){return this._hasOption(e,h)}shouldPatchOrUpdateIgnoreDisable(e,t){return!!this.shouldRelate(e,t)||!!E(e,t)}shouldPatch(e,t){return this.shouldPatchOrUpdateIgnoreDisable(e,t)&&!this._hasOption(e,i)&&!this._hasOption(e,l)}shouldUpdate(e,t){return this.shouldPatchOrUpdateIgnoreDisable(e,t)&&!this._hasOption(e,i)&&this._hasOption(e,l)}shouldUnrelateIgnoreDisable(e){return this._hasOption(e,c)}shouldUnrelate(e,t){return!m(e,t.graph)&&!this._hasOption(e,o)&&this.shouldUnrelateIgnoreDisable(e)}shouldDelete(e,t){return!m(e,t.graph)&&!this._hasOption(e,a)&&!this.shouldUnrelateIgnoreDisable(e)}shouldInsertOrRelate(e,t){return this.shouldInsert(e,t)||this.shouldRelate(e,t)}shouldDeleteOrUnrelate(e,t){return this.shouldDelete(e,t)||this.shouldUnrelate(e,t)}allowRefs(){return!!this.options[p]}rebasedOptions(e){const t={},r=e.relationPathKey;for(const e of Object.keys(this.options)){const n=this.options[e];Array.isArray(n)?t[e]=n.filter(e=>e.startsWith(r)).map(e=>e.slice(r.length+1)).filter(e=>!!e):t[e]=n}return new _(t)}_hasOption(e,t){const r=this.options[t];if(Array.isArray(r))return-1!==r.indexOf(e.relationPathKey);if(\"boolean\"==typeof r)return r;if(void 0===r)return!1;throw new Error(`expected ${t} option value \"${r}\" to be an instance of boolean or array of strings`)}}function E(e,t){return t&&e?t.currentGraph.nodeForNode(e):null}function m(e,t){return t&&e?t.nodeForNode(e):null}e.exports={GraphOptions:_,FetchStrategy:f}},function(e,t,r){\"use strict\";e.exports={GraphData:class{constructor({graph:e,currentGraph:t,graphOptions:r,nodeDbExistence:n}){this.graph=e,this.currentGraph=t,this.graphOptions=r,this.nodeDbExistence=n}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1),{GraphUpsert:o}=r(100),{RelationFindOperation:s}=r(59);e.exports={UpsertGraphOperation:class extends n{constructor(e,t){super(e,Object.assign({},t,{upsertOptions:{}})),this.upsertOptions=t.upsertOptions||{},this.upsert=null}get models(){return this.upsert.objects}get isArray(){return this.upsert.isArray}onAdd(e,t){const[r]=t;return this.upsert=new o({objects:r,rootModelClass:e.modelClass(),upsertOptions:this.upsertOptions}),e.resolve([]),!0}onAfter1(e){if(function(e){return e.has(/where/)||e.has(s)}(e))throw new Error(\"upsertGraph query should contain no other query builder calls like `findById`, `where` or `$relatedQuery` that would affect the SQL. They have no effect.\");return this.upsert.run(e)}clone(){const e=super.clone();return e.upsert=this.upsert,e}}}},function(e,t,r){\"use strict\";e.exports={NotFoundError:class extends Error{constructor(e={}){super(e.message||\"NotFoundError\"),this.type=\"NotFound\",this.name=this.constructor.name,this.data=e,this.statusCode=404}}}},function(e,t,r){\"use strict\";const{HasManyRelation:n}=r(61);e.exports={HasOneRelation:class extends n{isOneToOne(){return!0}}}},function(e,t,r){\"use strict\";const{DeleteOperation:n}=r(35);e.exports={RelationDeleteOperation:class extends n{constructor(e,t){super(e,t),this.relation=t.relation,this.owner=t.owner}onBuild(e){super.onBuild(e),this.relation.findQuery(e,this.owner)}}}},function(e,t,r){\"use strict\";const{isPostgres:n}=r(3),{normalizeIds:o}=r(17),{RelateOperation:s}=r(36);e.exports={ManyToManyRelateOperation:class extends s{onAdd(e,t){return this.input=t[0],this.ids=o(t[0],this.relation.relatedProp),function(e,t,r){const{isModels:o,isIdentifiers:s,isQueryBuilder:i}=t,{ownerProp:a}=r,l=o&&1===t.modelArray.length,u=s&&1===t.getNormalizedIdentifiers(a).length;if(n(e.unsafeKnex())){if(!o&&!s&&!i)throw new Error(\"Parent must be a list of identifiers or a list of models when relating a ManyToManyRelation\")}else if(!l&&!u&&!i)throw new Error([\"Can only relate items for one parent at a time in case of ManyToManyRelation.\",\"Otherwise multiple insert queries would need to be created.\",\"If you need to relate items for multiple parents, simply loop through them.\",\"That's the most performant way.\"].join(\" \"))}(e,this.owner,this.relation),!0}queryExecutor(e){const t=this.relation.getJoinModelClass(e.knex()),r=this.owner.getSplitProps(e,this.relation),n=[];for(const e of r)for(const r of this.ids)n.push(t.fromJson(this.relation.createJoinModel(e,r)));return t.query().childQueryOf(e).modify(t=>{this.opt.dontCopyReturning||t.copyFrom(e,/returning/)}).runBefore((e,t)=>this.relation.executeJoinTableBeforeInsert(n,t.context(),null)).insert(n).runAfter(e=>Array.isArray(e)?e.length:1)}}}},function(e,t,r){\"use strict\";const{UnrelateOperation:n}=r(37);e.exports={ManyToManyUnrelateOperationBase:class extends n{queryExecutor(e){const t=this.relation.getJoinModelClass(e.knex()).query().childQueryOf(e).delete();return this.applyModifyFilterForJoinTable(t)}applyModifyFilterForRelatedTable(e){throw new Error(\"not implemented\")}applyModifyFilterForJoinTable(e){throw new Error(\"not implemented\")}}}},function(e,t,r){\"use strict\";const{UpdateOperation:n}=r(22);e.exports={ManyToManyUpdateOperationBase:class extends n{constructor(e,t){super(e,t),this.relation=t.relation,this.owner=t.owner,this.hasExtraProps=!1,this.joinTablePatch={},this.joinTablePatchFilterQuery=null}onAdd(e,t){const r=t[0];for(const e of this.relation.joinTableExtras)e.aliasProp in r&&(this.hasExtraProps=!0,this.joinTablePatch[e.joinTableProp]=r[e.aliasProp]);const n=super.onAdd(e,t);return this.hasExtraProps&&this.relation.omitExtraProps([this.model]),n}async onAfter1(e,t){if(this.hasExtraProps){const r=this.relation.getJoinModelClass(e.knex()).query().childQueryOf(e).patch(this.joinTablePatch);return await this.applyModifyFilterForJoinTable(r),t}return t}applyModifyFilterForRelatedTable(e){throw new Error(\"not implemented\")}applyModifyFilterForJoinTable(e){throw new Error(\"not implemented\")}clone(){const e=super.clone();return e.hasExtraProps=this.hasExtraProps,e.joinTablePatch=this.joinTablePatch,e.joinTablePatchFilterQuery=this.joinTablePatchFilterQuery,e}}}},function(e,t,r){\"use strict\";const{DeleteOperation:n}=r(35);e.exports={ManyToManyDeleteOperationBase:class extends n{constructor(e,t){super(e,t),this.relation=t.relation,this.owner=t.owner}applyModifyFilterForRelatedTable(e){throw new Error(\"not implemented\")}applyModifyFilterForJoinTable(e){throw new Error(\"not implemented\")}}}},function(e,t,r){\"use strict\";const{Relation:n}=r(39),{BelongsToOneInsertOperation:o}=r(260),{BelongsToOneDeleteOperation:s}=r(261),{BelongsToOneRelateOperation:i}=r(113),{BelongsToOneUnrelateOperation:a}=r(262);class l extends n{isOneToOne(){return!0}insert(e,t){return new o(\"insert\",{relation:this,owner:t})}delete(e,t){return new s(\"delete\",{relation:this,owner:t})}relate(e,t){return new i(\"relate\",{relation:this,owner:t})}unrelate(e,t){return new a(\"unrelate\",{relation:this,owner:t})}}Object.defineProperties(l.prototype,{isObjectionBelongsToOneRelation:{enumerable:!1,writable:!1,value:!0}}),e.exports={BelongsToOneRelation:l}},function(e,t,r){\"use strict\";const{normalizeIds:n}=r(17),{RelateOperation:o}=r(36);e.exports={BelongsToOneRelateOperation:class extends o{onAdd(e,t){return this.input=t[0],this.ids=n(t[0],this.relation.relatedProp,{arrayOutput:!0}),function(e){if(e.length>1)throw new Error(\"can only relate one model to a BelongsToOneRelation\")}(this.ids),!0}queryExecutor(e){const t={},r=this.relation.ownerProp;r.forEach(e=>{const n=this.ids[0][e];if(this.owner.isModels)for(const t of this.owner.modelArray)r.setProp(t,e,n);r.patch(t,e,n)});const n=this.relation.ownerModelClass.getIdRelationProperty(),o=this.owner.getProps(this.relation,n);return this.relation.ownerModelClass.query().childQueryOf(e).patch(t).whereInComposite(n.refs(e),o)}}}},function(e,t,r){\"use strict\";const{ManyToManyRelation:n}=r(66);e.exports={HasOneThroughRelation:class extends n{isOneToOne(){return!0}}}},function(e,t,r){\"use strict\";const n=r(2),{isFunction:o}=r(0);function s(){if(arguments.length<2)return Promise.reject(new Error(\"objection.transaction: provide at least one Model class to bind to the transaction or a knex instance\"));let e=Array.from(arguments);if(!i(e[0])&&o(e[0].transaction)){let t=e[0];return e=e.slice(1),t.transaction.apply(t,e)}{let t,r=e[e.length-1],o=e.slice(0,e.length-1);for(t=0;t<o.length;++t)if(!i(o[t]))return Promise.reject(new Error(\"objection.transaction: all but the last argument should be Model subclasses\"));let s=o[0].knex();for(t=0;t<o.length;++t)if(o[t].knex()!==s)return Promise.reject(new Error(\"objection.transaction: all Model subclasses must be bound to the same database\"));return s.transaction(e=>{let t=new Array(o.length+1);for(let r=0;r<o.length;++r)t[r]=o[r].bindTransaction(e);return t[t.length-1]=e,n.try(()=>r.apply(e,t))})}}function i(e){return o(e)&&e.isObjectionModelClass}s.start=function(e){let t=e;return i(e)&&(t=e.knex()),t&&o(t.transaction)?new Promise((e,r)=>{t.transaction(t=>{e(t)}).catch(e=>{r(e)})}):Promise.reject(new Error(\"objection.transaction.start: first argument must be a model class or a knex instance\"))},e.exports={transaction:s}},function(e,t,r){r(117)},function(e,t,r){\"use strict\";const{wrapError:n,...o}=r(68),{Model:s}=r(69),{QueryBuilder:i}=r(88),{QueryBuilderBase:a}=r(91),{QueryBuilderOperation:l}=r(1),{RelationExpression:u}=r(9),{ValidationError:c}=r(5),{NotFoundError:h}=r(105),{AjvValidator:d}=r(78),{Validator:p}=r(79),{Relation:f}=r(39),{HasOneRelation:_}=r(106),{HasManyRelation:E}=r(61),{BelongsToOneRelation:m}=r(112),{HasOneThroughRelation:R}=r(114),{ManyToManyRelation:O}=r(66),{transaction:y}=r(115),{initialize:g}=r(267),{snakeCaseMappers:A,knexSnakeCaseMappers:v,knexIdentifierMapping:N}=r(63),{compose:b,mixin:T}=r(64),{ref:w}=r(31),{val:P}=r(268),{raw:I}=r(29),{fn:S}=r(77),{inherit:C}=r(62),{deprecate:x}=r(12);function F(){}function D(...e){i.init(this,...e)}function M(...e){p.init(this,...e)}function j(...e){d.init(this,...e)}C(F,s),C(D,i),C(M,p),C(j,d),F.QueryBuilder=D,e.exports={Model:F,QueryBuilder:D,QueryBuilderBase:a,QueryBuilderOperation:l,RelationExpression:u,ValidationError:c,NotFoundError:h,AjvValidator:j,Validator:M,Relation:f,HasOneRelation:_,HasManyRelation:E,BelongsToOneRelation:m,HasOneThroughRelation:R,ManyToManyRelation:O,transaction:y,initialize:g,compose:b,mixin:T,ref:w,val:P,raw:I,fn:S,get lit(){return x(\"`lit` is deprecated. Use `val` instead. `lit` will be removed in 3.0\"),P},snakeCaseMappers:A,knexSnakeCaseMappers:v,knexIdentifierMapping:N,...o}},function(e,t,r){const n=r(119),o=r(129),s=r(135),i=r(141);e.exports={postgres:n,sqlite:o,mysql:s,mssql:i}},function(e,t,r){\"use strict\";const n=r(10),o=r(42).postgres;e.exports={error:n,parse:e=>\"string\"==typeof e.code&&5===e.code.length&&o.has(e.code)&&\"internalQuery\"in e&&\"table\"in e?{nativeError:e,client:\"postgres\"}:null,subclassParsers:[r(123),r(128)]}},function(e,t,r){\"use strict\";e.exports=new Set([\"000\",\"00000\",\"01000\",\"0100C\",\"01008\",\"01003\",\"01007\",\"01006\",\"01004\",\"01P01\",\"02000\",\"02001\",\"03000\",\"08000\",\"08003\",\"08006\",\"08001\",\"08004\",\"08007\",\"08P01\",\"09000\",\"0A000\",\"0B000\",\"0F000\",\"0F001\",\"0L000\",\"0LP01\",\"0P000\",\"0Z000\",\"0Z002\",\"20000\",\"21000\",\"22000\",\"2202E\",\"22021\",\"22008\",\"22012\",\"22005\",\"2200B\",\"22022\",\"22015\",\"2201E\",\"22014\",\"22016\",\"2201F\",\"2201G\",\"22018\",\"22007\",\"22019\",\"2200D\",\"22025\",\"22P06\",\"22010\",\"22023\",\"2201B\",\"2201W\",\"2201X\",\"2202H\",\"2202G\",\"22009\",\"2200C\",\"2200G\",\"22004\",\"22002\",\"22003\",\"22026\",\"22001\",\"22011\",\"22027\",\"22024\",\"2200F\",\"22P01\",\"22P02\",\"22P03\",\"22P04\",\"22P05\",\"2200L\",\"2200M\",\"2200N\",\"2200S\",\"2200T\",\"23000\",\"23001\",\"23502\",\"23503\",\"23505\",\"23514\",\"23P01\",\"24000\",\"25000\",\"25001\",\"25002\",\"25008\",\"25003\",\"25004\",\"25005\",\"25006\",\"25007\",\"25P01\",\"25P02\",\"25P03\",\"26000\",\"27000\",\"28000\",\"28P01\",\"2B000\",\"2BP01\",\"2D000\",\"2F000\",\"2F005\",\"2F002\",\"2F003\",\"2F004\",\"34000\",\"38000\",\"38001\",\"38002\",\"38003\",\"38004\",\"39000\",\"39001\",\"39004\",\"39P01\",\"39P02\",\"39P03\",\"3B000\",\"3B001\",\"3D000\",\"3F000\",\"40000\",\"40002\",\"40001\",\"40003\",\"40P01\",\"42000\",\"42601\",\"42501\",\"42846\",\"42803\",\"42P20\",\"42P19\",\"42830\",\"42602\",\"42622\",\"42939\",\"42804\",\"42P18\",\"42P21\",\"42P22\",\"42809\",\"42703\",\"42883\",\"42P01\",\"42P02\",\"42704\",\"42701\",\"42P03\",\"42P04\",\"42723\",\"42P05\",\"42P06\",\"42P07\",\"42712\",\"42710\",\"42702\",\"42725\",\"42P08\",\"42P09\",\"42P10\",\"42611\",\"42P11\",\"42P12\",\"42P13\",\"42P14\",\"42P15\",\"42P16\",\"42P17\",\"44000\",\"53000\",\"53100\",\"53200\",\"53300\",\"53400\",\"54000\",\"54001\",\"54011\",\"54023\",\"55000\",\"55006\",\"55P02\",\"55P03\",\"57000\",\"57014\",\"57P01\",\"57P02\",\"57P03\",\"57P04\",\"58000\",\"58030\",\"58P01\",\"58P02\",\"72000\",\"F0000\",\"F0001\",\"HV000\",\"HV005\",\"HV002\",\"HV010\",\"HV021\",\"HV024\",\"HV007\",\"HV008\",\"HV004\",\"HV006\",\"HV091\",\"HV00B\",\"HV00C\",\"HV00D\",\"HV090\",\"HV00A\",\"HV009\",\"HV014\",\"HV001\",\"HV00P\",\"HV00J\",\"HV00K\",\"HV00Q\",\"HV00R\",\"HV00L\",\"HV00M\",\"HV00N\",\"P0000\",\"P0001\",\"P0002\",\"P0003\",\"P0004\",\"XX000\",\"XX001\",\"XX002\"])},function(e,t,r){\"use strict\";e.exports=new Set([\"ER_HASHCHK\",\"ER_NISAMCHK\",\"ER_NO\",\"ER_YES\",\"ER_YES\",\"ER_CANT_CREATE_FILE\",\"ER_CANT_CREATE_TABLE\",\"ER_CANT_CREATE_DB\",\"ER_DB_CREATE_EXISTS\",\"ER_DB_DROP_EXISTS\",\"ER_DB_DROP_DELETE\",\"ER_DB_DROP_RMDIR\",\"ER_CANT_DELETE_FILE\",\"ER_CANT_FIND_SYSTEM_REC\",\"ER_CANT_GET_STAT\",\"ER_CANT_GET_WD\",\"ER_CANT_LOCK\",\"ER_CANT_OPEN_FILE\",\"ER_FILE_NOT_FOUND\",\"ER_CANT_READ_DIR\",\"ER_CANT_SET_WD\",\"ER_CHECKREAD\",\"ER_DISK_FULL\",\"ER_DUP_KEY\",\"ER_ERROR_ON_CLOSE\",\"ER_ERROR_ON_READ\",\"ER_ERROR_ON_RENAME\",\"ER_ERROR_ON_WRITE\",\"ER_FILE_USED\",\"ER_FILSORT_ABORT\",\"ER_FORM_NOT_FOUND\",\"ER_GET_ERRNO\",\"ER_ILLEGAL_HA\",\"ER_KEY_NOT_FOUND\",\"ER_NOT_FORM_FILE\",\"ER_NOT_KEYFILE\",\"ER_OLD_KEYFILE\",\"ER_OPEN_AS_READONLY\",\"ER_OUTOFMEMORY\",\"ER_OUT_OF_SORTMEMORY\",\"ER_UNEXPECTED_EOF\",\"ER_CON_COUNT_ERROR\",\"ER_OUT_OF_RESOURCES\",\"ER_BAD_HOST_ERROR\",\"ER_HANDSHAKE_ERROR\",\"ER_DBACCESS_DENIED_ERROR\",\"ER_ACCESS_DENIED_ERROR\",\"ER_NO_DB_ERROR\",\"ER_UNKNOWN_COM_ERROR\",\"ER_BAD_NULL_ERROR\",\"ER_BAD_DB_ERROR\",\"ER_TABLE_EXISTS_ERROR\",\"ER_BAD_TABLE_ERROR\",\"ER_NON_UNIQ_ERROR\",\"ER_SERVER_SHUTDOWN\",\"ER_BAD_FIELD_ERROR\",\"ER_WRONG_FIELD_WITH_GROUP\",\"ER_WRONG_GROUP_FIELD\",\"ER_WRONG_SUM_SELECT\",\"ER_WRONG_VALUE_COUNT\",\"ER_TOO_LONG_IDENT\",\"ER_DUP_FIELDNAME\",\"ER_DUP_KEYNAME\",\"ER_DUP_ENTRY\",\"ER_DUP_ENTRY_WITH_KEY_NAME\",\"ER_WRONG_FIELD_SPEC\",\"ER_PARSE_ERROR\",\"ER_EMPTY_QUERY\",\"ER_NONUNIQ_TABLE\",\"ER_INVALID_DEFAULT\",\"ER_MULTIPLE_PRI_KEY\",\"ER_TOO_MANY_KEYS\",\"ER_TOO_MANY_KEY_PARTS\",\"ER_TOO_LONG_KEY\",\"ER_KEY_COLUMN_DOES_NOT_EXITS\",\"ER_BLOB_USED_AS_KEY\",\"ER_TOO_BIG_FIELDLENGTH\",\"ER_WRONG_AUTO_KEY\",\"ER_READY\",\"ER_NORMAL_SHUTDOWN\",\"ER_GOT_SIGNAL\",\"ER_SHUTDOWN_COMPLETE\",\"ER_FORCING_CLOSE\",\"ER_IPSOCK_ERROR\",\"ER_NO_SUCH_INDEX\",\"ER_WRONG_FIELD_TERMINATORS\",\"ER_BLOBS_AND_NO_TERMINATED\",\"ER_TEXTFILE_NOT_READABLE\",\"ER_FILE_EXISTS_ERROR\",\"ER_LOAD_INFO\",\"ER_ALTER_INFO\",\"ER_WRONG_SUB_KEY\",\"ER_CANT_REMOVE_ALL_FIELDS\",\"ER_CANT_DROP_FIELD_OR_KEY\",\"ER_INSERT_INFO\",\"ER_UPDATE_TABLE_USED\",\"ER_NO_SUCH_THREAD\",\"ER_KILL_DENIED_ERROR\",\"ER_NO_TABLES_USED\",\"ER_TOO_BIG_SET\",\"ER_NO_UNIQUE_LOGFILE\",\"ER_TABLE_NOT_LOCKED_FOR_WRITE\",\"ER_TABLE_NOT_LOCKED\",\"ER_BLOB_CANT_HAVE_DEFAULT\",\"ER_WRONG_DB_NAME\",\"ER_WRONG_TABLE_NAME\",\"ER_TOO_BIG_SELECT\",\"ER_UNKNOWN_ERROR\",\"ER_UNKNOWN_PROCEDURE\",\"ER_WRONG_PARAMCOUNT_TO_PROCEDURE\",\"ER_WRONG_PARAMETERS_TO_PROCEDURE\",\"ER_UNKNOWN_TABLE\",\"ER_FIELD_SPECIFIED_TWICE\",\"ER_INVALID_GROUP_FUNC_USE\",\"ER_UNSUPPORTED_EXTENSION\",\"ER_TABLE_MUST_HAVE_COLUMNS\",\"ER_RECORD_FILE_FULL\",\"ER_UNKNOWN_CHARACTER_SET\",\"ER_TOO_MANY_TABLES\",\"ER_TOO_MANY_FIELDS\",\"ER_TOO_BIG_ROWSIZE\",\"ER_STACK_OVERRUN\",\"ER_WRONG_OUTER_JOIN\",\"ER_NULL_COLUMN_IN_INDEX\",\"ER_CANT_FIND_UDF\",\"ER_CANT_INITIALIZE_UDF\",\"ER_UDF_NO_PATHS\",\"ER_UDF_EXISTS\",\"ER_CANT_OPEN_LIBRARY\",\"ER_CANT_FIND_DL_ENTRY\",\"ER_FUNCTION_NOT_DEFINED\",\"ER_HOST_IS_BLOCKED\",\"ER_HOST_NOT_PRIVILEGED\",\"ER_PASSWORD_ANONYMOUS_USER\",\"ER_PASSWORD_NOT_ALLOWED\",\"ER_PASSWORD_NO_MATCH\",\"ER_UPDATE_INFO\",\"ER_CANT_CREATE_THREAD\",\"ER_WRONG_VALUE_COUNT_ON_ROW\",\"ER_CANT_REOPEN_TABLE\",\"ER_INVALID_USE_OF_NULL\",\"ER_REGEXP_ERROR\",\"ER_MIX_OF_GROUP_FUNC_AND_FIELDS\",\"ER_NONEXISTING_GRANT\",\"ER_TABLEACCESS_DENIED_ERROR\",\"ER_COLUMNACCESS_DENIED_ERROR\",\"ER_ILLEGAL_GRANT_FOR_TABLE\",\"ER_GRANT_WRONG_HOST_OR_USER\",\"ER_NO_SUCH_TABLE\",\"ER_NONEXISTING_TABLE_GRANT\",\"ER_NOT_ALLOWED_COMMAND\",\"ER_SYNTAX_ERROR\",\"ER_DELAYED_CANT_CHANGE_LOCK\",\"ER_TOO_MANY_DELAYED_THREADS\",\"ER_ABORTING_CONNECTION\",\"ER_NET_PACKET_TOO_LARGE\",\"ER_NET_READ_ERROR_FROM_PIPE\",\"ER_NET_FCNTL_ERROR\",\"ER_NET_PACKETS_OUT_OF_ORDER\",\"ER_NET_UNCOMPRESS_ERROR\",\"ER_NET_READ_ERROR\",\"ER_NET_READ_INTERRUPTED\",\"ER_NET_ERROR_ON_WRITE\",\"ER_NET_WRITE_INTERRUPTED\",\"ER_TOO_LONG_STRING\",\"ER_TABLE_CANT_HANDLE_BLOB\",\"ER_TABLE_CANT_HANDLE_AUTO_INCREMENT\",\"ER_DELAYED_INSERT_TABLE_LOCKED\",\"ER_WRONG_COLUMN_NAME\",\"ER_WRONG_KEY_COLUMN\",\"ER_WRONG_MRG_TABLE\",\"ER_DUP_UNIQUE\",\"ER_BLOB_KEY_WITHOUT_LENGTH\",\"ER_PRIMARY_CANT_HAVE_NULL\",\"ER_TOO_MANY_ROWS\",\"ER_REQUIRES_PRIMARY_KEY\",\"ER_NO_RAID_COMPILED\",\"ER_UPDATE_WITHOUT_KEY_IN_SAFE_MODE\",\"ER_KEY_DOES_NOT_EXITS\",\"ER_CHECK_NO_SUCH_TABLE\",\"ER_CHECK_NOT_IMPLEMENTED\",\"ER_CANT_DO_THIS_DURING_AN_TRANSACTION\",\"ER_ERROR_DURING_COMMIT\",\"ER_ERROR_DURING_ROLLBACK\",\"ER_ERROR_DURING_FLUSH_LOGS\",\"ER_ERROR_DURING_CHECKPOINT\",\"ER_NEW_ABORTING_CONNECTION\",\"ER_DUMP_NOT_IMPLEMENTED\",\"ER_FLUSH_MASTER_BINLOG_CLOSED\",\"ER_INDEX_REBUILD\",\"ER_MASTER\",\"ER_MASTER_NET_READ\",\"ER_MASTER_NET_WRITE\",\"ER_FT_MATCHING_KEY_NOT_FOUND\",\"ER_LOCK_OR_ACTIVE_TRANSACTION\",\"ER_UNKNOWN_SYSTEM_VARIABLE\",\"ER_CRASHED_ON_USAGE\",\"ER_CRASHED_ON_REPAIR\",\"ER_WARNING_NOT_COMPLETE_ROLLBACK\",\"ER_TRANS_CACHE_FULL\",\"ER_SLAVE_MUST_STOP\",\"ER_SLAVE_NOT_RUNNING\",\"ER_BAD_SLAVE\",\"ER_MASTER_INFO\",\"ER_SLAVE_THREAD\",\"ER_TOO_MANY_USER_CONNECTIONS\",\"ER_SET_CONSTANTS_ONLY\",\"ER_LOCK_WAIT_TIMEOUT\",\"ER_LOCK_TABLE_FULL\",\"ER_READ_ONLY_TRANSACTION\",\"ER_DROP_DB_WITH_READ_LOCK\",\"ER_CREATE_DB_WITH_READ_LOCK\",\"ER_WRONG_ARGUMENTS\",\"ER_NO_PERMISSION_TO_CREATE_USER\",\"ER_UNION_TABLES_IN_DIFFERENT_DIR\",\"ER_LOCK_DEADLOCK\",\"ER_TABLE_CANT_HANDLE_FT\",\"ER_CANNOT_ADD_FOREIGN\",\"ER_NO_REFERENCED_ROW\",\"ER_ROW_IS_REFERENCED\",\"ER_CONNECT_TO_MASTER\",\"ER_QUERY_ON_MASTER\",\"ER_ERROR_WHEN_EXECUTING_COMMAND\",\"ER_WRONG_USAGE\",\"ER_WRONG_NUMBER_OF_COLUMNS_IN_SELECT\",\"ER_CANT_UPDATE_WITH_READLOCK\",\"ER_MIXING_NOT_ALLOWED\",\"ER_DUP_ARGUMENT\",\"ER_USER_LIMIT_REACHED\",\"ER_SPECIFIC_ACCESS_DENIED_ERROR\",\"ER_LOCAL_VARIABLE\",\"ER_GLOBAL_VARIABLE\",\"ER_NO_DEFAULT\",\"ER_WRONG_VALUE_FOR_VAR\",\"ER_WRONG_TYPE_FOR_VAR\",\"ER_VAR_CANT_BE_READ\",\"ER_CANT_USE_OPTION_HERE\",\"ER_NOT_SUPPORTED_YET\",\"ER_MASTER_FATAL_ERROR_READING_BINLOG\",\"ER_SLAVE_IGNORED_TABLE\",\"ER_INCORRECT_GLOBAL_LOCAL_VAR\",\"ER_WRONG_FK_DEF\",\"ER_KEY_REF_DO_NOT_MATCH_TABLE_REF\",\"ER_OPERAND_COLUMNS\",\"ER_SUBQUERY_NO_1_ROW\",\"ER_UNKNOWN_STMT_HANDLER\",\"ER_CORRUPT_HELP_DB\",\"ER_CYCLIC_REFERENCE\",\"ER_AUTO_CONVERT\",\"ER_ILLEGAL_REFERENCE\",\"ER_DERIVED_MUST_HAVE_ALIAS\",\"ER_SELECT_REDUCED\",\"ER_TABLENAME_NOT_ALLOWED_HERE\",\"ER_NOT_SUPPORTED_AUTH_MODE\",\"ER_SPATIAL_CANT_HAVE_NULL\",\"ER_COLLATION_CHARSET_MISMATCH\",\"ER_SLAVE_WAS_RUNNING\",\"ER_SLAVE_WAS_NOT_RUNNING\",\"ER_TOO_BIG_FOR_UNCOMPRESS\",\"ER_ZLIB_Z_MEM_ERROR\",\"ER_ZLIB_Z_BUF_ERROR\",\"ER_ZLIB_Z_DATA_ERROR\",\"ER_CUT_VALUE_GROUP_CONCAT\",\"ER_WARN_TOO_FEW_RECORDS\",\"ER_WARN_TOO_MANY_RECORDS\",\"ER_WARN_NULL_TO_NOTNULL\",\"ER_WARN_DATA_OUT_OF_RANGE\",\"ER_WARN_USING_OTHER_HANDLER\",\"ER_CANT_AGGREGATE_2COLLATIONS\",\"ER_DROP_USER\",\"ER_REVOKE_GRANTS\",\"ER_CANT_AGGREGATE_3COLLATIONS\",\"ER_CANT_AGGREGATE_NCOLLATIONS\",\"ER_VARIABLE_IS_NOT_STRUCT\",\"ER_UNKNOWN_COLLATION\",\"ER_SLAVE_IGNORED_SSL_PARAMS\",\"ER_SERVER_IS_IN_SECURE_AUTH_MODE\",\"ER_WARN_FIELD_RESOLVED\",\"ER_BAD_SLAVE_UNTIL_COND\",\"ER_MISSING_SKIP_SLAVE\",\"ER_UNTIL_COND_IGNORED\",\"ER_WRONG_NAME_FOR_INDEX\",\"ER_WRONG_NAME_FOR_CATALOG\",\"ER_WARN_QC_RESIZE\",\"ER_BAD_FT_COLUMN\",\"ER_UNKNOWN_KEY_CACHE\",\"ER_WARN_HOSTNAME_WONT_WORK\",\"ER_UNKNOWN_STORAGE_ENGINE\",\"ER_WARN_DEPRECATED_SYNTAX\",\"ER_NON_UPDATABLE_TABLE\",\"ER_FEATURE_DISABLED\",\"ER_OPTION_PREVENTS_STATEMENT\",\"ER_DUPLICATED_VALUE_IN_TYPE\",\"ER_TRUNCATED_WRONG_VALUE\",\"ER_TOO_MUCH_AUTO_TIMESTAMP_COLS\",\"ER_INVALID_ON_UPDATE\",\"ER_UNSUPPORTED_PS\",\"ER_GET_ERRMSG\",\"ER_GET_TEMPORARY_ERRMSG\",\"ER_UNKNOWN_TIME_ZONE\",\"ER_WARN_INVALID_TIMESTAMP\",\"ER_INVALID_CHARACTER_STRING\",\"ER_WARN_ALLOWED_PACKET_OVERFLOWED\",\"ER_CONFLICTING_DECLARATIONS\",\"ER_SP_NO_RECURSIVE_CREATE\",\"ER_SP_ALREADY_EXISTS\",\"ER_SP_DOES_NOT_EXIST\",\"ER_SP_DROP_FAILED\",\"ER_SP_STORE_FAILED\",\"ER_SP_LILABEL_MISMATCH\",\"ER_SP_LABEL_REDEFINE\",\"ER_SP_LABEL_MISMATCH\",\"ER_SP_UNINIT_VAR\",\"ER_SP_BADSELECT\",\"ER_SP_BADRETURN\",\"ER_SP_BADSTATEMENT\",\"ER_UPDATE_LOG_DEPRECATED_IGNORED\",\"ER_UPDATE_LOG_DEPRECATED_TRANSLATED\",\"ER_QUERY_INTERRUPTED\",\"ER_SP_WRONG_NO_OF_ARGS\",\"ER_SP_COND_MISMATCH\",\"ER_SP_NORETURN\",\"ER_SP_NORETURNEND\",\"ER_SP_BAD_CURSOR_QUERY\",\"ER_SP_BAD_CURSOR_SELECT\",\"ER_SP_CURSOR_MISMATCH\",\"ER_SP_CURSOR_ALREADY_OPEN\",\"ER_SP_CURSOR_NOT_OPEN\",\"ER_SP_UNDECLARED_VAR\",\"ER_SP_WRONG_NO_OF_FETCH_ARGS\",\"ER_SP_FETCH_NO_DATA\",\"ER_SP_DUP_PARAM\",\"ER_SP_DUP_VAR\",\"ER_SP_DUP_COND\",\"ER_SP_DUP_CURS\",\"ER_SP_CANT_ALTER\",\"ER_SP_SUBSELECT_NYI\",\"ER_STMT_NOT_ALLOWED_IN_SF_OR_TRG\",\"ER_SP_VARCOND_AFTER_CURSHNDLR\",\"ER_SP_CURSOR_AFTER_HANDLER\",\"ER_SP_CASE_NOT_FOUND\",\"ER_FPARSER_TOO_BIG_FILE\",\"ER_FPARSER_BAD_HEADER\",\"ER_FPARSER_EOF_IN_COMMENT\",\"ER_FPARSER_ERROR_IN_PARAMETER\",\"ER_FPARSER_EOF_IN_UNKNOWN_PARAMETER\",\"ER_VIEW_NO_EXPLAIN\",\"ER_FRM_UNKNOWN_TYPE\",\"ER_WRONG_OBJECT\",\"ER_NONUPDATEABLE_COLUMN\",\"ER_VIEW_SELECT_DERIVED\",\"ER_VIEW_SELECT_CLAUSE\",\"ER_VIEW_SELECT_VARIABLE\",\"ER_VIEW_SELECT_TMPTABLE\",\"ER_VIEW_WRONG_LIST\",\"ER_WARN_VIEW_MERGE\",\"ER_WARN_VIEW_WITHOUT_KEY\",\"ER_VIEW_INVALID\",\"ER_SP_NO_DROP_SP\",\"ER_SP_GOTO_IN_HNDLR\",\"ER_TRG_ALREADY_EXISTS\",\"ER_TRG_DOES_NOT_EXIST\",\"ER_TRG_ON_VIEW_OR_TEMP_TABLE\",\"ER_TRG_CANT_CHANGE_ROW\",\"ER_TRG_NO_SUCH_ROW_IN_TRG\",\"ER_NO_DEFAULT_FOR_FIELD\",\"ER_DIVISION_BY_ZERO\",\"ER_TRUNCATED_WRONG_VALUE_FOR_FIELD\",\"ER_ILLEGAL_VALUE_FOR_TYPE\",\"ER_VIEW_NONUPD_CHECK\",\"ER_VIEW_CHECK_FAILED\",\"ER_PROCACCESS_DENIED_ERROR\",\"ER_RELAY_LOG_FAIL\",\"ER_PASSWD_LENGTH\",\"ER_UNKNOWN_TARGET_BINLOG\",\"ER_IO_ERR_LOG_INDEX_READ\",\"ER_BINLOG_PURGE_PROHIBITED\",\"ER_FSEEK_FAIL\",\"ER_BINLOG_PURGE_FATAL_ERR\",\"ER_LOG_IN_USE\",\"ER_LOG_PURGE_UNKNOWN_ERR\",\"ER_RELAY_LOG_INIT\",\"ER_NO_BINARY_LOGGING\",\"ER_RESERVED_SYNTAX\",\"ER_WSAS_FAILED\",\"ER_DIFF_GROUPS_PROC\",\"ER_NO_GROUP_FOR_PROC\",\"ER_ORDER_WITH_PROC\",\"ER_LOGGING_PROHIBIT_CHANGING_OF\",\"ER_NO_FILE_MAPPING\",\"ER_WRONG_MAGIC\",\"ER_PS_MANY_PARAM\",\"ER_KEY_PART_0\",\"ER_VIEW_CHECKSUM\",\"ER_VIEW_MULTIUPDATE\",\"ER_VIEW_NO_INSERT_FIELD_LIST\",\"ER_VIEW_DELETE_MERGE_VIEW\",\"ER_CANNOT_USER\",\"ER_XAER_NOTA\",\"ER_XAER_INVAL\",\"ER_XAER_RMFAIL\",\"ER_XAER_OUTSIDE\",\"ER_XAER_RMERR\",\"ER_XA_RBROLLBACK\",\"ER_NONEXISTING_PROC_GRANT\",\"ER_PROC_AUTO_GRANT_FAIL\",\"ER_PROC_AUTO_REVOKE_FAIL\",\"ER_DATA_TOO_LONG\",\"ER_SP_BAD_SQLSTATE\",\"ER_STARTUP\",\"ER_LOAD_FROM_FIXED_SIZE_ROWS_TO_VAR\",\"ER_CANT_CREATE_USER_WITH_GRANT\",\"ER_WRONG_VALUE_FOR_TYPE\",\"ER_TABLE_DEF_CHANGED\",\"ER_SP_DUP_HANDLER\",\"ER_SP_NOT_VAR_ARG\",\"ER_SP_NO_RETSET\",\"ER_CANT_CREATE_GEOMETRY_OBJECT\",\"ER_FAILED_ROUTINE_BREAK_BINLOG\",\"ER_BINLOG_UNSAFE_ROUTINE\",\"ER_BINLOG_CREATE_ROUTINE_NEED_SUPER\",\"ER_EXEC_STMT_WITH_OPEN_CURSOR\",\"ER_STMT_HAS_NO_OPEN_CURSOR\",\"ER_COMMIT_NOT_ALLOWED_IN_SF_OR_TRG\",\"ER_NO_DEFAULT_FOR_VIEW_FIELD\",\"ER_SP_NO_RECURSION\",\"ER_TOO_BIG_SCALE\",\"ER_TOO_BIG_PRECISION\",\"ER_M_BIGGER_THAN_D\",\"ER_WRONG_LOCK_OF_SYSTEM_TABLE\",\"ER_CONNECT_TO_FOREIGN_DATA_SOURCE\",\"ER_QUERY_ON_FOREIGN_DATA_SOURCE\",\"ER_FOREIGN_DATA_SOURCE_DOESNT_EXIST\",\"ER_FOREIGN_DATA_STRING_INVALID_CANT_CREATE\",\"ER_FOREIGN_DATA_STRING_INVALID\",\"ER_CANT_CREATE_FEDERATED_TABLE\",\"ER_TRG_IN_WRONG_SCHEMA\",\"ER_STACK_OVERRUN_NEED_MORE\",\"ER_TOO_LONG_BODY\",\"ER_WARN_CANT_DROP_DEFAULT_KEYCACHE\",\"ER_TOO_BIG_DISPLAYWIDTH\",\"ER_XAER_DUPID\",\"ER_DATETIME_FUNCTION_OVERFLOW\",\"ER_CANT_UPDATE_USED_TABLE_IN_SF_OR_TRG\",\"ER_VIEW_PREVENT_UPDATE\",\"ER_PS_NO_RECURSION\",\"ER_SP_CANT_SET_AUTOCOMMIT\",\"ER_MALFORMED_DEFINER\",\"ER_VIEW_FRM_NO_USER\",\"ER_VIEW_OTHER_USER\",\"ER_NO_SUCH_USER\",\"ER_FORBID_SCHEMA_CHANGE\",\"ER_ROW_IS_REFERENCED_2\",\"ER_NO_REFERENCED_ROW_2\",\"ER_SP_BAD_VAR_SHADOW\",\"ER_TRG_NO_DEFINER\",\"ER_OLD_FILE_FORMAT\",\"ER_SP_RECURSION_LIMIT\",\"ER_SP_PROC_TABLE_CORRUPT\",\"ER_SP_WRONG_NAME\",\"ER_TABLE_NEEDS_UPGRADE\",\"ER_SP_NO_AGGREGATE\",\"ER_MAX_PREPARED_STMT_COUNT_REACHED\",\"ER_VIEW_RECURSIVE\",\"ER_NON_GROUPING_FIELD_USED\",\"ER_TABLE_CANT_HANDLE_SPKEYS\",\"ER_NO_TRIGGERS_ON_SYSTEM_SCHEMA\",\"ER_REMOVED_SPACES\",\"ER_AUTOINC_READ_FAILED\",\"ER_USERNAME\",\"ER_HOSTNAME\",\"ER_WRONG_STRING_LENGTH\",\"ER_NON_INSERTABLE_TABLE\",\"ER_ADMIN_WRONG_MRG_TABLE\",\"ER_TOO_HIGH_LEVEL_OF_NESTING_FOR_SELECT\",\"ER_NAME_BECOMES_EMPTY\",\"ER_AMBIGUOUS_FIELD_TERM\",\"ER_FOREIGN_SERVER_EXISTS\",\"ER_FOREIGN_SERVER_DOESNT_EXIST\",\"ER_ILLEGAL_HA_CREATE_OPTION\",\"ER_PARTITION_REQUIRES_VALUES_ERROR\",\"ER_PARTITION_WRONG_VALUES_ERROR\",\"ER_PARTITION_MAXVALUE_ERROR\",\"ER_PARTITION_SUBPARTITION_ERROR\",\"ER_PARTITION_SUBPART_MIX_ERROR\",\"ER_PARTITION_WRONG_NO_PART_ERROR\",\"ER_PARTITION_WRONG_NO_SUBPART_ERROR\",\"ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR\",\"ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR\",\"ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR\",\"ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR\",\"ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR\",\"ER_CONST_EXPR_IN_PARTITION_FUNC_ERROR\",\"ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR\",\"ER_WRONG_EXPR_IN_PARTITION_FUNC_ERROR\",\"ER_NO_CONST_EXPR_IN_RANGE_OR_LIST_ERROR\",\"ER_FIELD_NOT_FOUND_PART_ERROR\",\"ER_LIST_OF_FIELDS_ONLY_IN_HASH_ERROR\",\"ER_INCONSISTENT_PARTITION_INFO_ERROR\",\"ER_PARTITION_FUNC_NOT_ALLOWED_ERROR\",\"ER_PARTITIONS_MUST_BE_DEFINED_ERROR\",\"ER_RANGE_NOT_INCREASING_ERROR\",\"ER_INCONSISTENT_TYPE_OF_FUNCTIONS_ERROR\",\"ER_MULTIPLE_DEF_CONST_IN_LIST_PART_ERROR\",\"ER_PARTITION_ENTRY_ERROR\",\"ER_MIX_HANDLER_ERROR\",\"ER_PARTITION_NOT_DEFINED_ERROR\",\"ER_TOO_MANY_PARTITIONS_ERROR\",\"ER_SUBPARTITION_ERROR\",\"ER_CANT_CREATE_HANDLER_FILE\",\"ER_BLOB_FIELD_IN_PART_FUNC_ERROR\",\"ER_UNIQUE_KEY_NEED_ALL_FIELDS_IN_PF\",\"ER_NO_PARTS_ERROR\",\"ER_PARTITION_MGMT_ON_NONPARTITIONED\",\"ER_FOREIGN_KEY_ON_PARTITIONED\",\"ER_DROP_PARTITION_NON_EXISTENT\",\"ER_DROP_LAST_PARTITION\",\"ER_COALESCE_ONLY_ON_HASH_PARTITION\",\"ER_REORG_HASH_ONLY_ON_SAME_NO\",\"ER_REORG_NO_PARAM_ERROR\",\"ER_ONLY_ON_RANGE_LIST_PARTITION\",\"ER_ADD_PARTITION_SUBPART_ERROR\",\"ER_ADD_PARTITION_NO_NEW_PARTITION\",\"ER_COALESCE_PARTITION_NO_PARTITION\",\"ER_REORG_PARTITION_NOT_EXIST\",\"ER_SAME_NAME_PARTITION\",\"ER_NO_BINLOG_ERROR\",\"ER_CONSECUTIVE_REORG_PARTITIONS\",\"ER_REORG_OUTSIDE_RANGE\",\"ER_PARTITION_FUNCTION_FAILURE\",\"ER_PART_STATE_ERROR\",\"ER_LIMITED_PART_RANGE\",\"ER_PLUGIN_IS_NOT_LOADED\",\"ER_WRONG_VALUE\",\"ER_NO_PARTITION_FOR_GIVEN_VALUE\",\"ER_FILEGROUP_OPTION_ONLY_ONCE\",\"ER_CREATE_FILEGROUP_FAILED\",\"ER_DROP_FILEGROUP_FAILED\",\"ER_TABLESPACE_AUTO_EXTEND_ERROR\",\"ER_WRONG_SIZE_NUMBER\",\"ER_SIZE_OVERFLOW_ERROR\",\"ER_ALTER_FILEGROUP_FAILED\",\"ER_BINLOG_ROW_LOGGING_FAILED\",\"ER_BINLOG_ROW_WRONG_TABLE_DEF\",\"ER_BINLOG_ROW_RBR_TO_SBR\",\"ER_EVENT_ALREADY_EXISTS\",\"ER_EVENT_STORE_FAILED\",\"ER_EVENT_DOES_NOT_EXIST\",\"ER_EVENT_CANT_ALTER\",\"ER_EVENT_DROP_FAILED\",\"ER_EVENT_INTERVAL_NOT_POSITIVE_OR_TOO_BIG\",\"ER_EVENT_ENDS_BEFORE_STARTS\",\"ER_EVENT_EXEC_TIME_IN_THE_PAST\",\"ER_EVENT_OPEN_TABLE_FAILED\",\"ER_EVENT_NEITHER_M_EXPR_NOR_M_AT\",\"ER_COL_COUNT_DOESNT_MATCH_CORRUPTED\",\"ER_CANNOT_LOAD_FROM_TABLE\",\"ER_EVENT_CANNOT_DELETE\",\"ER_EVENT_COMPILE_ERROR\",\"ER_EVENT_SAME_NAME\",\"ER_EVENT_DATA_TOO_LONG\",\"ER_DROP_INDEX_FK\",\"ER_WARN_DEPRECATED_SYNTAX_WITH_VER\",\"ER_CANT_WRITE_LOCK_LOG_TABLE\",\"ER_CANT_LOCK_LOG_TABLE\",\"ER_FOREIGN_DUPLICATE_KEY\",\"ER_COL_COUNT_DOESNT_MATCH_PLEASE_UPDATE\",\"ER_TEMP_TABLE_PREVENTS_SWITCH_OUT_OF_RBR\",\"ER_STORED_FUNCTION_PREVENTS_SWITCH_BINLOG_FORMAT\",\"ER_NDB_CANT_SWITCH_BINLOG_FORMAT\",\"ER_PARTITION_NO_TEMPORARY\",\"ER_PARTITION_CONST_DOMAIN_ERROR\",\"ER_PARTITION_FUNCTION_IS_NOT_ALLOWED\",\"ER_DDL_LOG_ERROR\",\"ER_NULL_IN_VALUES_LESS_THAN\",\"ER_WRONG_PARTITION_NAME\",\"ER_CANT_CHANGE_TX_ISOLATION\",\"ER_DUP_ENTRY_AUTOINCREMENT_CASE\",\"ER_EVENT_MODIFY_QUEUE_ERROR\",\"ER_EVENT_SET_VAR_ERROR\",\"ER_PARTITION_MERGE_ERROR\",\"ER_CANT_ACTIVATE_LOG\",\"ER_RBR_NOT_AVAILABLE\",\"ER_BASE64_DECODE_ERROR\",\"ER_EVENT_RECURSION_FORBIDDEN\",\"ER_EVENTS_DB_ERROR\",\"ER_ONLY_INTEGERS_ALLOWED\",\"ER_UNSUPORTED_LOG_ENGINE\",\"ER_BAD_LOG_STATEMENT\",\"ER_CANT_RENAME_LOG_TABLE\",\"ER_WRONG_PARAMCOUNT_TO_NATIVE_FCT\",\"ER_WRONG_PARAMETERS_TO_NATIVE_FCT\",\"ER_WRONG_PARAMETERS_TO_STORED_FCT\",\"ER_NATIVE_FCT_NAME_COLLISION\",\"ER_DUP_ENTRY_WITH_KEY_NAME\",\"ER_DUP_ENTRY\",\"ER_BINLOG_PURGE_EMFILE\",\"ER_EVENT_CANNOT_CREATE_IN_THE_PAST\",\"ER_EVENT_CANNOT_ALTER_IN_THE_PAST\",\"ER_SLAVE_INCIDENT\",\"ER_NO_PARTITION_FOR_GIVEN_VALUE_SILENT\",\"ER_BINLOG_UNSAFE_STATEMENT\",\"ER_SLAVE_FATAL_ERROR\",\"ER_SLAVE_RELAY_LOG_READ_FAILURE\",\"ER_SLAVE_RELAY_LOG_WRITE_FAILURE\",\"ER_SLAVE_CREATE_EVENT_FAILURE\",\"ER_SLAVE_MASTER_COM_FAILURE\",\"ER_BINLOG_LOGGING_IMPOSSIBLE\",\"ER_VIEW_NO_CREATION_CTX\",\"ER_VIEW_INVALID_CREATION_CTX\",\"ER_SR_INVALID_CREATION_CTX\",\"ER_TRG_CORRUPTED_FILE\",\"ER_TRG_NO_CREATION_CTX\",\"ER_TRG_INVALID_CREATION_CTX\",\"ER_EVENT_INVALID_CREATION_CTX\",\"ER_TRG_CANT_OPEN_TABLE\",\"ER_CANT_CREATE_SROUTINE\",\"ER_SLAVE_AMBIGOUS_EXEC_MODE\",\"ER_SLAVE_AMBIGOUS_EXEC_MODE\",\"ER_NEVER_USED\",\"ER_SLAVE_AMBIGOUS_EXEC_MODE\",\"ER_NEVER_USED\",\"ER_SLAVE_AMBIGOUS_EXEC_MODE\",\"ER_NEVER_USED\",\"ER_NEVER_USED\",\"ER_NO_FORMAT_DESCRIPTION_EVENT_BEFORE_BINLOG_STATEMENT\",\"ER_SLAVE_CORRUPT_EVENT\",\"ER_LOAD_DATA_INVALID_COLUMN\",\"ER_LOG_PURGE_NO_FILE\",\"ER_XA_RBTIMEOUT\",\"ER_XA_RBDEADLOCK\",\"ER_NEED_REPREPARE\",\"ER_DELAYED_NOT_SUPPORTED\",\"ER_VARIABLE_IS_READONLY\",\"ER_WARN_ENGINE_TRANSACTION_ROLLBACK\",\"ER_SLAVE_HEARTBEAT_FAILURE\",\"ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE\",\"ER_NDB_REPLICATION_SCHEMA_ERROR\",\"ER_CONFLICT_FN_PARSE_ERROR\",\"ER_EXCEPTIONS_WRITE_ERROR\",\"ER_TOO_LONG_TABLE_COMMENT\",\"ER_TOO_LONG_FIELD_COMMENT\",\"ER_FUNC_INEXISTENT_NAME_COLLISION\",\"ER_DATABASE_NAME\",\"ER_TABLE_NAME\",\"ER_PARTITION_NAME\",\"ER_SUBPARTITION_NAME\",\"ER_TEMPORARY_NAME\",\"ER_RENAMED_NAME\",\"ER_TOO_MANY_CONCURRENT_TRXS\",\"ER_DEBUG_SYNC_TIMEOUT\",\"ER_DEBUG_SYNC_HIT_LIMIT\",\"ER_DUP_SIGNAL_SET\",\"ER_SIGNAL_WARN\",\"ER_SIGNAL_NOT_FOUND\",\"ER_SIGNAL_EXCEPTION\",\"ER_RESIGNAL_WITHOUT_ACTIVE_HANDLER\",\"ER_SIGNAL_BAD_CONDITION_TYPE\",\"ER_COND_ITEM_TOO_LONG\",\"ER_UNKNOWN_LOCALE\",\"ER_SLAVE_IGNORE_SERVER_IDS\",\"ER_QUERY_CACHE_DISABLED\",\"ER_SAME_NAME_PARTITION_FIELD\",\"ER_PARTITION_COLUMN_LIST_ERROR\",\"ER_WRONG_TYPE_COLUMN_VALUE_ERROR\",\"ER_TOO_MANY_PARTITION_FUNC_FIELDS_ERROR\",\"ER_MAXVALUE_IN_VALUES_IN\",\"ER_TOO_MANY_VALUES_ERROR\",\"ER_ROW_SINGLE_PARTITION_FIELD_ERROR\",\"ER_FIELD_TYPE_NOT_ALLOWED_AS_PARTITION_FIELD\",\"ER_PARTITION_FIELDS_TOO_LONG\",\"ER_BINLOG_ROW_ENGINE_AND_STMT_ENGINE\",\"ER_BINLOG_ROW_ENGINE_AND_STMT_ENGINE\",\"ER_BINLOG_ROW_MODE_AND_STMT_ENGINE\",\"ER_BINLOG_ROW_MODE_AND_STMT_ENGINE\",\"ER_BINLOG_UNSAFE_AND_STMT_ENGINE\",\"ER_BINLOG_UNSAFE_AND_STMT_ENGINE\",\"ER_BINLOG_ROW_INJECTION_AND_STMT_ENGINE\",\"ER_BINLOG_ROW_INJECTION_AND_STMT_ENGINE\",\"ER_BINLOG_STMT_MODE_AND_ROW_ENGINE\",\"ER_BINLOG_STMT_MODE_AND_ROW_ENGINE\",\"ER_BINLOG_ROW_INJECTION_AND_STMT_MODE\",\"ER_BINLOG_ROW_INJECTION_AND_STMT_MODE\",\"ER_BINLOG_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE\",\"ER_BINLOG_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE\",\"ER_BINLOG_UNSAFE_LIMIT\",\"ER_BINLOG_UNSAFE_LIMIT\",\"ER_BINLOG_UNSAFE_INSERT_DELAYED\",\"ER_BINLOG_UNSAFE_INSERT_DELAYED\",\"ER_BINLOG_UNSAFE_SYSTEM_TABLE\",\"ER_BINLOG_UNSAFE_SYSTEM_TABLE\",\"ER_BINLOG_UNSAFE_AUTOINC_COLUMNS\",\"ER_BINLOG_UNSAFE_AUTOINC_COLUMNS\",\"ER_BINLOG_UNSAFE_UDF\",\"ER_BINLOG_UNSAFE_UDF\",\"ER_BINLOG_UNSAFE_SYSTEM_VARIABLE\",\"ER_BINLOG_UNSAFE_SYSTEM_VARIABLE\",\"ER_BINLOG_UNSAFE_SYSTEM_FUNCTION\",\"ER_BINLOG_UNSAFE_SYSTEM_FUNCTION\",\"ER_BINLOG_UNSAFE_NONTRANS_AFTER_TRANS\",\"ER_BINLOG_UNSAFE_NONTRANS_AFTER_TRANS\",\"ER_MESSAGE_AND_STATEMENT\",\"ER_MESSAGE_AND_STATEMENT\",\"ER_SLAVE_CONVERSION_FAILED\",\"ER_SLAVE_CONVERSION_FAILED\",\"ER_SLAVE_CANT_CREATE_CONVERSION\",\"ER_SLAVE_CANT_CREATE_CONVERSION\",\"ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_FORMAT\",\"ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_FORMAT\",\"ER_PATH_LENGTH\",\"ER_PATH_LENGTH\",\"ER_WARN_DEPRECATED_SYNTAX_NO_REPLACEMENT\",\"ER_WARN_DEPRECATED_SYNTAX_NO_REPLACEMENT\",\"ER_WRONG_NATIVE_TABLE_STRUCTURE\",\"ER_WRONG_NATIVE_TABLE_STRUCTURE\",\"ER_WRONG_PERFSCHEMA_USAGE\",\"ER_WRONG_PERFSCHEMA_USAGE\",\"ER_WARN_I_S_SKIPPED_TABLE\",\"ER_WARN_I_S_SKIPPED_TABLE\",\"ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_DIRECT\",\"ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_BINLOG_DIRECT\",\"ER_STORED_FUNCTION_PREVENTS_SWITCH_BINLOG_DIRECT\",\"ER_STORED_FUNCTION_PREVENTS_SWITCH_BINLOG_DIRECT\",\"ER_SPATIAL_MUST_HAVE_GEOM_COL\",\"ER_SPATIAL_MUST_HAVE_GEOM_COL\",\"ER_TOO_LONG_INDEX_COMMENT\",\"ER_TOO_LONG_INDEX_COMMENT\",\"ER_LOCK_ABORTED\",\"ER_LOCK_ABORTED\",\"ER_DATA_OUT_OF_RANGE\",\"ER_DATA_OUT_OF_RANGE\",\"ER_WRONG_SPVAR_TYPE_IN_LIMIT\",\"ER_WRONG_SPVAR_TYPE_IN_LIMIT\",\"ER_BINLOG_UNSAFE_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE\",\"ER_BINLOG_UNSAFE_MULTIPLE_ENGINES_AND_SELF_LOGGING_ENGINE\",\"ER_BINLOG_UNSAFE_MIXED_STATEMENT\",\"ER_BINLOG_UNSAFE_MIXED_STATEMENT\",\"ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_SQL_LOG_BIN\",\"ER_INSIDE_TRANSACTION_PREVENTS_SWITCH_SQL_LOG_BIN\",\"ER_STORED_FUNCTION_PREVENTS_SWITCH_SQL_LOG_BIN\",\"ER_STORED_FUNCTION_PREVENTS_SWITCH_SQL_LOG_BIN\",\"ER_FAILED_READ_FROM_PAR_FILE\",\"ER_FAILED_READ_FROM_PAR_FILE\",\"ER_VALUES_IS_NOT_INT_TYPE_ERROR\",\"ER_VALUES_IS_NOT_INT_TYPE_ERROR\",\"ER_ACCESS_DENIED_NO_PASSWORD_ERROR\",\"ER_ACCESS_DENIED_NO_PASSWORD_ERROR\",\"ER_SET_PASSWORD_AUTH_PLUGIN\",\"ER_SET_PASSWORD_AUTH_PLUGIN\",\"ER_GRANT_PLUGIN_USER_EXISTS\",\"ER_GRANT_PLUGIN_USER_EXISTS\",\"ER_TRUNCATE_ILLEGAL_FK\",\"ER_TRUNCATE_ILLEGAL_FK\",\"ER_PLUGIN_IS_PERMANENT\",\"ER_PLUGIN_IS_PERMANENT\",\"ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MIN\",\"ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MIN\",\"ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MAX\",\"ER_SLAVE_HEARTBEAT_VALUE_OUT_OF_RANGE_MAX\",\"ER_STMT_CACHE_FULL\",\"ER_STMT_CACHE_FULL\",\"ER_MULTI_UPDATE_KEY_CONFLICT\",\"ER_MULTI_UPDATE_KEY_CONFLICT\",\"ER_TABLE_NEEDS_REBUILD\",\"ER_TABLE_NEEDS_REBUILD\",\"ER_INDEX_COLUMN_TOO_LONG\",\"ER_INDEX_COLUMN_TOO_LONG\",\"ER_ERROR_IN_TRIGGER_BODY\",\"ER_ERROR_IN_TRIGGER_BODY\",\"ER_ERROR_IN_UNKNOWN_TRIGGER_BODY\",\"ER_ERROR_IN_UNKNOWN_TRIGGER_BODY\",\"ER_INDEX_CORRUPT\",\"ER_INDEX_CORRUPT\",\"ER_UNDO_RECORD_TOO_BIG\",\"ER_UNDO_RECORD_TOO_BIG\",\"ER_BINLOG_UNSAFE_INSERT_IGNORE_SELECT\",\"ER_BINLOG_UNSAFE_INSERT_IGNORE_SELECT\",\"ER_BINLOG_UNSAFE_INSERT_SELECT_UPDATE\",\"ER_BINLOG_UNSAFE_INSERT_SELECT_UPDATE\",\"ER_BINLOG_UNSAFE_REPLACE_SELECT\",\"ER_BINLOG_UNSAFE_REPLACE_SELECT\",\"ER_BINLOG_UNSAFE_CREATE_IGNORE_SELECT\",\"ER_BINLOG_UNSAFE_CREATE_IGNORE_SELECT\",\"ER_BINLOG_UNSAFE_CREATE_REPLACE_SELECT\",\"ER_BINLOG_UNSAFE_CREATE_REPLACE_SELECT\",\"ER_BINLOG_UNSAFE_UPDATE_IGNORE\",\"ER_BINLOG_UNSAFE_UPDATE_IGNORE\",\"ER_PLUGIN_NO_UNINSTALL\",\"ER_PLUGIN_NO_UNINSTALL\",\"ER_PLUGIN_NO_INSTALL\",\"ER_PLUGIN_NO_INSTALL\",\"ER_BINLOG_UNSAFE_WRITE_AUTOINC_SELECT\",\"ER_BINLOG_UNSAFE_WRITE_AUTOINC_SELECT\",\"ER_BINLOG_UNSAFE_CREATE_SELECT_AUTOINC\",\"ER_BINLOG_UNSAFE_CREATE_SELECT_AUTOINC\",\"ER_BINLOG_UNSAFE_INSERT_TWO_KEYS\",\"ER_BINLOG_UNSAFE_INSERT_TWO_KEYS\",\"ER_TABLE_IN_FK_CHECK\",\"ER_TABLE_IN_FK_CHECK\",\"ER_UNSUPPORTED_ENGINE\",\"ER_UNSUPPORTED_ENGINE\",\"ER_BINLOG_UNSAFE_AUTOINC_NOT_FIRST\",\"ER_BINLOG_UNSAFE_AUTOINC_NOT_FIRST\"])},function(e,t,r){\"use strict\";const n={16:new Set([241,242,245,515,547,8152,5e4]),14:new Set([2601,2627])};e.exports={has:function(e){const t=n[e.severity];return!!t&&t.has(e.errorCode)}}},function(e,t,r){const n=r(6),{getSqlStateClass:o}=r(26);e.exports={error:n,parse:e=>\"23\"===o(e.code)?{}:null,subclassParsers:[r(124),r(125),r(126),r(127)]}},function(e,t,r){const n=r(19),o=/Key \\((.+)\\)=\\(.+\\) already exists/;e.exports={error:n,parse:e=>{if(\"23505\"!==e.code)return null;const t=o.exec(e.detail);if(!t)return null;const r=t[1].split(\",\").map(e=>e.trim()).map(e=>(function(e){return'\"'===e[0]&&'\"'===e[e.length-1]?e.substr(1,e.length-2):e})(e));return{table:e.table,columns:r,constraint:e.constraint}},subclassParsers:[]}},function(e,t,r){const n=r(20);e.exports={error:n,parse:e=>\"23502\"===e.code?{table:e.table,column:e.column}:null,subclassParsers:[]}},function(e,t,r){const n=r(21);e.exports={error:n,parse:e=>\"23503\"===e.code?{table:e.table,constraint:e.constraint}:null,subclassParsers:[]}},function(e,t,r){const n=r(27);e.exports={error:n,parse:e=>\"23514\"===e.code?{table:e.table,constraint:e.constraint}:null,subclassParsers:[]}},function(e,t,r){const n=r(28),{getSqlStateClass:o}=r(26);e.exports={error:n,parse:e=>\"22\"===o(e.code)?{}:null,subclassParsers:[]}},function(e,t,r){const n=r(10);e.exports={error:n,parse:e=>\"string\"==typeof e.code&&e.code.startsWith(\"SQLITE_\")&&\"number\"==typeof e.errno?{nativeError:e,client:\"sqlite\"}:null,subclassParsers:[r(130)]}},function(e,t,r){const n=r(6);e.exports={error:n,parse:e=>\"SQLITE_CONSTRAINT\"===e.code?{}:null,subclassParsers:[r(131),r(132),r(133),r(134)]}},function(e,t,r){const n=r(19),o=/SQLITE_CONSTRAINT: UNIQUE constraint failed: (.+)$/;e.exports={error:n,parse:e=>{const t=o.exec(e.message);if(!t)return null;const r=t[1].split(\",\").map(e=>e.trim()).map(e=>e.split(\".\")).map(e=>e.map(e=>e.trim()));return{table:r[0][0],columns:r.map(e=>e[1])}},subclassParsers:[]}},function(e,t,r){const n=r(20),o=/SQLITE_CONSTRAINT: NOT NULL constraint failed: (.+)$/;e.exports={error:n,parse:e=>{const t=o.exec(e.message);if(!t)return null;const r=t[1].trim().split(\".\").map(e=>e.trim());return{table:r[0],column:r[1]}},subclassParsers:[]}},function(e,t,r){const n=r(21),o=/SQLITE_CONSTRAINT: FOREIGN KEY constraint failed/;e.exports={error:n,parse:e=>{return o.exec(e.message)?{}:null},subclassParsers:[]}},function(e,t,r){const n=r(27),o=/SQLITE_CONSTRAINT: CHECK constraint failed/;e.exports={error:n,parse:e=>{return o.exec(e.message)?{}:null},subclassParsers:[]}},function(e,t,r){const n=r(10),o=r(42).mysql;e.exports={error:n,parse:e=>\"string\"==typeof e.code&&\"sqlMessage\"in e&&\"sqlState\"in e&&5===e.sqlState.length&&o.has(e.code)&&\"number\"==typeof e.errno?{nativeError:e,client:\"mysql\"}:null,subclassParsers:[r(136),r(140)]}},function(e,t,r){const n=r(6),{getSqlStateClass:o}=r(26);e.exports={error:n,parse:e=>\"23\"===o(e.sqlState)||\"ER_NO_DEFAULT_FOR_FIELD\"===e.code?{}:null,subclassParsers:[r(137),r(138),r(139)]}},function(e,t,r){const n=r(19),o=[\"ER_DUP_ENTRY\",\"ER_DUP_ENTRY_WITH_KEY_NAME\"],s=/Duplicate entry '(.+)' for key '(.+)'/;e.exports={error:n,parse:e=>{if(-1===o.indexOf(e.code))return null;const t=s.exec(e.sqlMessage);return t?{constraint:t[2]}:null},subclassParsers:[]}},function(e,t,r){const n=r(20),o=/Column '(.+)' cannot be null/,s=/Field '(.+)' doesn't have a default value/;e.exports={error:n,parse:e=>{let t=null;return\"ER_BAD_NULL_ERROR\"===e.code?t=o.exec(e.sqlMessage):\"ER_NO_DEFAULT_FOR_FIELD\"===e.code&&(t=s.exec(e.sqlMessage)),t?{column:t[1]}:null},subclassParsers:[]}},function(e,t,r){const n=r(21),o=/a foreign key constraint fails \\(`(.+)`\\.`(.+)`, CONSTRAINT `(.+)` FOREIGN KEY \\(`(.+)`\\) REFERENCES `(.+)` \\(`(.+)`\\)/,s=/Cannot delete or update a parent row: a foreign key constraint fails \\(`(.+)`\\.`(.+)`, CONSTRAINT `(.+)` FOREIGN KEY \\(`(.+)`\\) REFERENCES `(.+)` \\(`(.+)`\\)/;e.exports={error:n,parse:e=>{let t=null;return\"ER_NO_REFERENCED_ROW\"===e.code||\"ER_ROW_IS_REFERENCED\"===e.code?{table:null,constraint:null}:(\"ER_NO_REFERENCED_ROW_2\"===e.code?t=o.exec(e.sqlMessage):\"ER_ROW_IS_REFERENCED_2\"===e.code&&(t=s.exec(e.sqlMessage)),t?{table:t[2],constraint:t[3]}:null)},subclassParsers:[]}},function(e,t,r){const n=r(28),{getSqlStateClass:o}=r(26),s=[\"ER_DATA_TOO_LONG\",\"ER_TRUNCATED_WRONG_VALUE\",\"ER_TRUNCATED_WRONG_VALUE_FOR_FIELD\"];e.exports={error:n,parse:e=>\"22\"===o(e.sqlState)||s.includes(e.code)?{}:null,subclassParsers:[]}},function(e,t,r){\"use strict\";const n=r(10),o=r(42).mssql,{getCode:s}=r(14);e.exports={error:n,parse:e=>e.originalError&&\"EREQUEST\"===e.code&&o.has(s(e))?{nativeError:e.originalError,client:\"mssql\"}:null,subclassParsers:[r(142),r(143),r(144),r(145),r(146)]}},function(e,t,r){const n=r(27),{isCode:o}=r(14),s=/The (INSERT|UPDATE) statement conflicted with the CHECK constraint \"(.+)\". The conflict occurred in database \"(.+)\", table \"(.+)\", column '(.+)'./;e.exports={error:n,parse:e=>{if(o(e,16,547)){const t=s.exec(e.originalError.message);return t?{table:t[3],constraint:t[1]}:null}return null},subclassParsers:[]}},function(e,t,r){const n=r(28),{isCode:o}=r(14);e.exports={error:n,parse:e=>o(e,16,241)||o(e,16,242)||o(e,16,245)||o(e,16,8152)?{}:null,subclassParsers:[]}},function(e,t,r){const n=r(21),{isCode:o}=r(14),s=/The (?:INSERT|UPDATE) statement conflicted with the FOREIGN KEY constraint \"(.+)\". The conflict occurred in database \"(.+)\", table \"(.+)\\.(.+)\", column '(.+)'./,i=/The DELETE statement conflicted with the REFERENCE constraint \"(.+)\". The conflict occurred in database \"(.+)\", table \"(.+)\\.(.+)\", column '(.+)'./;e.exports={error:n,parse:e=>{if(o(e,16,547)){const t=s.exec(e.originalError.message);if(t)return{table:t[4],schema:t[3],constraint:t[1]};const r=i.exec(e.originalError.message);if(r)return{table:r[4],schema:r[3],constraint:r[1]}}return null},subclassParsers:[]}},function(e,t,r){const n=r(20),{isCode:o}=r(14),s=/Cannot insert the value NULL into column '(.+)', table '(.+)\\.(.+)\\.(.+)'; column does not allow nulls. (?:INSERT|UPDATE) fails./;e.exports={error:n,parse:e=>{if(o(e,16,515)||o(e,16,5e4)){const t=s.exec(e.originalError.message);return t?{column:t[1],database:t[2],schema:t[3],table:t[4]}:null}return null},subclassParsers:[]}},function(e,t,r){const n=r(19),{isCode:o}=r(14),s=/Cannot insert duplicate key row in object '(.+)\\.(.+)' with unique index '(.+)'. The duplicate key value is (.+)./,i=/Violation of UNIQUE KEY constraint '(.+)'. Cannot insert duplicate key in object '(.+)\\.(.+)'. The duplicate key value is \\((.+)\\)/;e.exports={error:n,parse:e=>{if(o(e,14,2627)){const t=i.exec(e.originalError.message);return t?{table:t[3],schema:t[2],constraint:t[1]}:null}if(o(e,14,2601)){const t=s.exec(e.originalError.message);return t?{table:t[2],constraint:t[3],schema:t[1]}:null}return null},subclassParsers:[]}},function(e,t,r){\"use strict\";t.byteLength=function(e){const t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){let t;const r=a(e),n=r[0],i=r[1],l=new s(function(e,t,r){return 3*(t+r)/4-r}(0,n,i));let u=0;const c=i>0?n-4:n;let h;for(h=0;h<c;h+=4)t=o[e.charCodeAt(h)]<<18|o[e.charCodeAt(h+1)]<<12|o[e.charCodeAt(h+2)]<<6|o[e.charCodeAt(h+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===i&&(t=o[e.charCodeAt(h)]<<2|o[e.charCodeAt(h+1)]>>4,l[u++]=255&t);1===i&&(t=o[e.charCodeAt(h)]<<10|o[e.charCodeAt(h+1)]<<4|o[e.charCodeAt(h+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){let t;const r=e.length,o=r%3,s=[];for(let t=0,n=r-o;t<n;t+=16383)s.push(l(e,t,t+16383>n?n:t+16383));1===o?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+\"==\")):2===o&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+\"=\"));return s.join(\"\")};const n=[],o=[],s=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";for(let e=0,t=i.length;e<t;++e)n[e]=i[e],o[i.charCodeAt(e)]=e;function a(e){const t=e.length;if(t%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");let r=e.indexOf(\"=\");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){let o;const s=[];for(let a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);var i;return s.join(\"\")}o[\"-\".charCodeAt(0)]=62,o[\"_\".charCodeAt(0)]=63},function(e,t){\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nt.read=function(e,t,r,n,o){var s,i,a=8*o-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?o-1:0,d=r?-1:1,p=e[t+h];for(h+=d,s=p&(1<<-c)-1,p>>=-c,c+=a;c>0;s=256*s+e[t+h],h+=d,c-=8);for(i=s&(1<<-c)-1,s>>=-c,c+=n;c>0;i=256*i+e[t+h],h+=d,c-=8);if(0===s)s=1-u;else{if(s===l)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,n),s-=u}return(p?-1:1)*i*Math.pow(2,s-n)},t.write=function(e,t,r,n,o,s){var i,a,l,u=8*s-o-1,c=(1<<u)-1,h=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,f=n?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-i))<1&&(i--,l*=2),(t+=i+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(i++,l/=2),i+h>=c?(a=0,i=c):i+h>=1?(a=(t*l-1)*Math.pow(2,o),i+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,o),i=0));o>=8;e[r+p]=255&a,p+=f,a/=256,o-=8);for(i=i<<o|a,u+=o;u>0;e[r+p]=255&i,p+=f,i/=256,u-=8);e[r+p-f]|=128*_}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return\"[object Array]\"==r.call(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,\"loaded\",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,\"id\",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){\"use strict\";const{inheritModel:n}=r(72),{staticHiddenProps:o}=r(7),{defineNonEnumerableProperty:s}=r(7);function i(e){return e.$$objection||function(e){s(e,\"$$objection\",{boundModels:new Map})}(e),e.$$objection.boundModels}e.exports={bindKnex:function(e,t){let r=function(e,t){const r=i(t),n=e.uniqueTag();return r.get(n)||null}(e,t);return null===r&&((r=function(e,t){for(const r of o)e.hasOwnProperty(r)&&\"$$relations\"!==r&&\"$$relationArray\"!==r&&s(t,r,e[r]);return t}(e,r=n(e))).knex(t),r=function(e,t,r){const n=i(r),o=e.uniqueTag();return n.set(o,t),t}(e,r,t),r=function(e,t,r){const n=Object.create(null),o=[];for(const t of e.getRelationNames()){const s=e.getRelation(t),i=s.bindKnex(r);n[s.name]=i,o.push(i)}return s(t,\"$$relations\",n),s(t,\"$$relationArray\",o),t}(e,r,t)),r}}},function(e,t,r){\"use strict\";const{clone:n}=r(70);e.exports={validate:function(e,t,r={}){const o=t=t||e,s=o&&o.$isObjectionModel;if(r.skipValidation)return t;s&&(t=n(t,!0,!0),r=Object.assign({},r,{mutable:!0}));const i=e.constructor.getValidator(),a={options:r,model:e,json:t,ctx:Object.create(null)};return i.beforeValidate(a),t=i.validate(a),i.afterValidate(a),s?o.$set(t):t}}},function(e,t,r){\"use strict\";const{isObject:n}=r(0),{isInternalProp:o}=r(11);function s(e,t){const r=e.constructor;for(let n=0,s=t.length;n<s;++n){const s=t[n];!o(s)&&e.hasOwnProperty(s)&&r.omitImpl(e,s)}}function i(e,t){const r=e.constructor,n=Object.keys(e);for(let s=0,i=n.length;s<i;++s){const i=n[s];o(i)||a(t,i)||r.omitImpl(e,i)}}function a(e,t){for(let r=0,n=e.length;r<n;++r)if(e[r]===t)return!0;return!1}e.exports={omit:function(e,t){if(1===t.length&&n(t[0])){const r=t[0];Array.isArray(r)?s(e,r):function(e,t){const r=e.constructor,n=Object.keys(t);for(let s=0,i=n.length;s<i;++s){const i=n[s],a=t[i];a&&!o(i)&&e.hasOwnProperty(i)&&r.omitImpl(e,i)}}(e,r)}else s(e,t);return e},pick:function(e,t){if(1===t.length&&n(t[0])){const r=t[0];Array.isArray(r)?i(e,r):function(e,t){const r=e.constructor,n=Object.keys(e);for(let s=0,i=n.length;s<i;++s){const i=n[s];o(i)||t[i]||r.omitImpl(e,i)}}(e,r)}else i(e,t);return e}}},function(e,t,r){\"use strict\";function n(e,t,r,n,s){Array.isArray(e)?function(e,t,r,n,s){for(let i=0,a=e.length;i<a;++i)o(e[i],t,r,n,s)}(e,t,r,n,s):e&&o(e,t,r,n,s)}function o(e,t,r,o,s){e&&s(e,t,r,o);const i=t.getRelationNames();for(let r=0,o=i.length;r<o;++r){const o=i[r],a=e[o];if(a){const r=t.getRelation(o);n(a,r.relatedModelClass,e,r,s)}}}e.exports={visitModels:function(e,t,r){n(e,t,null,null,r)}}},function(e,t,r){\"use strict\";e.exports={getSetId:function(e,t){return void 0!==t?function(e,t){const r=e.constructor.getIdProperty(),n=Array.isArray(r);if(Array.isArray(t))if(n){if(t.length!==r.length)throw new Error(\"trying to set an invalid identifier for a model\");for(let n=0;n<t.length;++n)e[r[n]]=t[n]}else{if(1!==t.length)throw new Error(\"trying to set an invalid identifier for a model\");e[r]=t[0]}else if(n){if(r.length>1)throw new Error(\"trying to set an invalid identifier for a model\");e[r[0]]=t}else e[r]=t}(e,t):function(e){const t=e.constructor.getIdProperty();return Array.isArray(t)?e.$values(t):e[t]}(e)},hasId:function(e){return e.$hasProps(e.constructor.getIdPropertyArray())}}},function(e,t,r){\"use strict\";(function(t){const{isInternalProp:n}=r(11),{mergeQueryProps:o}=r(74),{isObject:s,cloneDeep:i,isFunction:a}=r(0),l=[];function u(e){return!!e&&!!e.shallow}function c(e,t,r,o){const i=typeof r;\"function\"===i||\"undefined\"===i||n(t)||function(e,t){return null!==e.omit&&e.omit.includes(t)||null!==e.omitFromJson&&e.omitFromJson.includes(t)}(o,t)||!function(e,t){return null===e.pick||t in e.pick}(o,t)||(s(r)?e[t]=h(r,o):e[t]=r)}function h(e,r){return Array.isArray(e)?function(e,t){const r=new Array(e.length);for(let n=0,o=r.length;n<o;++n){const o=e[n];s(o)?r[n]=h(o,t):r[n]=o}return r}(e,r):e.$isObjectionModel?e.$toJson(r):t.isBuffer(e)?e:r.cloneObjects?i(e):e}e.exports={toJson:function(e,t){const r=e.constructor,n={virtuals:function(e){return!e||(Array.isArray(e.virtuals)?e.virtuals:!1!==e.virtuals)}(t),shallow:u(t),omit:function(e,t){return u(e)?t.getRelationNames():null}(t,r),pick:null,omitFromJson:e.$omitFromJson()||null,cloneObjects:r.cloneObjectAttributes};let o=function(e,t){const r={},n=Object.keys(e),o=function(e,t){return Array.isArray(t.virtuals)?t.virtuals:!0===t.virtuals?e.constructor.getVirtualAttributes():l}(e,t);for(let o=0,s=n.length;o<s;++o){const s=n[o],i=e[s];c(r,s,i,t)}return 0!==o.length&&function(e,t,r,n){for(let o=0,s=r.length;o<s;++o){const s=r[o];let i=t[s];a(i)&&(i=i.call(t)),c(e,s,i,n)}}(r,e,o,t),r}(e,n);return o=e.$formatJson(o)},toDatabaseJson:function(e,t){const r=e.constructor,n={virtuals:!1,shallow:!0,omit:r.getRelationNames(),pick:function(e){const t=e.getJsonSchema();return t&&e.pickJsonSchemaProperties&&t.properties||null}(r),omitFromJson:e.$omitFromDatabaseJson()||null,cloneObjects:r.cloneObjectAttributes};let s=function(e,t){const r={},n=Object.keys(e);for(let o=0,s=n.length;o<s;++o){const s=n[o],i=e[s];c(r,s,i,t)}return r}(e,n);return s=e.$formatDatabaseJson(s),o(e,s,n.omitFromJson,t)}}}).call(this,r(43).Buffer)},function(e,t,r){\"use strict\";const{defineNonEnumerableProperty:n}=r(7),{isPromise:o}=r(2),s=\"$$tableMetadata\";e.exports={fetchTableMetadata:function(e,{parentBuilder:t=null,knex:r=null,force:o=!1,table:i=null}={}){i||(i=t?t.tableNameFor(e):e.getTableName());let a=e.tableMetadata({table:i});if(!o&&a)return Promise.resolve(a);if(e.hasOwnProperty(s)||n(e,s,new Map),a=e[s].get(i),!o&&a)return Promise.resolve(a);{const n=e.query(r).childQueryOf(t).columnInfo({table:i}).then(t=>{const r={columns:Object.keys(t)};return e[s].set(i,r),r});return e[s].set(i,n),n}},tableMetadata:function(e,{table:t}={}){if(e.hasOwnProperty(s)){const r=e[s].get(t||e.getTableName());return o(r)?null:r}return null}}},function(e,t,r){\"use strict\";const{isInternalProp:n}=r(11),{splitQueryProps:o}=r(74),{isFunction:s,isString:i}=r(0),{parseRelationsIntoModelInstances:a}=r(76);function l(e,t){return i(t)?e.constructor.getRelation(t):t}e.exports={setFast:function(e,t){if(t){const r=e.constructor.getReadOnlyAttributes(),o=Object.keys(t);for(let i=0,a=o.length;i<a;++i){const a=o[i],l=t[a];n(a)||s(l)||r.includes(a)||(e[a]=l)}}return e},setJson:function(e,t,r){if(t=t||{},r=r||{},\"[object Object]\"!==Object.prototype.toString.call(t))throw new Error(\"You should only pass objects to $setJson method. $setJson method was given an invalid value \"+t);return t.$isObjectionModel||(t=o(e,t)),t=e.$parseJson(t,r),t=e.$validate(t,r),e.$set(t),r.skipParseRelations||a(e,t,r),e},setDatabaseJson:function(e,t){if(t=e.$parseDatabaseJson(t)){const r=Object.keys(t);for(let n=0,o=r.length;n<o;++n){const o=r[n];e[o]=t[o]}}return e},setRelated:function(e,t,r){return(t=l(e,t)).isOneToOne()?Array.isArray(r)?0===r.length?e[t.name]=null:e[t.name]=r[0]||null:e[t.name]=r||null:r?Array.isArray(r)?e[t.name]=r:e[t.name]=[r]:e[t.name]=[],this},appendRelated:function(e,t,r){return t=l(e,t),!e[t.name]||t.isOneToOne()?e.$setRelated(t,r):(Array.isArray(r)?r.forEach(r=>e[t.name].push(r)):r&&e[t.name].push(r),this)}}},function(e,t,r){\"use strict\";const{asArray:n,isObject:o,flatten:s,isString:i}=r(0);function a(e){try{return JSON.parse(e)}catch(e){return}}e.exports={parseJsonAttributes:function(e,t){const r=t.getJsonAttributes();if(r.length)for(let t=0,n=r.length;t<n;++t){const n=r[t],o=e[n];if(i(o)){const t=a(o);void 0!==t&&(e[n]=t)}}return e},formatJsonAttributes:function(e,t){const r=t.getJsonAttributes();if(r.length)for(let t=0,n=r.length;t<n;++t){const n=r[t],s=e[n];o(s)&&(e[n]=JSON.stringify(s))}return e},getJsonAttributes:function(e){let t=e.jsonAttributes;if(Array.isArray(t))return t;if(t=[],e.getJsonSchema()){const r=e.getJsonSchema().properties||{};for(const e of Object.keys(r)){const o=r[e];let i=n(o.type).filter(e=>!!e);0===i.length&&Array.isArray(o.anyOf)&&(i=s(o.anyOf.map(e=>e.type))),0===i.length&&Array.isArray(o.oneOf)&&(i=s(o.oneOf.map(e=>e.type))),-1===i.indexOf(\"object\")&&-1===i.indexOf(\"array\")||t.push(e)}}return t}}},function(e,t,r){\"use strict\";const{difference:n}=r(0);e.exports={columnNameToPropertyName:function(e,t){const r=new e,o=Object.keys(r.$parseDatabaseJson({})),s={};s[t]=null;const i=Object.keys(r.$parseDatabaseJson(s));return n(i,o)[0]||t},propertyNameToColumnName:function(e,t){const r=new e,o=Object.keys(r.$formatDatabaseJson({})),s={};s[t]=null;const i=Object.keys(r.$formatDatabaseJson(s));return n(i,o)[0]||t}}},function(e,t,r){\"use strict\";function n(e,t,r,o){this.message=e,this.expected=t,this.found=r,this.location=o,this.name=\"SyntaxError\",\"function\"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(n,Error),n.buildMessage=function(e,t){var r={literal:function(e){return'\"'+o(e.text)+'\"'},class:function(e){var t,r=\"\";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?s(e.parts[t][0])+\"-\"+s(e.parts[t][1]):s(e.parts[t]);return\"[\"+(e.inverted?\"^\":\"\")+r+\"]\"},any:function(e){return\"any character\"},end:function(e){return\"end of input\"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"').replace(/\\0/g,\"\\\\0\").replace(/\\t/g,\"\\\\t\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/[\\x00-\\x0F]/g,function(e){return\"\\\\x0\"+n(e)}).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,function(e){return\"\\\\x\"+n(e)})}function s(e){return e.replace(/\\\\/g,\"\\\\\\\\\").replace(/\\]/g,\"\\\\]\").replace(/\\^/g,\"\\\\^\").replace(/-/g,\"\\\\-\").replace(/\\0/g,\"\\\\0\").replace(/\\t/g,\"\\\\t\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/[\\x00-\\x0F]/g,function(e){return\"\\\\x0\"+n(e)}).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,function(e){return\"\\\\x\"+n(e)})}return\"Expected \"+function(e){var t,n,o,s=new Array(e.length);for(t=0;t<e.length;t++)s[t]=(o=e[t],r[o.type](o));if(s.sort(),s.length>0){for(t=1,n=1;t<s.length;t++)s[t-1]!==s[t]&&(s[n]=s[t],n++);s.length=n}switch(s.length){case 1:return s[0];case 2:return s[0]+\" or \"+s[1];default:return s.slice(0,-1).join(\", \")+\", or \"+s[s.length-1]}}(e)+\" but \"+function(e){return e?'\"'+o(e)+'\"':\"end of input\"}(t)+\" found.\"},e.exports={SyntaxError:n,parse:function(e,t){t=void 0!==t?t:{};var r,o={},s={start:H},i=H,a=\":\",l=V(\":\",!1),u=function(e,t){var r=[];if(t){var n=t[1];(r=t[2]).unshift(n)}return{columnName:e,access:r}},c=\"[\",h=V(\"[\",!1),d='\"',p=V('\"',!1),f=\"'\",_=V(\"'\",!1),E=\"]\",m=V(\"]\",!1),R=function(e){return{type:\"object\",ref:Array.isArray(e)?e[1]:e}},O=function(e){return{type:\"array\",ref:parseInt(e,10)}},y=function(e){return{type:\"object\",ref:e}},g=\".\",A=V(\".\",!1),v=/^[^\\][]/,N=k([\"]\",\"[\"],!0,!1),b=function(e){return e.join(\"\")},T=/^[^:]/,w=k([\":\"],!0,!1),P=/^[^\"]/,I=k(['\"'],!0,!1),S=/^[^']/,C=k([\"'\"],!0,!1),x=/^[^.\\][]/,F=k([\".\",\"]\",\"[\"],!0,!1),D=/^[0-9]/,M=k([[\"0\",\"9\"]],!1,!1),j=function(e){return e.join(\"\")},L=0,B=[{line:1,column:1}],U=0,$=[],G=0;if(\"startRule\"in t){if(!(t.startRule in s))throw new Error(\"Can't start parsing from rule \\\"\"+t.startRule+'\".');i=s[t.startRule]}function V(e,t){return{type:\"literal\",text:e,ignoreCase:t}}function k(e,t,r){return{type:\"class\",parts:e,inverted:t,ignoreCase:r}}function W(t){var r,n=B[t];if(n)return n;for(r=t-1;!B[r];)r--;for(n={line:(n=B[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return B[t]=n,n}function Q(e,t){var r=W(e),n=W(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function J(e){L<U||(L>U&&(U=L,$=[]),$.push(e))}function K(e,t,r){return new n(n.buildMessage(e,t),e,t,r)}function H(){var t,r,n,s,i,c,h;if(t=L,(r=function(){var t,r;if(L,t=[],T.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(w)),r!==o)for(;r!==o;)t.push(r),T.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(w));else t=o;return t!==o&&(t=b(t)),t}())!==o){if(n=L,58===e.charCodeAt(L)?(s=a,L++):(s=o,0===G&&J(l)),s!==o)if((i=Y())===o&&(i=q())===o&&(i=function(){var e;return L,(e=X())!==o&&(e=y(e)),e}()),i!==o){for(c=[],(h=Y())===o&&(h=q())===o&&(h=z());h!==o;)c.push(h),(h=Y())===o&&(h=q())===o&&(h=z());c!==o?n=s=[s,i,c]:(L=n,n=o)}else L=n,n=o;else L=n,n=o;n===o&&(n=null),n!==o?t=r=u(r,n):(L=t,t=o)}else L=t,t=o;return t}function q(){var t,r,n,s,i,a;return t=L,91===e.charCodeAt(L)?(r=c,L++):(r=o,0===G&&J(h)),r!==o?(n=L,34===e.charCodeAt(L)?(s=d,L++):(s=o,0===G&&J(p)),s!==o&&(i=function(){var t,r;if(L,t=[],P.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(I)),r!==o)for(;r!==o;)t.push(r),P.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(I));else t=o;return t!==o&&(t=b(t)),t}())!==o?(34===e.charCodeAt(L)?(a=d,L++):(a=o,0===G&&J(p)),a!==o?n=s=[s,i,a]:(L=n,n=o)):(L=n,n=o),n===o&&(n=L,39===e.charCodeAt(L)?(s=f,L++):(s=o,0===G&&J(_)),s!==o&&(i=function(){var t,r;if(L,t=[],S.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(C)),r!==o)for(;r!==o;)t.push(r),S.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(C));else t=o;return t!==o&&(t=b(t)),t}())!==o?(39===e.charCodeAt(L)?(a=f,L++):(a=o,0===G&&J(_)),a!==o?n=s=[s,i,a]:(L=n,n=o)):(L=n,n=o),n===o&&(n=function(){var t,r;if(L,t=[],v.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(N)),r!==o)for(;r!==o;)t.push(r),v.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(N));else t=o;return t!==o&&(t=b(t)),t}())),n!==o?(93===e.charCodeAt(L)?(s=E,L++):(s=o,0===G&&J(m)),s!==o?t=r=R(n):(L=t,t=o)):(L=t,t=o)):(L=t,t=o),t}function Y(){var t,r,n,s;return t=L,91===e.charCodeAt(L)?(r=c,L++):(r=o,0===G&&J(h)),r!==o&&(n=function(){var t,r;if(L,t=[],D.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(M)),r!==o)for(;r!==o;)t.push(r),D.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(M));else t=o;return t!==o&&(t=j(t)),t}())!==o?(93===e.charCodeAt(L)?(s=E,L++):(s=o,0===G&&J(m)),s!==o?t=r=O(n):(L=t,t=o)):(L=t,t=o),t}function z(){var t,r,n;return t=L,46===e.charCodeAt(L)?(r=g,L++):(r=o,0===G&&J(A)),r!==o&&(n=X())!==o?t=r=y(n):(L=t,t=o),t}function X(){var t,r;if(L,t=[],x.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(F)),r!==o)for(;r!==o;)t.push(r),x.test(e.charAt(L))?(r=e.charAt(L),L++):(r=o,0===G&&J(F));else t=o;return t!==o&&(t=b(t)),t}if((r=i())!==o&&L===e.length)return r;throw r!==o&&L<e.length&&J({type:\"end\"}),K($,U<e.length?e.charAt(U):null,U<e.length?Q(U,U+1):Q(U,U))}}},function(e,t,r){\"use strict\";var n=r(163),o=r(50),s=r(167),i=r(80),a=r(81),l=r(168),u=r(169),c=r(190),h=r(15);e.exports=m,m.prototype.validate=function(e,t){var r;if(\"string\"==typeof e){if(!(r=this.getSchema(e)))throw new Error('no schema with key or ref \"'+e+'\"')}else{var n=this._addSchema(e);r=n.validate||this._compile(n)}var o=r(t);!0!==r.$async&&(this.errors=r.errors);return o},m.prototype.compile=function(e,t){var r=this._addSchema(e,void 0,t);return r.validate||this._compile(r)},m.prototype.addSchema=function(e,t,r,n){if(Array.isArray(e)){for(var s=0;s<e.length;s++)this.addSchema(e[s],void 0,r,n);return this}var i=this._getId(e);if(void 0!==i&&\"string\"!=typeof i)throw new Error(\"schema id must be string\");return v(this,t=o.normalizeId(t||i)),this._schemas[t]=this._addSchema(e,r,n,!0),this},m.prototype.addMetaSchema=function(e,t,r){return this.addSchema(e,t,r,!0),this},m.prototype.validateSchema=function(e,t){var r=e.$schema;if(void 0!==r&&\"string\"!=typeof r)throw new Error(\"$schema must be a string\");if(!(r=r||this._opts.defaultMeta||(n=this,o=n._opts.meta,n._opts.defaultMeta=\"object\"==typeof o?n._getId(o)||o:n.getSchema(f)?f:void 0,n._opts.defaultMeta)))return this.logger.warn(\"meta-schema not available\"),this.errors=null,!0;var n,o;var s=this.validate(r,e);if(!s&&t){var i=\"schema is invalid: \"+this.errorsText();if(\"log\"!=this._opts.validateSchema)throw new Error(i);this.logger.error(i)}return s},m.prototype.getSchema=function(e){var t=R(this,e);switch(typeof t){case\"object\":return t.validate||this._compile(t);case\"string\":return this.getSchema(t);case\"undefined\":return function(e,t){var r=o.schema.call(e,{schema:{}},t);if(r){var s=r.schema,a=r.root,l=r.baseId,u=n.call(e,s,a,void 0,l);return e._fragments[t]=new i({ref:t,fragment:!0,schema:s,root:a,baseId:l,validate:u}),u}}(this,e)}},m.prototype.removeSchema=function(e){if(e instanceof RegExp)return O(this,this._schemas,e),O(this,this._refs,e),this;switch(typeof e){case\"undefined\":return O(this,this._schemas),O(this,this._refs),this._cache.clear(),this;case\"string\":var t=R(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case\"object\":var r=this._opts.serialize,n=r?r(e):e;this._cache.del(n);var s=this._getId(e);s&&(s=o.normalizeId(s),delete this._schemas[s],delete this._refs[s])}return this},m.prototype.addFormat=function(e,t){\"string\"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},m.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return\"No errors\";for(var r=void 0===(t=t||{}).separator?\", \":t.separator,n=void 0===t.dataVar?\"data\":t.dataVar,o=\"\",s=0;s<e.length;s++){var i=e[s];i&&(o+=n+i.dataPath+\" \"+i.message+r)}return o.slice(0,-r.length)},m.prototype._addSchema=function(e,t,r,n){if(\"object\"!=typeof e&&\"boolean\"!=typeof e)throw new Error(\"schema should be object or boolean\");var s=this._opts.serialize,a=s?s(e):e,l=this._cache.get(a);if(l)return l;n=n||!1!==this._opts.addUsedSchema;var u=o.normalizeId(this._getId(e));u&&n&&v(this,u);var c,h=!1!==this._opts.validateSchema&&!t;h&&!(c=u&&u==o.normalizeId(e.$schema))&&this.validateSchema(e,!0);var d=o.ids.call(this,e),p=new i({id:u,schema:e,localRefs:d,cacheKey:a,meta:r});\"#\"!=u[0]&&n&&(this._refs[u]=p);this._cache.put(a,p),h&&c&&this.validateSchema(e,!0);return p},m.prototype._compile=function(e,t){if(e.compiling)return e.validate=s,s.schema=e.schema,s.errors=null,s.root=t||s,!0===e.schema.$async&&(s.$async=!0),s;var r,o;e.compiling=!0,e.meta&&(r=this._opts,this._opts=this._metaOpts);try{o=n.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=r)}return e.validate=o,e.refs=o.refs,e.refVal=o.refVal,e.root=o.root,o;function s(){var t=e.validate,r=t.apply(this,arguments);return s.errors=t.errors,r}},m.prototype.compileAsync=r(191);var d=r(192);m.prototype.addKeyword=d.add,m.prototype.getKeyword=d.get,m.prototype.removeKeyword=d.remove,m.prototype.validateKeyword=d.validate;var p=r(52);m.ValidationError=p.Validation,m.MissingRefError=p.MissingRef,m.$dataMetaSchema=c;var f=\"http://json-schema.org/draft-07/schema\",_=[\"removeAdditional\",\"useDefaults\",\"coerceTypes\",\"strictDefaults\"],E=[\"/properties\"];function m(e){if(!(this instanceof m))return new m(e);e=this._opts=h.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:N,warn:N,error:N};else{if(void 0===t&&(t=console),!(\"object\"==typeof t&&t.log&&t.warn&&t.error))throw new Error(\"logger must implement log, warn and error methods\");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=l(e.format),this._cache=e.cache||new s,this._loadingSchemas={},this._compilations=[],this.RULES=u(),this._getId=function(e){switch(e.schemaId){case\"auto\":return A;case\"id\":return y;default:return g}}(e),e.loopRequired=e.loopRequired||1/0,\"property\"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=a),this._metaOpts=function(e){for(var t=h.copy(e._opts),r=0;r<_.length;r++)delete t[_[r]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var r=e._opts.formats[t];e.addFormat(t,r)}}(this),e.keywords&&function(e){for(var t in e._opts.keywords){var r=e._opts.keywords[t];e.addKeyword(t,r)}}(this),function(e){var t;e._opts.$data&&(t=r(195),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var n=r(87);e._opts.$data&&(n=c(n,E));e.addMetaSchema(n,f,!0),e._refs[\"http://json-schema.org/schema\"]=f}(this),\"object\"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword(\"nullable\",{metaSchema:{type:\"boolean\"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var r in t)e.addSchema(t[r],r)}(this)}function R(e,t){return t=o.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function O(e,t,r){for(var n in t){var o=t[n];o.meta||r&&!r.test(n)||(e._cache.del(o.cacheKey),delete t[n])}}function y(e){return e.$id&&this.logger.warn(\"schema $id ignored\",e.$id),e.id}function g(e){return e.id&&this.logger.warn(\"schema id ignored\",e.id),e.$id}function A(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error(\"schema $id is different from id\");return e.$id||e.id}function v(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id \"'+t+'\" already exists')}function N(){}},function(e,t,r){\"use strict\";var n=r(50),o=r(15),s=r(52),i=r(81),a=r(82),l=o.ucs2length,u=r(51),c=s.Validation;function h(e,t,r){for(var n=0;n<this._compilations.length;n++){var o=this._compilations[n];if(o.schema==e&&o.root==t&&o.baseId==r)return n}return-1}function d(e,t){return\"var pattern\"+e+\" = new RegExp(\"+o.toQuotedString(t[e])+\");\"}function p(e){return\"var default\"+e+\" = defaults[\"+e+\"];\"}function f(e,t){return void 0===t[e]?\"\":\"var refVal\"+e+\" = refVal[\"+e+\"];\"}function _(e){return\"var customRule\"+e+\" = customRules[\"+e+\"];\"}function E(e,t){if(!e.length)return\"\";for(var r=\"\",n=0;n<e.length;n++)r+=t(n,e);return r}e.exports=function e(t,r,m,R){var O=this,y=this._opts,g=[void 0],A={},v=[],N={},b=[],T={},w=[];r=r||{schema:t,refVal:g,refs:A};var P=function(e,t,r){var n=h.call(this,e,t,r);return n>=0?{index:n,compiling:!0}:(n=this._compilations.length,this._compilations[n]={schema:e,root:t,baseId:r},{index:n,compiling:!1})}.call(this,t,r,R);var I=this._compilations[P.index];if(P.compiling)return I.callValidate=function e(){var t=I.validate;var r=t.apply(this,arguments);e.errors=t.errors;return r};var S=this._formats;var C=this.RULES;try{var x=D(t,r,m,R);I.validate=x;var F=I.callValidate;return F&&(F.schema=x.schema,F.errors=null,F.refs=x.refs,F.refVal=x.refVal,F.root=x.root,F.$async=x.$async,y.sourceCode&&(F.source=x.source)),x}finally{(function(e,t,r){var n=h.call(this,e,t,r);n>=0&&this._compilations.splice(n,1)}).call(this,t,r,R)}function D(t,i,h,m){var R=!i||i&&i.schema==t;if(i.schema!=r.schema)return e.call(O,t,i,h,m);var N,T=!0===t.$async,P=a({isTop:!0,schema:t,isRoot:R,baseId:m,root:i,schemaPath:\"\",errSchemaPath:\"#\",errorPath:'\"\"',MissingRefError:s.MissingRef,RULES:C,validate:a,util:o,resolve:n,resolveRef:M,usePattern:B,useDefault:U,useCustomRule:$,opts:y,formats:S,logger:O.logger,self:O});P=E(g,f)+E(v,d)+E(b,p)+E(w,_)+P,y.processCode&&(P=y.processCode(P,t));try{var I=new Function(\"self\",\"RULES\",\"formats\",\"root\",\"refVal\",\"defaults\",\"customRules\",\"equal\",\"ucs2length\",\"ValidationError\",P);N=I(O,C,S,r,g,b,w,u,l,c),g[0]=N}catch(e){throw O.logger.error(\"Error compiling schema, function code:\",P),e}return N.schema=t,N.errors=null,N.refs=A,N.refVal=g,N.root=R?N:i,T&&(N.$async=!0),!0===y.sourceCode&&(N.source={code:P,patterns:v,defaults:b}),N}function M(t,o,s){o=n.url(t,o);var i,a,l=A[o];if(void 0!==l)return L(i=g[l],a=\"refVal[\"+l+\"]\");if(!s&&r.refs){var u=r.refs[o];if(void 0!==u)return i=r.refVal[u],a=j(o,i),L(i,a)}a=j(o);var c=n.call(O,D,r,o);if(void 0===c){var h=m&&m[o];h&&(c=n.inlineRef(h,y.inlineRefs)?h:e.call(O,h,r,m,t))}if(void 0!==c)return function(e,t){var r=A[e];g[r]=t}(o,c),L(c,a);!function(e){delete A[e]}(o)}function j(e,t){var r=g.length;return g[r]=t,A[e]=r,\"refVal\"+r}function L(e,t){return\"object\"==typeof e||\"boolean\"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function B(e){var t=N[e];return void 0===t&&(t=N[e]=v.length,v[t]=e),\"pattern\"+t}function U(e){switch(typeof e){case\"boolean\":case\"number\":return\"\"+e;case\"string\":return o.toQuotedString(e);case\"object\":if(null===e)return\"null\";var t=i(e),r=T[t];return void 0===r&&(r=T[t]=b.length,b[r]=e),\"default\"+r}}function $(e,t,r,n){if(!1!==O._opts.validateSchema){var o=e.definition.dependencies;if(o&&!o.every(function(e){return Object.prototype.hasOwnProperty.call(r,e)}))throw new Error(\"parent schema must have all required keywords: \"+o.join(\",\"));var s=e.definition.validateSchema;if(s){var i=s(t);if(!i){var a=\"keyword schema is invalid: \"+O.errorsText(s.errors);if(\"log\"!=O._opts.validateSchema)throw new Error(a);O.logger.error(a)}}}var l,u=e.definition.compile,c=e.definition.inline,h=e.definition.macro;if(u)l=u.call(O,t,r,n);else if(h)l=h.call(O,t,r,n),!1!==y.validateSchema&&O.validateSchema(l,!0);else if(c)l=c.call(O,n,e.keyword,t,r);else if(!(l=e.definition.validate))return;if(void 0===l)throw new Error('custom keyword \"'+e.keyword+'\"failed to compile');var d=w.length;return w[d]=l,{code:\"customRule\"+d,validate:l}}}},function(e,t,r){\n/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */\n!function(e){\"use strict\";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,o=1;o<n;++o)t[o]=t[o].slice(1,-1);return t[n]=t[n].slice(1),t.join(\"\")}return t[0]}function r(e){return\"(?:\"+e+\")\"}function n(e){return void 0===e?\"undefined\":null===e?\"null\":Object.prototype.toString.call(e).split(\" \").pop().split(\"]\").shift().toLowerCase()}function o(e){return e.toUpperCase()}function s(e){var n=t(\"[0-9]\",\"[A-Fa-f]\"),o=r(r(\"%[EFef]\"+n+\"%\"+n+n+\"%\"+n+n)+\"|\"+r(\"%[89A-Fa-f]\"+n+\"%\"+n+n)+\"|\"+r(\"%\"+n+n)),s=\"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",i=t(\"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",s),a=e?\"[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\":\"[]\",l=e?\"[\\\\uE000-\\\\uF8FF]\":\"[]\",u=t(\"[A-Za-z]\",\"[0-9]\",\"[\\\\-\\\\.\\\\_\\\\~]\",a),c=r(\"[A-Za-z]\"+t(\"[A-Za-z]\",\"[0-9]\",\"[\\\\+\\\\-\\\\.]\")+\"*\"),h=r(r(o+\"|\"+t(u,s,\"[\\\\:]\"))+\"*\"),d=(r(r(\"25[0-5]\")+\"|\"+r(\"2[0-4][0-9]\")+\"|\"+r(\"1[0-9][0-9]\")+\"|\"+r(\"[1-9][0-9]\")+\"|[0-9]\"),r(r(\"25[0-5]\")+\"|\"+r(\"2[0-4][0-9]\")+\"|\"+r(\"1[0-9][0-9]\")+\"|\"+r(\"0?[1-9][0-9]\")+\"|0?0?[0-9]\")),p=r(d+\"\\\\.\"+d+\"\\\\.\"+d+\"\\\\.\"+d),f=r(n+\"{1,4}\"),_=r(r(f+\"\\\\:\"+f)+\"|\"+p),E=r(r(f+\"\\\\:\")+\"{6}\"+_),m=r(\"\\\\:\\\\:\"+r(f+\"\\\\:\")+\"{5}\"+_),R=r(r(f)+\"?\\\\:\\\\:\"+r(f+\"\\\\:\")+\"{4}\"+_),O=r(r(r(f+\"\\\\:\")+\"{0,1}\"+f)+\"?\\\\:\\\\:\"+r(f+\"\\\\:\")+\"{3}\"+_),y=r(r(r(f+\"\\\\:\")+\"{0,2}\"+f)+\"?\\\\:\\\\:\"+r(f+\"\\\\:\")+\"{2}\"+_),g=r(r(r(f+\"\\\\:\")+\"{0,3}\"+f)+\"?\\\\:\\\\:\"+f+\"\\\\:\"+_),A=r(r(r(f+\"\\\\:\")+\"{0,4}\"+f)+\"?\\\\:\\\\:\"+_),v=r(r(r(f+\"\\\\:\")+\"{0,5}\"+f)+\"?\\\\:\\\\:\"+f),N=r(r(r(f+\"\\\\:\")+\"{0,6}\"+f)+\"?\\\\:\\\\:\"),b=r([E,m,R,O,y,g,A,v,N].join(\"|\")),T=r(r(u+\"|\"+o)+\"+\"),w=(r(b+\"\\\\%25\"+T),r(b+r(\"\\\\%25|\\\\%(?!\"+n+\"{2})\")+T)),P=r(\"[vV]\"+n+\"+\\\\.\"+t(u,s,\"[\\\\:]\")+\"+\"),I=r(\"\\\\[\"+r(w+\"|\"+b+\"|\"+P)+\"\\\\]\"),S=r(r(o+\"|\"+t(u,s))+\"*\"),C=r(I+\"|\"+p+\"(?!\"+S+\")|\"+S),x=r(\"[0-9]*\"),F=r(r(h+\"@\")+\"?\"+C+r(\"\\\\:\"+x)+\"?\"),D=r(o+\"|\"+t(u,s,\"[\\\\:\\\\@]\")),M=r(D+\"*\"),j=r(D+\"+\"),L=r(r(o+\"|\"+t(u,s,\"[\\\\@]\"))+\"+\"),B=r(r(\"\\\\/\"+M)+\"*\"),U=r(\"\\\\/\"+r(j+B)+\"?\"),$=r(L+B),G=r(j+B),V=\"(?!\"+D+\")\",k=(r(B+\"|\"+U+\"|\"+$+\"|\"+G+\"|\"+V),r(r(D+\"|\"+t(\"[\\\\/\\\\?]\",l))+\"*\")),W=r(r(D+\"|[\\\\/\\\\?]\")+\"*\"),Q=r(r(\"\\\\/\\\\/\"+F+B)+\"|\"+U+\"|\"+G+\"|\"+V),J=r(c+\"\\\\:\"+Q+r(\"\\\\?\"+k)+\"?\"+r(\"\\\\#\"+W)+\"?\"),K=r(r(\"\\\\/\\\\/\"+F+B)+\"|\"+U+\"|\"+$+\"|\"+V),H=r(K+r(\"\\\\?\"+k)+\"?\"+r(\"\\\\#\"+W)+\"?\");return r(J+\"|\"+H),r(c+\"\\\\:\"+Q+r(\"\\\\?\"+k)+\"?\"),r(r(\"\\\\/\\\\/(\"+r(\"(\"+h+\")@\")+\"?(\"+C+\")\"+r(\"\\\\:(\"+x+\")\")+\"?)\")+\"?(\"+B+\"|\"+U+\"|\"+G+\"|\"+V+\")\"),r(\"\\\\?(\"+k+\")\"),r(\"\\\\#(\"+W+\")\"),r(r(\"\\\\/\\\\/(\"+r(\"(\"+h+\")@\")+\"?(\"+C+\")\"+r(\"\\\\:(\"+x+\")\")+\"?)\")+\"?(\"+B+\"|\"+U+\"|\"+$+\"|\"+V+\")\"),r(\"\\\\?(\"+k+\")\"),r(\"\\\\#(\"+W+\")\"),r(r(\"\\\\/\\\\/(\"+r(\"(\"+h+\")@\")+\"?(\"+C+\")\"+r(\"\\\\:(\"+x+\")\")+\"?)\")+\"?(\"+B+\"|\"+U+\"|\"+G+\"|\"+V+\")\"),r(\"\\\\?(\"+k+\")\"),r(\"\\\\#(\"+W+\")\"),r(\"(\"+h+\")@\"),r(\"\\\\:(\"+x+\")\"),{NOT_SCHEME:new RegExp(t(\"[^]\",\"[A-Za-z]\",\"[0-9]\",\"[\\\\+\\\\-\\\\.]\"),\"g\"),NOT_USERINFO:new RegExp(t(\"[^\\\\%\\\\:]\",u,s),\"g\"),NOT_HOST:new RegExp(t(\"[^\\\\%\\\\[\\\\]\\\\:]\",u,s),\"g\"),NOT_PATH:new RegExp(t(\"[^\\\\%\\\\/\\\\:\\\\@]\",u,s),\"g\"),NOT_PATH_NOSCHEME:new RegExp(t(\"[^\\\\%\\\\/\\\\@]\",u,s),\"g\"),NOT_QUERY:new RegExp(t(\"[^\\\\%]\",u,s,\"[\\\\:\\\\@\\\\/\\\\?]\",l),\"g\"),NOT_FRAGMENT:new RegExp(t(\"[^\\\\%]\",u,s,\"[\\\\:\\\\@\\\\/\\\\?]\"),\"g\"),ESCAPE:new RegExp(t(\"[^]\",u,s),\"g\"),UNRESERVED:new RegExp(u,\"g\"),OTHER_CHARS:new RegExp(t(\"[^\\\\%]\",u,i),\"g\"),PCT_ENCODED:new RegExp(o,\"g\"),IPV4ADDRESS:new RegExp(\"^(\"+p+\")$\"),IPV6ADDRESS:new RegExp(\"^\\\\[?(\"+b+\")\"+r(r(\"\\\\%25|\\\\%(?!\"+n+\"{2})\")+\"(\"+T+\")\")+\"?\\\\]?$\")}}var i=s(!1),a=s(!0),l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,o=!1,s=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return r}(e,t);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")},u=2147483647,c=/^xn--/,h=/[^\\0-\\x7E]/,d=/[\\x2E\\u3002\\uFF0E\\uFF61]/g,p={overflow:\"Overflow: input needs wider integers to process\",\"not-basic\":\"Illegal input >= 0x80 (not a basic code point)\",\"invalid-input\":\"Invalid input\"},f=Math.floor,_=String.fromCharCode;function E(e){throw new RangeError(p[e])}function m(e,t){var r=e.split(\"@\"),n=\"\";r.length>1&&(n=r[0]+\"@\",e=r[1]);var o=(e=e.replace(d,\".\")).split(\".\"),s=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}(o,t).join(\".\");return n+s}function R(e){for(var t=[],r=0,n=e.length;r<n;){var o=e.charCodeAt(r++);if(o>=55296&&o<=56319&&r<n){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&o)<<10)+(1023&s)+65536):(t.push(o),r--)}else t.push(o)}return t}var O=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},y=function(e,t,r){var n=0;for(e=r?f(e/700):e>>1,e+=f(e/t);e>455;n+=36)e=f(e/35);return f(n+36*e/(e+38))},g=function(e){var t,r=[],n=e.length,o=0,s=128,i=72,a=e.lastIndexOf(\"-\");a<0&&(a=0);for(var l=0;l<a;++l)e.charCodeAt(l)>=128&&E(\"not-basic\"),r.push(e.charCodeAt(l));for(var c=a>0?a+1:0;c<n;){for(var h=o,d=1,p=36;;p+=36){c>=n&&E(\"invalid-input\");var _=(t=e.charCodeAt(c++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(_>=36||_>f((u-o)/d))&&E(\"overflow\"),o+=_*d;var m=p<=i?1:p>=i+26?26:p-i;if(_<m)break;var R=36-m;d>f(u/R)&&E(\"overflow\"),d*=R}var O=r.length+1;i=y(o-h,O,0==h),f(o/O)>u-s&&E(\"overflow\"),s+=f(o/O),o%=O,r.splice(o++,0,s)}return String.fromCodePoint.apply(String,r)},A=function(e){var t=[],r=(e=R(e)).length,n=128,o=0,s=72,i=!0,a=!1,l=void 0;try{for(var c,h=e[Symbol.iterator]();!(i=(c=h.next()).done);i=!0){var d=c.value;d<128&&t.push(_(d))}}catch(e){a=!0,l=e}finally{try{!i&&h.return&&h.return()}finally{if(a)throw l}}var p=t.length,m=p;for(p&&t.push(\"-\");m<r;){var g=u,A=!0,v=!1,N=void 0;try{for(var b,T=e[Symbol.iterator]();!(A=(b=T.next()).done);A=!0){var w=b.value;w>=n&&w<g&&(g=w)}}catch(e){v=!0,N=e}finally{try{!A&&T.return&&T.return()}finally{if(v)throw N}}var P=m+1;g-n>f((u-o)/P)&&E(\"overflow\"),o+=(g-n)*P,n=g;var I=!0,S=!1,C=void 0;try{for(var x,F=e[Symbol.iterator]();!(I=(x=F.next()).done);I=!0){var D=x.value;if(D<n&&++o>u&&E(\"overflow\"),D==n){for(var M=o,j=36;;j+=36){var L=j<=s?1:j>=s+26?26:j-s;if(M<L)break;var B=M-L,U=36-L;t.push(_(O(L+B%U,0))),M=f(B/U)}t.push(_(O(M,0))),s=y(o,P,m==p),o=0,++m}}}catch(e){S=!0,C=e}finally{try{!I&&F.return&&F.return()}finally{if(S)throw C}}++o,++n}return t.join(\"\")},v={version:\"2.1.0\",ucs2:{decode:R,encode:function(e){return String.fromCodePoint.apply(String,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(e))}},decode:g,encode:A,toASCII:function(e){return m(e,function(e){return h.test(e)?\"xn--\"+A(e):e})},toUnicode:function(e){return m(e,function(e){return c.test(e)?g(e.slice(4).toLowerCase()):e})}},N={};function b(e){var t=e.charCodeAt(0);return t<16?\"%0\"+t.toString(16).toUpperCase():t<128?\"%\"+t.toString(16).toUpperCase():t<2048?\"%\"+(t>>6|192).toString(16).toUpperCase()+\"%\"+(63&t|128).toString(16).toUpperCase():\"%\"+(t>>12|224).toString(16).toUpperCase()+\"%\"+(t>>6&63|128).toString(16).toUpperCase()+\"%\"+(63&t|128).toString(16).toUpperCase()}function T(e){for(var t=\"\",r=0,n=e.length;r<n;){var o=parseInt(e.substr(r+1,2),16);if(o<128)t+=String.fromCharCode(o),r+=3;else if(o>=194&&o<224){if(n-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&o)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(o>=224){if(n-r>=9){var i=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function w(e,t){function r(e){var r=T(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,\"\")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,b).replace(t.PCT_ENCODED,o)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,b).replace(t.PCT_ENCODED,o)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,b).replace(t.PCT_ENCODED,o)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,b).replace(t.PCT_ENCODED,o)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,b).replace(t.PCT_ENCODED,o)),e}function P(e){return e.replace(/^0*(.*)/,\"$1\")||\"0\"}function I(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=l(r,2),o=n[1];return o?o.split(\".\").map(P).join(\".\"):e}function S(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=l(r,3),o=n[1],s=n[2];if(o){for(var i=o.toLowerCase().split(\"::\").reverse(),a=l(i,2),u=a[0],c=a[1],h=c?c.split(\":\").map(P):[],d=u.split(\":\").map(P),p=t.IPV4ADDRESS.test(d[d.length-1]),f=p?7:8,_=d.length-f,E=Array(f),m=0;m<f;++m)E[m]=h[m]||d[_+m]||\"\";p&&(E[f-1]=I(E[f-1],t));var R=E.reduce(function(e,t,r){if(!t||\"0\"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e},[]),O=R.sort(function(e,t){return t.length-e.length})[0],y=void 0;if(O&&O.length>1){var g=E.slice(0,O.index),A=E.slice(O.index+O.length);y=g.join(\":\")+\"::\"+A.join(\":\")}else y=E.join(\":\");return s&&(y+=\"%\"+s),y}return e}var C=/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i,x=void 0===\"\".match(/(){0}/)[1];function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?a:i;\"suffix\"===t.reference&&(e=(t.scheme?t.scheme+\":\":\"\")+\"//\"+e);var o=e.match(C);if(o){x?(r.scheme=o[1],r.userinfo=o[3],r.host=o[4],r.port=parseInt(o[5],10),r.path=o[6]||\"\",r.query=o[7],r.fragment=o[8],isNaN(r.port)&&(r.port=o[5])):(r.scheme=o[1]||void 0,r.userinfo=-1!==e.indexOf(\"@\")?o[3]:void 0,r.host=-1!==e.indexOf(\"//\")?o[4]:void 0,r.port=parseInt(o[5],10),r.path=o[6]||\"\",r.query=-1!==e.indexOf(\"?\")?o[7]:void 0,r.fragment=-1!==e.indexOf(\"#\")?o[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/)?o[4]:void 0)),r.host&&(r.host=S(I(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference=\"relative\":void 0===r.fragment?r.reference=\"absolute\":r.reference=\"uri\":r.reference=\"same-document\",t.reference&&\"suffix\"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||\"URI is not a \"+t.reference+\" reference.\");var s=N[(t.scheme||r.scheme||\"\").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)w(r,n);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=v.toASCII(r.host.replace(n.PCT_ENCODED,T).toLowerCase())}catch(e){r.error=r.error||\"Host's domain name can not be converted to ASCII via punycode: \"+e}w(r,i)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||\"URI can not be parsed.\";return r}var D=/^\\.\\.?\\//,M=/^\\/\\.(\\/|$)/,j=/^\\/\\.\\.(\\/|$)/,L=/^\\/?(?:.|\\n)*?(?=\\/|$)/;function B(e){for(var t=[];e.length;)if(e.match(D))e=e.replace(D,\"\");else if(e.match(M))e=e.replace(M,\"/\");else if(e.match(j))e=e.replace(j,\"/\"),t.pop();else if(\".\"===e||\"..\"===e)e=\"\";else{var r=e.match(L);if(!r)throw new Error(\"Unexpected dot segment condition\");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join(\"\")}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?a:i,n=[],o=N[(t.scheme||e.scheme||\"\").toLowerCase()];if(o&&o.serialize&&o.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||o&&o.domainHost)try{e.host=t.iri?v.toUnicode(e.host):v.toASCII(e.host.replace(r.PCT_ENCODED,T).toLowerCase())}catch(r){e.error=e.error||\"Host's domain name can not be converted to \"+(t.iri?\"Unicode\":\"ASCII\")+\" via punycode: \"+r}w(e,r),\"suffix\"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(\":\"));var s=function(e,t){var r=!1!==t.iri?a:i,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push(\"@\")),void 0!==e.host&&n.push(S(I(String(e.host),r),r).replace(r.IPV6ADDRESS,function(e,t,r){return\"[\"+t+(r?\"%25\"+r:\"\")+\"]\"})),\"number\"!=typeof e.port&&\"string\"!=typeof e.port||(n.push(\":\"),n.push(String(e.port))),n.length?n.join(\"\"):void 0}(e,t);if(void 0!==s&&(\"suffix\"!==t.reference&&n.push(\"//\"),n.push(s),e.path&&\"/\"!==e.path.charAt(0)&&n.push(\"/\")),void 0!==e.path){var l=e.path;t.absolutePath||o&&o.absolutePath||(l=B(l)),void 0===s&&(l=l.replace(/^\\/\\//,\"/%2F\")),n.push(l)}return void 0!==e.query&&(n.push(\"?\"),n.push(e.query)),void 0!==e.fragment&&(n.push(\"#\"),n.push(e.fragment)),n.join(\"\")}function $(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],o={};return n||(e=F(U(e,r),r),t=F(U(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=B(t.path||\"\"),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=B(t.path||\"\"),o.query=t.query):(t.path?(\"/\"===t.path.charAt(0)?o.path=B(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf(\"/\")+1)+t.path:o.path=t.path:o.path=\"/\"+t.path,o.path=B(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function G(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:i.PCT_ENCODED,T)}var V={scheme:\"http\",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||\"HTTP URIs must have a host.\"),e},serialize:function(e,t){var r=\"https\"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&\"\"!==e.port||(e.port=void 0),e.path||(e.path=\"/\"),e}},k={scheme:\"https\",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize};function W(e){return\"boolean\"==typeof e.secure?e.secure:\"wss\"===String(e.scheme).toLowerCase()}var Q={scheme:\"ws\",domainHost:!0,parse:function(e,t){var r=e;return r.secure=W(r),r.resourceName=(r.path||\"/\")+(r.query?\"?\"+r.query:\"\"),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(W(e)?443:80)&&\"\"!==e.port||(e.port=void 0),\"boolean\"==typeof e.secure&&(e.scheme=e.secure?\"wss\":\"ws\",e.secure=void 0),e.resourceName){var r=e.resourceName.split(\"?\"),n=l(r,2),o=n[0],s=n[1];e.path=o&&\"/\"!==o?o:void 0,e.query=s,e.resourceName=void 0}return e.fragment=void 0,e}},J={scheme:\"wss\",domainHost:Q.domainHost,parse:Q.parse,serialize:Q.serialize},K={},H=\"[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\",q=\"[0-9A-Fa-f]\",Y=r(r(\"%[EFef][0-9A-Fa-f]%\"+q+q+\"%\"+q+q)+\"|\"+r(\"%[89A-Fa-f][0-9A-Fa-f]%\"+q+q)+\"|\"+r(\"%\"+q+q)),z=t(\"[\\\\!\\\\$\\\\%\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]\",'[\\\\\"\\\\\\\\]'),X=new RegExp(H,\"g\"),Z=new RegExp(Y,\"g\"),ee=new RegExp(t(\"[^]\",\"[A-Za-z0-9\\\\!\\\\$\\\\%\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\",\"[\\\\.]\",'[\\\\\"]',z),\"g\"),te=new RegExp(t(\"[^]\",H,\"[\\\\!\\\\$\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]\"),\"g\"),re=te;function ne(e){var t=T(e);return t.match(X)?t:e}var oe={scheme:\"mailto\",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(\",\"):[];if(r.path=void 0,r.query){for(var o=!1,s={},i=r.query.split(\"&\"),a=0,l=i.length;a<l;++a){var u=i[a].split(\"=\");switch(u[0]){case\"to\":for(var c=u[1].split(\",\"),h=0,d=c.length;h<d;++h)n.push(c[h]);break;case\"subject\":r.subject=G(u[1],t);break;case\"body\":r.body=G(u[1],t);break;default:o=!0,s[G(u[0],t)]=G(u[1],t)}}o&&(r.headers=s)}r.query=void 0;for(var p=0,f=n.length;p<f;++p){var _=n[p].split(\"@\");if(_[0]=G(_[0]),t.unicodeSupport)_[1]=G(_[1],t).toLowerCase();else try{_[1]=v.toASCII(G(_[1],t).toLowerCase())}catch(e){r.error=r.error||\"Email address's domain name can not be converted to ASCII via punycode: \"+e}n[p]=_.join(\"@\")}return r},serialize:function(e,t){var r,n=e,s=null!=(r=e.to)?r instanceof Array?r:\"number\"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(s){for(var i=0,a=s.length;i<a;++i){var l=String(s[i]),u=l.lastIndexOf(\"@\"),c=l.slice(0,u).replace(Z,ne).replace(Z,o).replace(ee,b),h=l.slice(u+1);try{h=t.iri?v.toUnicode(h):v.toASCII(G(h,t).toLowerCase())}catch(e){n.error=n.error||\"Email address's domain name can not be converted to \"+(t.iri?\"Unicode\":\"ASCII\")+\" via punycode: \"+e}s[i]=c+\"@\"+h}n.path=s.join(\",\")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var p=[];for(var f in d)d[f]!==K[f]&&p.push(f.replace(Z,ne).replace(Z,o).replace(te,b)+\"=\"+d[f].replace(Z,ne).replace(Z,o).replace(re,b));return p.length&&(n.query=p.join(\"&\")),n}},se=/^([^\\:]+)\\:(.*)/,ie={scheme:\"urn\",parse:function(e,t){var r=e.path&&e.path.match(se),n=e;if(r){var o=t.scheme||n.scheme||\"urn\",s=r[1].toLowerCase(),i=r[2],a=o+\":\"+(t.nid||s),l=N[a];n.nid=s,n.nss=i,n.path=void 0,l&&(n=l.parse(n,t))}else n.error=n.error||\"URN can not be parsed.\";return n},serialize:function(e,t){var r=t.scheme||e.scheme||\"urn\",n=e.nid,o=r+\":\"+(t.nid||n),s=N[o];s&&(e=s.serialize(e,t));var i=e,a=e.nss;return i.path=(n||t.nid)+\":\"+a,i}},ae=/^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/,le={scheme:\"urn:uuid\",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ae)||(r.error=r.error||\"UUID is not valid.\"),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||\"\").toLowerCase(),r}};N[V.scheme]=V,N[k.scheme]=k,N[Q.scheme]=Q,N[J.scheme]=J,N[oe.scheme]=oe,N[ie.scheme]=ie,N[le.scheme]=le,e.SCHEMES=N,e.pctEncChar=b,e.pctDecChars=T,e.parse=F,e.removeDotSegments=B,e.serialize=U,e.resolveComponents=$,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:\"null\"},r);return U($(F(e,n),F(t,n),n,!0),n)},e.normalize=function(e,t){return\"string\"==typeof e?e=U(F(e,t),t):\"object\"===n(e)&&(e=F(U(e,t),t)),e},e.equal=function(e,t,r){return\"string\"==typeof e?e=U(F(e,r),r):\"object\"===n(e)&&(e=U(e,r)),\"string\"==typeof t?t=U(F(t,r),r):\"object\"===n(t)&&(t=U(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:i.ESCAPE,b)},e.unescapeComponent=G,Object.defineProperty(e,\"__esModule\",{value:!0})}(t)},function(e,t,r){\"use strict\";e.exports=function(e){for(var t,r=0,n=e.length,o=0;o<n;)r++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<n&&56320==(64512&(t=e.charCodeAt(o)))&&o++;return r}},function(e,t,r){\"use strict\";var n=e.exports=function(e,t,r){\"function\"==typeof t&&(r=t,t={}),function e(t,r,o,s,i,a,l,u,c,h){if(s&&\"object\"==typeof s&&!Array.isArray(s)){for(var d in r(s,i,a,l,u,c,h),s){var p=s[d];if(Array.isArray(p)){if(d in n.arrayKeywords)for(var f=0;f<p.length;f++)e(t,r,o,p[f],i+\"/\"+d+\"/\"+f,a,i,d,s,f)}else if(d in n.propsKeywords){if(p&&\"object\"==typeof p)for(var _ in p)e(t,r,o,p[_],i+\"/\"+d+\"/\"+_.replace(/~/g,\"~0\").replace(/\\//g,\"~1\"),a,i,d,s,_)}else(d in n.keywords||t.allKeys&&!(d in n.skipKeywords))&&e(t,r,o,p,i+\"/\"+d,a,i,d,s)}o(s,i,a,l,u,c,h)}}(t,\"function\"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,\"\",e)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,r){\"use strict\";var n=e.exports=function(){this._cache={}};n.prototype.put=function(e,t){this._cache[e]=t},n.prototype.get=function(e){return this._cache[e]},n.prototype.del=function(e){delete this._cache[e]},n.prototype.clear=function(){this._cache={}}},function(e,t,r){\"use strict\";var n=r(15),o=/^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31],i=/^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,a=/^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i,l=/^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,u=/^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i,c=/^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i,h=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,d=/^(?:\\/(?:[^~/]|~0|~1)*)*$/,p=/^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;function _(e){return e=\"full\"==e?\"full\":\"fast\",n.copy(_[e])}function E(e){var t=e.match(o);if(!t)return!1;var r=+t[1],n=+t[2],i=+t[3];return n>=1&&n<=12&&i>=1&&i<=(2==n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:s[n])}function m(e,t){var r=e.match(i);if(!r)return!1;var n=r[1],o=r[2],s=r[3],a=r[5];return(n<=23&&o<=59&&s<=59||23==n&&59==o&&60==s)&&(!t||a)}e.exports=_,_.fast={date:/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/,time:/^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\"date-time\":/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\"uri-reference\":/^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\"uri-template\":u,url:c,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,ipv6:/^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,regex:g,uuid:h,\"json-pointer\":d,\"json-pointer-uri-fragment\":p,\"relative-json-pointer\":f},_.full={date:E,time:m,\"date-time\":function(e){var t=e.split(R);return 2==t.length&&E(t[0])&&m(t[1],!0)},uri:function(e){return O.test(e)&&l.test(e)},\"uri-reference\":/^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,\"uri-template\":u,url:c,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:a,ipv4:/^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,ipv6:/^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,regex:g,uuid:h,\"json-pointer\":d,\"json-pointer-uri-fragment\":p,\"relative-json-pointer\":f};var R=/t|\\s/i;var O=/\\/|:/;var y=/[^\\\\]\\\\Z/;function g(e){if(y.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,r){\"use strict\";var n=r(170),o=r(15).toHash;e.exports=function(){var e=[{type:\"number\",rules:[{maximum:[\"exclusiveMaximum\"]},{minimum:[\"exclusiveMinimum\"]},\"multipleOf\",\"format\"]},{type:\"string\",rules:[\"maxLength\",\"minLength\",\"pattern\",\"format\"]},{type:\"array\",rules:[\"maxItems\",\"minItems\",\"items\",\"contains\",\"uniqueItems\"]},{type:\"object\",rules:[\"maxProperties\",\"minProperties\",\"required\",\"dependencies\",\"propertyNames\",{properties:[\"additionalProperties\",\"patternProperties\"]}]},{rules:[\"$ref\",\"const\",\"enum\",\"not\",\"anyOf\",\"oneOf\",\"allOf\",\"if\"]}],t=[\"type\",\"$comment\"];return e.all=o(t),e.types=o([\"number\",\"integer\",\"string\",\"array\",\"object\",\"boolean\",\"null\"]),e.forEach(function(r){r.rules=r.rules.map(function(r){var o;if(\"object\"==typeof r){var s=Object.keys(r)[0];o=r[s],r=s,o.forEach(function(r){t.push(r),e.all[r]=!0})}return t.push(r),e.all[r]={keyword:r,code:n[r],implements:o}}),e.all.$comment={keyword:\"$comment\",code:n.$comment},r.type&&(e.types[r.type]=r)}),e.keywords=o(t.concat([\"$schema\",\"$id\",\"id\",\"$data\",\"$async\",\"title\",\"description\",\"default\",\"definitions\",\"examples\",\"readOnly\",\"writeOnly\",\"contentMediaType\",\"contentEncoding\",\"additionalItems\",\"then\",\"else\"])),e.custom={},e}},function(e,t,r){\"use strict\";e.exports={$ref:r(171),allOf:r(172),anyOf:r(173),$comment:r(174),const:r(175),contains:r(176),dependencies:r(177),enum:r(178),format:r(179),if:r(180),items:r(181),maximum:r(83),minimum:r(83),maxItems:r(84),minItems:r(84),maxLength:r(85),minLength:r(85),maxProperties:r(86),minProperties:r(86),multipleOf:r(182),not:r(183),oneOf:r(184),pattern:r(185),properties:r(186),propertyNames:r(187),required:r(188),uniqueItems:r(189),validate:r(82)}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o,s=\" \",i=e.level,a=e.dataLevel,l=e.schema[t],u=e.errSchemaPath+\"/\"+t,c=!e.opts.allErrors,h=\"data\"+(a||\"\"),d=\"valid\"+i;if(\"#\"==l||\"#/\"==l)e.isRoot?(n=e.async,o=\"validate\"):(n=!0===e.root.schema.$async,o=\"root.refVal[0]\");else{var p=e.resolveRef(e.baseId,l,e.isRoot);if(void 0===p){var f=e.MissingRefError.message(e.baseId,l);if(\"fail\"==e.opts.missingRefs){e.logger.error(f),(R=R||[]).push(s),s=\"\",!1!==e.createErrors?(s+=\" { keyword: '$ref' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(u)+\" , params: { ref: '\"+e.util.escapeQuotes(l)+\"' } \",!1!==e.opts.messages&&(s+=\" , message: 'can\\\\'t resolve reference \"+e.util.escapeQuotes(l)+\"' \"),e.opts.verbose&&(s+=\" , schema: \"+e.util.toQuotedString(l)+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+h+\" \"),s+=\" } \"):s+=\" {} \";var _=s;s=R.pop(),!e.compositeRule&&c?e.async?s+=\" throw new ValidationError([\"+_+\"]); \":s+=\" validate.errors = [\"+_+\"]; return false; \":s+=\" var err = \"+_+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",c&&(s+=\" if (false) { \")}else{if(\"ignore\"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,l,f);e.logger.warn(f),c&&(s+=\" if (true) { \")}}else if(p.inline){var E=e.util.copy(e);E.level++;var m=\"valid\"+E.level;E.schema=p.schema,E.schemaPath=\"\",E.errSchemaPath=l,s+=\" \"+e.validate(E).replace(/validate\\.schema/g,p.code)+\" \",c&&(s+=\" if (\"+m+\") { \")}else n=!0===p.$async||e.async&&!1!==p.$async,o=p.code}if(o){var R;(R=R||[]).push(s),s=\"\",e.opts.passContext?s+=\" \"+o+\".call(this, \":s+=\" \"+o+\"( \",s+=\" \"+h+\", (dataPath || '')\",'\"\"'!=e.errorPath&&(s+=\" + \"+e.errorPath);var O=s+=\" , \"+(a?\"data\"+(a-1||\"\"):\"parentData\")+\" , \"+(a?e.dataPathArr[a]:\"parentDataProperty\")+\", rootData)  \";if(s=R.pop(),n){if(!e.async)throw new Error(\"async schema referenced by sync schema\");c&&(s+=\" var \"+d+\"; \"),s+=\" try { await \"+O+\"; \",c&&(s+=\" \"+d+\" = true; \"),s+=\" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; \",c&&(s+=\" \"+d+\" = false; \"),s+=\" } \",c&&(s+=\" if (\"+d+\") { \")}else s+=\" if (!\"+O+\") { if (vErrors === null) vErrors = \"+o+\".errors; else vErrors = vErrors.concat(\"+o+\".errors); errors = vErrors.length; } \",c&&(s+=\" else { \")}return s}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.schema[t],s=e.schemaPath+e.util.getProperty(t),i=e.errSchemaPath+\"/\"+t,a=!e.opts.allErrors,l=e.util.copy(e),u=\"\";l.level++;var c=\"valid\"+l.level,h=l.baseId,d=!0,p=o;if(p)for(var f,_=-1,E=p.length-1;_<E;)f=p[_+=1],(e.opts.strictKeywords?\"object\"==typeof f&&Object.keys(f).length>0||!1===f:e.util.schemaHasRules(f,e.RULES.all))&&(d=!1,l.schema=f,l.schemaPath=s+\"[\"+_+\"]\",l.errSchemaPath=i+\"/\"+_,n+=\"  \"+e.validate(l)+\" \",l.baseId=h,a&&(n+=\" if (\"+c+\") { \",u+=\"}\"));return a&&(n+=d?\" if (true) { \":\" \"+u.slice(0,-1)+\" \"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"valid\"+o,d=\"errs__\"+o,p=e.util.copy(e),f=\"\";p.level++;var _=\"valid\"+p.level;if(i.every(function(t){return e.opts.strictKeywords?\"object\"==typeof t&&Object.keys(t).length>0||!1===t:e.util.schemaHasRules(t,e.RULES.all)})){var E=p.baseId;n+=\" var \"+d+\" = errors; var \"+h+\" = false;  \";var m=e.compositeRule;e.compositeRule=p.compositeRule=!0;var R=i;if(R)for(var O,y=-1,g=R.length-1;y<g;)O=R[y+=1],p.schema=O,p.schemaPath=a+\"[\"+y+\"]\",p.errSchemaPath=l+\"/\"+y,n+=\"  \"+e.validate(p)+\" \",p.baseId=E,n+=\" \"+h+\" = \"+h+\" || \"+_+\"; if (!\"+h+\") { \",f+=\"}\";e.compositeRule=p.compositeRule=m,n+=\" \"+f+\" if (!\"+h+\") {   var err =   \",!1!==e.createErrors?(n+=\" { keyword: 'anyOf' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: {} \",!1!==e.opts.messages&&(n+=\" , message: 'should match some schema in anyOf' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \",n+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",!e.compositeRule&&u&&(e.async?n+=\" throw new ValidationError(vErrors); \":n+=\" validate.errors = vErrors; return false; \"),n+=\" } else {  errors = \"+d+\"; if (vErrors !== null) { if (\"+d+\") vErrors.length = \"+d+\"; else vErrors = null; } \",e.opts.allErrors&&(n+=\" } \")}else u&&(n+=\" if (true) { \");return n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.schema[t],s=e.errSchemaPath+\"/\"+t,i=(e.opts.allErrors,e.util.toQuotedString(o));return!0===e.opts.$comment?n+=\" console.log(\"+i+\");\":\"function\"==typeof e.opts.$comment&&(n+=\" self._opts.$comment(\"+i+\", \"+e.util.toQuotedString(s)+\", validate.root.schema);\"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"valid\"+o,d=e.opts.$data&&i&&i.$data;d&&(n+=\" var schema\"+o+\" = \"+e.util.getData(i.$data,s,e.dataPathArr)+\"; \"),d||(n+=\" var schema\"+o+\" = validate.schema\"+a+\";\"),n+=\"var \"+h+\" = equal(\"+c+\", schema\"+o+\"); if (!\"+h+\") {   \";var p=p||[];p.push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'const' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { allowedValue: schema\"+o+\" } \",!1!==e.opts.messages&&(n+=\" , message: 'should be equal to constant' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";var f=n;return n=p.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+f+\"]); \":n+=\" validate.errors = [\"+f+\"]; return false; \":n+=\" var err = \"+f+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" }\",u&&(n+=\" else { \"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"valid\"+o,d=\"errs__\"+o,p=e.util.copy(e);p.level++;var f=\"valid\"+p.level,_=\"i\"+o,E=p.dataLevel=e.dataLevel+1,m=\"data\"+E,R=e.baseId,O=e.opts.strictKeywords?\"object\"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all);if(n+=\"var \"+d+\" = errors;var \"+h+\";\",O){var y=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=i,p.schemaPath=a,p.errSchemaPath=l,n+=\" var \"+f+\" = false; for (var \"+_+\" = 0; \"+_+\" < \"+c+\".length; \"+_+\"++) { \",p.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers,!0);var g=c+\"[\"+_+\"]\";p.dataPathArr[E]=_;var A=e.validate(p);p.baseId=R,e.util.varOccurences(A,m)<2?n+=\" \"+e.util.varReplace(A,m,g)+\" \":n+=\" var \"+m+\" = \"+g+\"; \"+A+\" \",n+=\" if (\"+f+\") break; }  \",e.compositeRule=p.compositeRule=y,n+=\"  if (!\"+f+\") {\"}else n+=\" if (\"+c+\".length == 0) {\";var v=v||[];v.push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'contains' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: {} \",!1!==e.opts.messages&&(n+=\" , message: 'should contain a valid item' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";var N=n;return n=v.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+N+\"]); \":n+=\" validate.errors = [\"+N+\"]; return false; \":n+=\" var err = \"+N+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" } else { \",O&&(n+=\"  errors = \"+d+\"; if (vErrors !== null) { if (\"+d+\") vErrors.length = \"+d+\"; else vErrors = null; } \"),e.opts.allErrors&&(n+=\" } \"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"errs__\"+o,d=e.util.copy(e),p=\"\";d.level++;var f=\"valid\"+d.level,_={},E={},m=e.opts.ownProperties;for(g in i)if(\"__proto__\"!=g){var R=i[g],O=Array.isArray(R)?E:_;O[g]=R}n+=\"var \"+h+\" = errors;\";var y=e.errorPath;for(var g in n+=\"var missing\"+o+\";\",E)if((O=E[g]).length){if(n+=\" if ( \"+c+e.util.getProperty(g)+\" !== undefined \",m&&(n+=\" && Object.prototype.hasOwnProperty.call(\"+c+\", '\"+e.util.escapeQuotes(g)+\"') \"),u){n+=\" && ( \";var A=O;if(A)for(var v=-1,N=A.length-1;v<N;){S=A[v+=1],v&&(n+=\" || \"),n+=\" ( ( \"+(D=c+(F=e.util.getProperty(S)))+\" === undefined \",m&&(n+=\" || ! Object.prototype.hasOwnProperty.call(\"+c+\", '\"+e.util.escapeQuotes(S)+\"') \"),n+=\") && (missing\"+o+\" = \"+e.util.toQuotedString(e.opts.jsonPointers?S:F)+\") ) \"}n+=\")) {  \";var b=\"missing\"+o,T=\"' + \"+b+\" + '\";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(y,b,!0):y+\" + \"+b);var w=w||[];w.push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'dependencies' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { property: '\"+e.util.escapeQuotes(g)+\"', missingProperty: '\"+T+\"', depsCount: \"+O.length+\", deps: '\"+e.util.escapeQuotes(1==O.length?O[0]:O.join(\", \"))+\"' } \",!1!==e.opts.messages&&(n+=\" , message: 'should have \",1==O.length?n+=\"property \"+e.util.escapeQuotes(O[0]):n+=\"properties \"+e.util.escapeQuotes(O.join(\", \")),n+=\" when property \"+e.util.escapeQuotes(g)+\" is present' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";var P=n;n=w.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+P+\"]); \":n+=\" validate.errors = [\"+P+\"]; return false; \":n+=\" var err = \"+P+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \"}else{n+=\" ) { \";var I=O;if(I)for(var S,C=-1,x=I.length-1;C<x;){S=I[C+=1];var F=e.util.getProperty(S),D=(T=e.util.escapeQuotes(S),c+F);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(y,S,e.opts.jsonPointers)),n+=\" if ( \"+D+\" === undefined \",m&&(n+=\" || ! Object.prototype.hasOwnProperty.call(\"+c+\", '\"+e.util.escapeQuotes(S)+\"') \"),n+=\") {  var err =   \",!1!==e.createErrors?(n+=\" { keyword: 'dependencies' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { property: '\"+e.util.escapeQuotes(g)+\"', missingProperty: '\"+T+\"', depsCount: \"+O.length+\", deps: '\"+e.util.escapeQuotes(1==O.length?O[0]:O.join(\", \"))+\"' } \",!1!==e.opts.messages&&(n+=\" , message: 'should have \",1==O.length?n+=\"property \"+e.util.escapeQuotes(O[0]):n+=\"properties \"+e.util.escapeQuotes(O.join(\", \")),n+=\" when property \"+e.util.escapeQuotes(g)+\" is present' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \",n+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } \"}}n+=\" }   \",u&&(p+=\"}\",n+=\" else { \")}e.errorPath=y;var M=d.baseId;for(var g in _){R=_[g];(e.opts.strictKeywords?\"object\"==typeof R&&Object.keys(R).length>0||!1===R:e.util.schemaHasRules(R,e.RULES.all))&&(n+=\" \"+f+\" = true; if ( \"+c+e.util.getProperty(g)+\" !== undefined \",m&&(n+=\" && Object.prototype.hasOwnProperty.call(\"+c+\", '\"+e.util.escapeQuotes(g)+\"') \"),n+=\") { \",d.schema=R,d.schemaPath=a+e.util.getProperty(g),d.errSchemaPath=l+\"/\"+e.util.escapeFragment(g),n+=\"  \"+e.validate(d)+\" \",d.baseId=M,n+=\" }  \",u&&(n+=\" if (\"+f+\") { \",p+=\"}\"))}return u&&(n+=\"   \"+p+\" if (\"+h+\" == errors) {\"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"valid\"+o,d=e.opts.$data&&i&&i.$data;d&&(n+=\" var schema\"+o+\" = \"+e.util.getData(i.$data,s,e.dataPathArr)+\"; \");var p=\"i\"+o,f=\"schema\"+o;d||(n+=\" var \"+f+\" = validate.schema\"+a+\";\"),n+=\"var \"+h+\";\",d&&(n+=\" if (schema\"+o+\" === undefined) \"+h+\" = true; else if (!Array.isArray(schema\"+o+\")) \"+h+\" = false; else {\"),n+=h+\" = false;for (var \"+p+\"=0; \"+p+\"<\"+f+\".length; \"+p+\"++) if (equal(\"+c+\", \"+f+\"[\"+p+\"])) { \"+h+\" = true; break; }\",d&&(n+=\"  }  \"),n+=\" if (!\"+h+\") {   \";var _=_||[];_.push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'enum' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { allowedValues: schema\"+o+\" } \",!1!==e.opts.messages&&(n+=\" , message: 'should be equal to one of the allowed values' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";var E=n;return n=_.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+E+\"]); \":n+=\" validate.errors = [\"+E+\"]; return false; \":n+=\" var err = \"+E+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" }\",u&&(n+=\" else { \"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\");if(!1===e.opts.format)return u&&(n+=\" if (true) { \"),n;var h,d=e.opts.$data&&i&&i.$data;d?(n+=\" var schema\"+o+\" = \"+e.util.getData(i.$data,s,e.dataPathArr)+\"; \",h=\"schema\"+o):h=i;var p=e.opts.unknownFormats,f=Array.isArray(p);if(d){n+=\" var \"+(_=\"format\"+o)+\" = formats[\"+h+\"]; var \"+(E=\"isObject\"+o)+\" = typeof \"+_+\" == 'object' && !(\"+_+\" instanceof RegExp) && \"+_+\".validate; var \"+(m=\"formatType\"+o)+\" = \"+E+\" && \"+_+\".type || 'string'; if (\"+E+\") { \",e.async&&(n+=\" var async\"+o+\" = \"+_+\".async; \"),n+=\" \"+_+\" = \"+_+\".validate; } if (  \",d&&(n+=\" (\"+h+\" !== undefined && typeof \"+h+\" != 'string') || \"),n+=\" (\",\"ignore\"!=p&&(n+=\" (\"+h+\" && !\"+_+\" \",f&&(n+=\" && self._opts.unknownFormats.indexOf(\"+h+\") == -1 \"),n+=\") || \"),n+=\" (\"+_+\" && \"+m+\" == '\"+r+\"' && !(typeof \"+_+\" == 'function' ? \",e.async?n+=\" (async\"+o+\" ? await \"+_+\"(\"+c+\") : \"+_+\"(\"+c+\")) \":n+=\" \"+_+\"(\"+c+\") \",n+=\" : \"+_+\".test(\"+c+\"))))) {\"}else{var _;if(!(_=e.formats[i])){if(\"ignore\"==p)return e.logger.warn('unknown format \"'+i+'\" ignored in schema at path \"'+e.errSchemaPath+'\"'),u&&(n+=\" if (true) { \"),n;if(f&&p.indexOf(i)>=0)return u&&(n+=\" if (true) { \"),n;throw new Error('unknown format \"'+i+'\" is used in schema at path \"'+e.errSchemaPath+'\"')}var E,m=(E=\"object\"==typeof _&&!(_ instanceof RegExp)&&_.validate)&&_.type||\"string\";if(E){var R=!0===_.async;_=_.validate}if(m!=r)return u&&(n+=\" if (true) { \"),n;if(R){if(!e.async)throw new Error(\"async format in sync schema\");n+=\" if (!(await \"+(O=\"formats\"+e.util.getProperty(i)+\".validate\")+\"(\"+c+\"))) { \"}else{n+=\" if (! \";var O=\"formats\"+e.util.getProperty(i);E&&(O+=\".validate\"),n+=\"function\"==typeof _?\" \"+O+\"(\"+c+\") \":\" \"+O+\".test(\"+c+\") \",n+=\") { \"}}var y=y||[];y.push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'format' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { format:  \",n+=d?\"\"+h:\"\"+e.util.toQuotedString(i),n+=\"  } \",!1!==e.opts.messages&&(n+=\" , message: 'should match format \\\"\",n+=d?\"' + \"+h+\" + '\":\"\"+e.util.escapeQuotes(i),n+=\"\\\"' \"),e.opts.verbose&&(n+=\" , schema:  \",n+=d?\"validate.schema\"+a:\"\"+e.util.toQuotedString(i),n+=\"         , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";var g=n;return n=y.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+g+\"]); \":n+=\" validate.errors = [\"+g+\"]; return false; \":n+=\" var err = \"+g+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" } \",u&&(n+=\" else { \"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"valid\"+o,d=\"errs__\"+o,p=e.util.copy(e);p.level++;var f=\"valid\"+p.level,_=e.schema.then,E=e.schema.else,m=void 0!==_&&(e.opts.strictKeywords?\"object\"==typeof _&&Object.keys(_).length>0||!1===_:e.util.schemaHasRules(_,e.RULES.all)),R=void 0!==E&&(e.opts.strictKeywords?\"object\"==typeof E&&Object.keys(E).length>0||!1===E:e.util.schemaHasRules(E,e.RULES.all)),O=p.baseId;if(m||R){var y;p.createErrors=!1,p.schema=i,p.schemaPath=a,p.errSchemaPath=l,n+=\" var \"+d+\" = errors; var \"+h+\" = true;  \";var g=e.compositeRule;e.compositeRule=p.compositeRule=!0,n+=\"  \"+e.validate(p)+\" \",p.baseId=O,p.createErrors=!0,n+=\"  errors = \"+d+\"; if (vErrors !== null) { if (\"+d+\") vErrors.length = \"+d+\"; else vErrors = null; }  \",e.compositeRule=p.compositeRule=g,m?(n+=\" if (\"+f+\") {  \",p.schema=e.schema.then,p.schemaPath=e.schemaPath+\".then\",p.errSchemaPath=e.errSchemaPath+\"/then\",n+=\"  \"+e.validate(p)+\" \",p.baseId=O,n+=\" \"+h+\" = \"+f+\"; \",m&&R?n+=\" var \"+(y=\"ifClause\"+o)+\" = 'then'; \":y=\"'then'\",n+=\" } \",R&&(n+=\" else { \")):n+=\" if (!\"+f+\") { \",R&&(p.schema=e.schema.else,p.schemaPath=e.schemaPath+\".else\",p.errSchemaPath=e.errSchemaPath+\"/else\",n+=\"  \"+e.validate(p)+\" \",p.baseId=O,n+=\" \"+h+\" = \"+f+\"; \",m&&R?n+=\" var \"+(y=\"ifClause\"+o)+\" = 'else'; \":y=\"'else'\",n+=\" } \"),n+=\" if (!\"+h+\") {   var err =   \",!1!==e.createErrors?(n+=\" { keyword: 'if' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { failingKeyword: \"+y+\" } \",!1!==e.opts.messages&&(n+=\" , message: 'should match \\\"' + \"+y+\" + '\\\" schema' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \",n+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",!e.compositeRule&&u&&(e.async?n+=\" throw new ValidationError(vErrors); \":n+=\" validate.errors = vErrors; return false; \"),n+=\" }   \",u&&(n+=\" else { \")}else u&&(n+=\" if (true) { \");return n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"valid\"+o,d=\"errs__\"+o,p=e.util.copy(e),f=\"\";p.level++;var _=\"valid\"+p.level,E=\"i\"+o,m=p.dataLevel=e.dataLevel+1,R=\"data\"+m,O=e.baseId;if(n+=\"var \"+d+\" = errors;var \"+h+\";\",Array.isArray(i)){var y=e.schema.additionalItems;if(!1===y){n+=\" \"+h+\" = \"+c+\".length <= \"+i.length+\"; \";var g=l;l=e.errSchemaPath+\"/additionalItems\",n+=\"  if (!\"+h+\") {   \";var A=A||[];A.push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'additionalItems' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { limit: \"+i.length+\" } \",!1!==e.opts.messages&&(n+=\" , message: 'should NOT have more than \"+i.length+\" items' \"),e.opts.verbose&&(n+=\" , schema: false , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";var v=n;n=A.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+v+\"]); \":n+=\" validate.errors = [\"+v+\"]; return false; \":n+=\" var err = \"+v+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" } \",l=g,u&&(f+=\"}\",n+=\" else { \")}var N=i;if(N)for(var b,T=-1,w=N.length-1;T<w;)if(b=N[T+=1],e.opts.strictKeywords?\"object\"==typeof b&&Object.keys(b).length>0||!1===b:e.util.schemaHasRules(b,e.RULES.all)){n+=\" \"+_+\" = true; if (\"+c+\".length > \"+T+\") { \";var P=c+\"[\"+T+\"]\";p.schema=b,p.schemaPath=a+\"[\"+T+\"]\",p.errSchemaPath=l+\"/\"+T,p.errorPath=e.util.getPathExpr(e.errorPath,T,e.opts.jsonPointers,!0),p.dataPathArr[m]=T;var I=e.validate(p);p.baseId=O,e.util.varOccurences(I,R)<2?n+=\" \"+e.util.varReplace(I,R,P)+\" \":n+=\" var \"+R+\" = \"+P+\"; \"+I+\" \",n+=\" }  \",u&&(n+=\" if (\"+_+\") { \",f+=\"}\")}if(\"object\"==typeof y&&(e.opts.strictKeywords?\"object\"==typeof y&&Object.keys(y).length>0||!1===y:e.util.schemaHasRules(y,e.RULES.all))){p.schema=y,p.schemaPath=e.schemaPath+\".additionalItems\",p.errSchemaPath=e.errSchemaPath+\"/additionalItems\",n+=\" \"+_+\" = true; if (\"+c+\".length > \"+i.length+\") {  for (var \"+E+\" = \"+i.length+\"; \"+E+\" < \"+c+\".length; \"+E+\"++) { \",p.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);P=c+\"[\"+E+\"]\";p.dataPathArr[m]=E;I=e.validate(p);p.baseId=O,e.util.varOccurences(I,R)<2?n+=\" \"+e.util.varReplace(I,R,P)+\" \":n+=\" var \"+R+\" = \"+P+\"; \"+I+\" \",u&&(n+=\" if (!\"+_+\") break; \"),n+=\" } }  \",u&&(n+=\" if (\"+_+\") { \",f+=\"}\")}}else if(e.opts.strictKeywords?\"object\"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){p.schema=i,p.schemaPath=a,p.errSchemaPath=l,n+=\"  for (var \"+E+\" = 0; \"+E+\" < \"+c+\".length; \"+E+\"++) { \",p.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0);P=c+\"[\"+E+\"]\";p.dataPathArr[m]=E;I=e.validate(p);p.baseId=O,e.util.varOccurences(I,R)<2?n+=\" \"+e.util.varReplace(I,R,P)+\" \":n+=\" var \"+R+\" = \"+P+\"; \"+I+\" \",u&&(n+=\" if (!\"+_+\") break; \"),n+=\" }\"}return u&&(n+=\" \"+f+\" if (\"+d+\" == errors) {\"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o=\" \",s=e.level,i=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+\"/\"+t,c=!e.opts.allErrors,h=\"data\"+(i||\"\"),d=e.opts.$data&&a&&a.$data;if(d?(o+=\" var schema\"+s+\" = \"+e.util.getData(a.$data,i,e.dataPathArr)+\"; \",n=\"schema\"+s):n=a,!d&&\"number\"!=typeof a)throw new Error(t+\" must be number\");o+=\"var division\"+s+\";if (\",d&&(o+=\" \"+n+\" !== undefined && ( typeof \"+n+\" != 'number' || \"),o+=\" (division\"+s+\" = \"+h+\" / \"+n+\", \",e.opts.multipleOfPrecision?o+=\" Math.abs(Math.round(division\"+s+\") - division\"+s+\") > 1e-\"+e.opts.multipleOfPrecision+\" \":o+=\" division\"+s+\" !== parseInt(division\"+s+\") \",o+=\" ) \",d&&(o+=\"  )  \"),o+=\" ) {   \";var p=p||[];p.push(o),o=\"\",!1!==e.createErrors?(o+=\" { keyword: 'multipleOf' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(u)+\" , params: { multipleOf: \"+n+\" } \",!1!==e.opts.messages&&(o+=\" , message: 'should be multiple of \",o+=d?\"' + \"+n:n+\"'\"),e.opts.verbose&&(o+=\" , schema:  \",o+=d?\"validate.schema\"+l:\"\"+a,o+=\"         , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+h+\" \"),o+=\" } \"):o+=\" {} \";var f=o;return o=p.pop(),!e.compositeRule&&c?e.async?o+=\" throw new ValidationError([\"+f+\"]); \":o+=\" validate.errors = [\"+f+\"]; return false; \":o+=\" var err = \"+f+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",o+=\"} \",c&&(o+=\" else { \"),o}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"errs__\"+o,d=e.util.copy(e);d.level++;var p=\"valid\"+d.level;if(e.opts.strictKeywords?\"object\"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=a,d.errSchemaPath=l,n+=\" var \"+h+\" = errors;  \";var f,_=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.createErrors=!1,d.opts.allErrors&&(f=d.opts.allErrors,d.opts.allErrors=!1),n+=\" \"+e.validate(d)+\" \",d.createErrors=!0,f&&(d.opts.allErrors=f),e.compositeRule=d.compositeRule=_,n+=\" if (\"+p+\") {   \";var E=E||[];E.push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'not' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: {} \",!1!==e.opts.messages&&(n+=\" , message: 'should NOT be valid' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";var m=n;n=E.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+m+\"]); \":n+=\" validate.errors = [\"+m+\"]; return false; \":n+=\" var err = \"+m+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" } else {  errors = \"+h+\"; if (vErrors !== null) { if (\"+h+\") vErrors.length = \"+h+\"; else vErrors = null; } \",e.opts.allErrors&&(n+=\" } \")}else n+=\"  var err =   \",!1!==e.createErrors?(n+=\" { keyword: 'not' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: {} \",!1!==e.opts.messages&&(n+=\" , message: 'should NOT be valid' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \",n+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",u&&(n+=\" if (false) { \");return n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"valid\"+o,d=\"errs__\"+o,p=e.util.copy(e),f=\"\";p.level++;var _=\"valid\"+p.level,E=p.baseId,m=\"prevValid\"+o,R=\"passingSchemas\"+o;n+=\"var \"+d+\" = errors , \"+m+\" = false , \"+h+\" = false , \"+R+\" = null; \";var O=e.compositeRule;e.compositeRule=p.compositeRule=!0;var y=i;if(y)for(var g,A=-1,v=y.length-1;A<v;)g=y[A+=1],(e.opts.strictKeywords?\"object\"==typeof g&&Object.keys(g).length>0||!1===g:e.util.schemaHasRules(g,e.RULES.all))?(p.schema=g,p.schemaPath=a+\"[\"+A+\"]\",p.errSchemaPath=l+\"/\"+A,n+=\"  \"+e.validate(p)+\" \",p.baseId=E):n+=\" var \"+_+\" = true; \",A&&(n+=\" if (\"+_+\" && \"+m+\") { \"+h+\" = false; \"+R+\" = [\"+R+\", \"+A+\"]; } else { \",f+=\"}\"),n+=\" if (\"+_+\") { \"+h+\" = \"+m+\" = true; \"+R+\" = \"+A+\"; }\";return e.compositeRule=p.compositeRule=O,n+=f+\"if (!\"+h+\") {   var err =   \",!1!==e.createErrors?(n+=\" { keyword: 'oneOf' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { passingSchemas: \"+R+\" } \",!1!==e.opts.messages&&(n+=\" , message: 'should match exactly one schema in oneOf' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \",n+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",!e.compositeRule&&u&&(e.async?n+=\" throw new ValidationError(vErrors); \":n+=\" validate.errors = vErrors; return false; \"),n+=\"} else {  errors = \"+d+\"; if (vErrors !== null) { if (\"+d+\") vErrors.length = \"+d+\"; else vErrors = null; }\",e.opts.allErrors&&(n+=\" } \"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o=\" \",s=e.level,i=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+\"/\"+t,c=!e.opts.allErrors,h=\"data\"+(i||\"\"),d=e.opts.$data&&a&&a.$data;d?(o+=\" var schema\"+s+\" = \"+e.util.getData(a.$data,i,e.dataPathArr)+\"; \",n=\"schema\"+s):n=a,o+=\"if ( \",d&&(o+=\" (\"+n+\" !== undefined && typeof \"+n+\" != 'string') || \"),o+=\" !\"+(d?\"(new RegExp(\"+n+\"))\":e.usePattern(a))+\".test(\"+h+\") ) {   \";var p=p||[];p.push(o),o=\"\",!1!==e.createErrors?(o+=\" { keyword: 'pattern' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(u)+\" , params: { pattern:  \",o+=d?\"\"+n:\"\"+e.util.toQuotedString(a),o+=\"  } \",!1!==e.opts.messages&&(o+=\" , message: 'should match pattern \\\"\",o+=d?\"' + \"+n+\" + '\":\"\"+e.util.escapeQuotes(a),o+=\"\\\"' \"),e.opts.verbose&&(o+=\" , schema:  \",o+=d?\"validate.schema\"+l:\"\"+e.util.toQuotedString(a),o+=\"         , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+h+\" \"),o+=\" } \"):o+=\" {} \";var f=o;return o=p.pop(),!e.compositeRule&&c?e.async?o+=\" throw new ValidationError([\"+f+\"]); \":o+=\" validate.errors = [\"+f+\"]; return false; \":o+=\" var err = \"+f+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",o+=\"} \",c&&(o+=\" else { \"),o}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"errs__\"+o,d=e.util.copy(e),p=\"\";d.level++;var f=\"valid\"+d.level,_=\"key\"+o,E=\"idx\"+o,m=d.dataLevel=e.dataLevel+1,R=\"data\"+m,O=\"dataProperties\"+o,y=Object.keys(i||{}).filter(F),g=e.schema.patternProperties||{},A=Object.keys(g).filter(F),v=e.schema.additionalProperties,N=y.length||A.length,b=!1===v,T=\"object\"==typeof v&&Object.keys(v).length,w=e.opts.removeAdditional,P=b||T||w,I=e.opts.ownProperties,S=e.baseId,C=e.schema.required;if(C&&(!e.opts.$data||!C.$data)&&C.length<e.opts.loopRequired)var x=e.util.toHash(C);function F(e){return\"__proto__\"!==e}if(n+=\"var \"+h+\" = errors;var \"+f+\" = true;\",I&&(n+=\" var \"+O+\" = undefined;\"),P){if(n+=I?\" \"+O+\" = \"+O+\" || Object.keys(\"+c+\"); for (var \"+E+\"=0; \"+E+\"<\"+O+\".length; \"+E+\"++) { var \"+_+\" = \"+O+\"[\"+E+\"]; \":\" for (var \"+_+\" in \"+c+\") { \",N){if(n+=\" var isAdditional\"+o+\" = !(false \",y.length)if(y.length>8)n+=\" || validate.schema\"+a+\".hasOwnProperty(\"+_+\") \";else{var D=y;if(D)for(var M=-1,j=D.length-1;M<j;)q=D[M+=1],n+=\" || \"+_+\" == \"+e.util.toQuotedString(q)+\" \"}if(A.length){var L=A;if(L)for(var B=-1,U=L.length-1;B<U;)se=L[B+=1],n+=\" || \"+e.usePattern(se)+\".test(\"+_+\") \"}n+=\" ); if (isAdditional\"+o+\") { \"}if(\"all\"==w)n+=\" delete \"+c+\"[\"+_+\"]; \";else{var $=e.errorPath,G=\"' + \"+_+\" + '\";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers)),b)if(w)n+=\" delete \"+c+\"[\"+_+\"]; \";else{n+=\" \"+f+\" = false; \";var V=l;l=e.errSchemaPath+\"/additionalProperties\",(re=re||[]).push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { additionalProperty: '\"+G+\"' } \",!1!==e.opts.messages&&(n+=\" , message: '\",e.opts._errorDataPathProperty?n+=\"is an invalid additional property\":n+=\"should NOT have additional properties\",n+=\"' \"),e.opts.verbose&&(n+=\" , schema: false , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";var k=n;n=re.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+k+\"]); \":n+=\" validate.errors = [\"+k+\"]; return false; \":n+=\" var err = \"+k+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",l=V,u&&(n+=\" break; \")}else if(T)if(\"failing\"==w){n+=\" var \"+h+\" = errors;  \";var W=e.compositeRule;e.compositeRule=d.compositeRule=!0,d.schema=v,d.schemaPath=e.schemaPath+\".additionalProperties\",d.errSchemaPath=e.errSchemaPath+\"/additionalProperties\",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);var Q=c+\"[\"+_+\"]\";d.dataPathArr[m]=_;var J=e.validate(d);d.baseId=S,e.util.varOccurences(J,R)<2?n+=\" \"+e.util.varReplace(J,R,Q)+\" \":n+=\" var \"+R+\" = \"+Q+\"; \"+J+\" \",n+=\" if (!\"+f+\") { errors = \"+h+\"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete \"+c+\"[\"+_+\"]; }  \",e.compositeRule=d.compositeRule=W}else{d.schema=v,d.schemaPath=e.schemaPath+\".additionalProperties\",d.errSchemaPath=e.errSchemaPath+\"/additionalProperties\",d.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);Q=c+\"[\"+_+\"]\";d.dataPathArr[m]=_;J=e.validate(d);d.baseId=S,e.util.varOccurences(J,R)<2?n+=\" \"+e.util.varReplace(J,R,Q)+\" \":n+=\" var \"+R+\" = \"+Q+\"; \"+J+\" \",u&&(n+=\" if (!\"+f+\") break; \")}e.errorPath=$}N&&(n+=\" } \"),n+=\" }  \",u&&(n+=\" if (\"+f+\") { \",p+=\"}\")}var K=e.opts.useDefaults&&!e.compositeRule;if(y.length){var H=y;if(H)for(var q,Y=-1,z=H.length-1;Y<z;){var X=i[q=H[Y+=1]];if(e.opts.strictKeywords?\"object\"==typeof X&&Object.keys(X).length>0||!1===X:e.util.schemaHasRules(X,e.RULES.all)){var Z=e.util.getProperty(q),ee=(Q=c+Z,K&&void 0!==X.default);d.schema=X,d.schemaPath=a+Z,d.errSchemaPath=l+\"/\"+e.util.escapeFragment(q),d.errorPath=e.util.getPath(e.errorPath,q,e.opts.jsonPointers),d.dataPathArr[m]=e.util.toQuotedString(q);J=e.validate(d);if(d.baseId=S,e.util.varOccurences(J,R)<2){J=e.util.varReplace(J,R,Q);var te=Q}else{te=R;n+=\" var \"+R+\" = \"+Q+\"; \"}if(ee)n+=\" \"+J+\" \";else{if(x&&x[q]){n+=\" if ( \"+te+\" === undefined \",I&&(n+=\" || ! Object.prototype.hasOwnProperty.call(\"+c+\", '\"+e.util.escapeQuotes(q)+\"') \"),n+=\") { \"+f+\" = false; \";$=e.errorPath,V=l;var re,ne=e.util.escapeQuotes(q);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath($,q,e.opts.jsonPointers)),l=e.errSchemaPath+\"/required\",(re=re||[]).push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'required' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { missingProperty: '\"+ne+\"' } \",!1!==e.opts.messages&&(n+=\" , message: '\",e.opts._errorDataPathProperty?n+=\"is a required property\":n+=\"should have required property \\\\'\"+ne+\"\\\\'\",n+=\"' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";k=n;n=re.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+k+\"]); \":n+=\" validate.errors = [\"+k+\"]; return false; \":n+=\" var err = \"+k+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",l=V,e.errorPath=$,n+=\" } else { \"}else u?(n+=\" if ( \"+te+\" === undefined \",I&&(n+=\" || ! Object.prototype.hasOwnProperty.call(\"+c+\", '\"+e.util.escapeQuotes(q)+\"') \"),n+=\") { \"+f+\" = true; } else { \"):(n+=\" if (\"+te+\" !== undefined \",I&&(n+=\" &&   Object.prototype.hasOwnProperty.call(\"+c+\", '\"+e.util.escapeQuotes(q)+\"') \"),n+=\" ) { \");n+=\" \"+J+\" } \"}}u&&(n+=\" if (\"+f+\") { \",p+=\"}\")}}if(A.length){var oe=A;if(oe)for(var se,ie=-1,ae=oe.length-1;ie<ae;){X=g[se=oe[ie+=1]];if(e.opts.strictKeywords?\"object\"==typeof X&&Object.keys(X).length>0||!1===X:e.util.schemaHasRules(X,e.RULES.all)){d.schema=X,d.schemaPath=e.schemaPath+\".patternProperties\"+e.util.getProperty(se),d.errSchemaPath=e.errSchemaPath+\"/patternProperties/\"+e.util.escapeFragment(se),n+=I?\" \"+O+\" = \"+O+\" || Object.keys(\"+c+\"); for (var \"+E+\"=0; \"+E+\"<\"+O+\".length; \"+E+\"++) { var \"+_+\" = \"+O+\"[\"+E+\"]; \":\" for (var \"+_+\" in \"+c+\") { \",n+=\" if (\"+e.usePattern(se)+\".test(\"+_+\")) { \",d.errorPath=e.util.getPathExpr(e.errorPath,_,e.opts.jsonPointers);Q=c+\"[\"+_+\"]\";d.dataPathArr[m]=_;J=e.validate(d);d.baseId=S,e.util.varOccurences(J,R)<2?n+=\" \"+e.util.varReplace(J,R,Q)+\" \":n+=\" var \"+R+\" = \"+Q+\"; \"+J+\" \",u&&(n+=\" if (!\"+f+\") break; \"),n+=\" } \",u&&(n+=\" else \"+f+\" = true; \"),n+=\" }  \",u&&(n+=\" if (\"+f+\") { \",p+=\"}\")}}}return u&&(n+=\" \"+p+\" if (\"+h+\" == errors) {\"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"errs__\"+o,d=e.util.copy(e);d.level++;var p=\"valid\"+d.level;if(n+=\"var \"+h+\" = errors;\",e.opts.strictKeywords?\"object\"==typeof i&&Object.keys(i).length>0||!1===i:e.util.schemaHasRules(i,e.RULES.all)){d.schema=i,d.schemaPath=a,d.errSchemaPath=l;var f=\"key\"+o,_=\"idx\"+o,E=\"i\"+o,m=\"' + \"+f+\" + '\",R=\"data\"+(d.dataLevel=e.dataLevel+1),O=\"dataProperties\"+o,y=e.opts.ownProperties,g=e.baseId;y&&(n+=\" var \"+O+\" = undefined; \"),n+=y?\" \"+O+\" = \"+O+\" || Object.keys(\"+c+\"); for (var \"+_+\"=0; \"+_+\"<\"+O+\".length; \"+_+\"++) { var \"+f+\" = \"+O+\"[\"+_+\"]; \":\" for (var \"+f+\" in \"+c+\") { \",n+=\" var startErrs\"+o+\" = errors; \";var A=f,v=e.compositeRule;e.compositeRule=d.compositeRule=!0;var N=e.validate(d);d.baseId=g,e.util.varOccurences(N,R)<2?n+=\" \"+e.util.varReplace(N,R,A)+\" \":n+=\" var \"+R+\" = \"+A+\"; \"+N+\" \",e.compositeRule=d.compositeRule=v,n+=\" if (!\"+p+\") { for (var \"+E+\"=startErrs\"+o+\"; \"+E+\"<errors; \"+E+\"++) { vErrors[\"+E+\"].propertyName = \"+f+\"; }   var err =   \",!1!==e.createErrors?(n+=\" { keyword: 'propertyNames' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { propertyName: '\"+m+\"' } \",!1!==e.opts.messages&&(n+=\" , message: 'property name \\\\'\"+m+\"\\\\' is invalid' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \",n+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",!e.compositeRule&&u&&(e.async?n+=\" throw new ValidationError(vErrors); \":n+=\" validate.errors = vErrors; return false; \"),u&&(n+=\" break; \"),n+=\" } }\"}return u&&(n+=\"  if (\"+h+\" == errors) {\"),n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n=\" \",o=e.level,s=e.dataLevel,i=e.schema[t],a=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+\"/\"+t,u=!e.opts.allErrors,c=\"data\"+(s||\"\"),h=\"valid\"+o,d=e.opts.$data&&i&&i.$data;d&&(n+=\" var schema\"+o+\" = \"+e.util.getData(i.$data,s,e.dataPathArr)+\"; \");var p=\"schema\"+o;if(!d)if(i.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],_=i;if(_)for(var E,m=-1,R=_.length-1;m<R;){E=_[m+=1];var O=e.schema.properties[E];O&&(e.opts.strictKeywords?\"object\"==typeof O&&Object.keys(O).length>0||!1===O:e.util.schemaHasRules(O,e.RULES.all))||(f[f.length]=E)}}else f=i;if(d||f.length){var y=e.errorPath,g=d||f.length>=e.opts.loopRequired,A=e.opts.ownProperties;if(u)if(n+=\" var missing\"+o+\"; \",g){d||(n+=\" var \"+p+\" = validate.schema\"+a+\"; \");var v=\"' + \"+(I=\"schema\"+o+\"[\"+(T=\"i\"+o)+\"]\")+\" + '\";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(y,I,e.opts.jsonPointers)),n+=\" var \"+h+\" = true; \",d&&(n+=\" if (schema\"+o+\" === undefined) \"+h+\" = true; else if (!Array.isArray(schema\"+o+\")) \"+h+\" = false; else {\"),n+=\" for (var \"+T+\" = 0; \"+T+\" < \"+p+\".length; \"+T+\"++) { \"+h+\" = \"+c+\"[\"+p+\"[\"+T+\"]] !== undefined \",A&&(n+=\" &&   Object.prototype.hasOwnProperty.call(\"+c+\", \"+p+\"[\"+T+\"]) \"),n+=\"; if (!\"+h+\") break; } \",d&&(n+=\"  }  \"),n+=\"  if (!\"+h+\") {   \",(P=P||[]).push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'required' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { missingProperty: '\"+v+\"' } \",!1!==e.opts.messages&&(n+=\" , message: '\",e.opts._errorDataPathProperty?n+=\"is a required property\":n+=\"should have required property \\\\'\"+v+\"\\\\'\",n+=\"' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";var N=n;n=P.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+N+\"]); \":n+=\" validate.errors = [\"+N+\"]; return false; \":n+=\" var err = \"+N+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" } else { \"}else{n+=\" if ( \";var b=f;if(b)for(var T=-1,w=b.length-1;T<w;){C=b[T+=1],T&&(n+=\" || \"),n+=\" ( ( \"+(M=c+(D=e.util.getProperty(C)))+\" === undefined \",A&&(n+=\" || ! Object.prototype.hasOwnProperty.call(\"+c+\", '\"+e.util.escapeQuotes(C)+\"') \"),n+=\") && (missing\"+o+\" = \"+e.util.toQuotedString(e.opts.jsonPointers?C:D)+\") ) \"}n+=\") {  \";var P;v=\"' + \"+(I=\"missing\"+o)+\" + '\";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(y,I,!0):y+\" + \"+I),(P=P||[]).push(n),n=\"\",!1!==e.createErrors?(n+=\" { keyword: 'required' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { missingProperty: '\"+v+\"' } \",!1!==e.opts.messages&&(n+=\" , message: '\",e.opts._errorDataPathProperty?n+=\"is a required property\":n+=\"should have required property \\\\'\"+v+\"\\\\'\",n+=\"' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \";N=n;n=P.pop(),!e.compositeRule&&u?e.async?n+=\" throw new ValidationError([\"+N+\"]); \":n+=\" validate.errors = [\"+N+\"]; return false; \":n+=\" var err = \"+N+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",n+=\" } else { \"}else if(g){d||(n+=\" var \"+p+\" = validate.schema\"+a+\"; \");var I;v=\"' + \"+(I=\"schema\"+o+\"[\"+(T=\"i\"+o)+\"]\")+\" + '\";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(y,I,e.opts.jsonPointers)),d&&(n+=\" if (\"+p+\" && !Array.isArray(\"+p+\")) {  var err =   \",!1!==e.createErrors?(n+=\" { keyword: 'required' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { missingProperty: '\"+v+\"' } \",!1!==e.opts.messages&&(n+=\" , message: '\",e.opts._errorDataPathProperty?n+=\"is a required property\":n+=\"should have required property \\\\'\"+v+\"\\\\'\",n+=\"' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \",n+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (\"+p+\" !== undefined) { \"),n+=\" for (var \"+T+\" = 0; \"+T+\" < \"+p+\".length; \"+T+\"++) { if (\"+c+\"[\"+p+\"[\"+T+\"]] === undefined \",A&&(n+=\" || ! Object.prototype.hasOwnProperty.call(\"+c+\", \"+p+\"[\"+T+\"]) \"),n+=\") {  var err =   \",!1!==e.createErrors?(n+=\" { keyword: 'required' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { missingProperty: '\"+v+\"' } \",!1!==e.opts.messages&&(n+=\" , message: '\",e.opts._errorDataPathProperty?n+=\"is a required property\":n+=\"should have required property \\\\'\"+v+\"\\\\'\",n+=\"' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \",n+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } \",d&&(n+=\"  }  \")}else{var S=f;if(S)for(var C,x=-1,F=S.length-1;x<F;){C=S[x+=1];var D=e.util.getProperty(C),M=(v=e.util.escapeQuotes(C),c+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(y,C,e.opts.jsonPointers)),n+=\" if ( \"+M+\" === undefined \",A&&(n+=\" || ! Object.prototype.hasOwnProperty.call(\"+c+\", '\"+e.util.escapeQuotes(C)+\"') \"),n+=\") {  var err =   \",!1!==e.createErrors?(n+=\" { keyword: 'required' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(l)+\" , params: { missingProperty: '\"+v+\"' } \",!1!==e.opts.messages&&(n+=\" , message: '\",e.opts._errorDataPathProperty?n+=\"is a required property\":n+=\"should have required property \\\\'\"+v+\"\\\\'\",n+=\"' \"),e.opts.verbose&&(n+=\" , schema: validate.schema\"+a+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+c+\" \"),n+=\" } \"):n+=\" {} \",n+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } \"}}e.errorPath=y}else u&&(n+=\" if (true) {\");return n}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o=\" \",s=e.level,i=e.dataLevel,a=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+\"/\"+t,c=!e.opts.allErrors,h=\"data\"+(i||\"\"),d=\"valid\"+s,p=e.opts.$data&&a&&a.$data;if(p?(o+=\" var schema\"+s+\" = \"+e.util.getData(a.$data,i,e.dataPathArr)+\"; \",n=\"schema\"+s):n=a,(a||p)&&!1!==e.opts.uniqueItems){p&&(o+=\" var \"+d+\"; if (\"+n+\" === false || \"+n+\" === undefined) \"+d+\" = true; else if (typeof \"+n+\" != 'boolean') \"+d+\" = false; else { \"),o+=\" var i = \"+h+\".length , \"+d+\" = true , j; if (i > 1) { \";var f=e.schema.items&&e.schema.items.type,_=Array.isArray(f);if(!f||\"object\"==f||\"array\"==f||_&&(f.indexOf(\"object\")>=0||f.indexOf(\"array\")>=0))o+=\" outer: for (;i--;) { for (j = i; j--;) { if (equal(\"+h+\"[i], \"+h+\"[j])) { \"+d+\" = false; break outer; } } } \";else{o+=\" var itemIndices = {}, item; for (;i--;) { var item = \"+h+\"[i]; \";var E=\"checkDataType\"+(_?\"s\":\"\");o+=\" if (\"+e.util[E](f,\"item\",e.opts.strictNumbers,!0)+\") continue; \",_&&(o+=\" if (typeof item == 'string') item = '\\\"' + item; \"),o+=\" if (typeof itemIndices[item] == 'number') { \"+d+\" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } \"}o+=\" } \",p&&(o+=\"  }  \"),o+=\" if (!\"+d+\") {   \";var m=m||[];m.push(o),o=\"\",!1!==e.createErrors?(o+=\" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(u)+\" , params: { i: i, j: j } \",!1!==e.opts.messages&&(o+=\" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' \"),e.opts.verbose&&(o+=\" , schema:  \",o+=p?\"validate.schema\"+l:\"\"+a,o+=\"         , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+h+\" \"),o+=\" } \"):o+=\" {} \";var R=o;o=m.pop(),!e.compositeRule&&c?e.async?o+=\" throw new ValidationError([\"+R+\"]); \":o+=\" validate.errors = [\"+R+\"]; return false; \":o+=\" var err = \"+R+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",o+=\" } \",c&&(o+=\" else { \")}else c&&(o+=\" if (true) { \");return o}},function(e,t,r){\"use strict\";var n=[\"multipleOf\",\"maximum\",\"exclusiveMaximum\",\"minimum\",\"exclusiveMinimum\",\"maxLength\",\"minLength\",\"pattern\",\"additionalItems\",\"maxItems\",\"minItems\",\"uniqueItems\",\"maxProperties\",\"minProperties\",\"required\",\"additionalProperties\",\"enum\",\"format\",\"const\"];e.exports=function(e,t){for(var r=0;r<t.length;r++){e=JSON.parse(JSON.stringify(e));var o,s=t[r].split(\"/\"),i=e;for(o=1;o<s.length;o++)i=i[s[o]];for(o=0;o<n.length;o++){var a=n[o],l=i[a];l&&(i[a]={anyOf:[l,{$ref:\"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\"}]})}}return e}},function(e,t,r){\"use strict\";var n=r(52).MissingRef;e.exports=function e(t,r,o){var s=this;if(\"function\"!=typeof this._opts.loadSchema)throw new Error(\"options.loadSchema should be a function\");\"function\"==typeof r&&(o=r,r=void 0);var i=a(t).then(function(){var e=s._addSchema(t,void 0,r);return e.validate||function e(t){try{return s._compile(t)}catch(e){if(e instanceof n)return function o(e){var o=e.missingSchema;if(u(o))throw new Error(\"Schema \"+o+\" is loaded but \"+e.missingRef+\" cannot be resolved\");var i=s._loadingSchemas[o];i||(i=s._loadingSchemas[o]=s._opts.loadSchema(o)).then(l,l);return i.then(function(e){if(!u(o))return a(e).then(function(){u(o)||s.addSchema(e,o,void 0,r)})}).then(function(){return function e(t){try{return s._compile(t)}catch(e){if(e instanceof n)return o(e);throw e}function o(n){var o=n.missingSchema;if(u(o))throw new Error(\"Schema \"+o+\" is loaded but \"+n.missingRef+\" cannot be resolved\");var i=s._loadingSchemas[o];return i||(i=s._loadingSchemas[o]=s._opts.loadSchema(o)).then(l,l),i.then(function(e){if(!u(o))return a(e).then(function(){u(o)||s.addSchema(e,o,void 0,r)})}).then(function(){return e(t)});function l(){delete s._loadingSchemas[o]}function u(e){return s._refs[e]||s._schemas[e]}}}(t)});function l(){delete s._loadingSchemas[o]}function u(e){return s._refs[e]||s._schemas[e]}}(e);throw e}function o(n){var o=n.missingSchema;if(u(o))throw new Error(\"Schema \"+o+\" is loaded but \"+n.missingRef+\" cannot be resolved\");var i=s._loadingSchemas[o];return i||(i=s._loadingSchemas[o]=s._opts.loadSchema(o)).then(l,l),i.then(function(e){if(!u(o))return a(e).then(function(){u(o)||s.addSchema(e,o,void 0,r)})}).then(function(){return e(t)});function l(){delete s._loadingSchemas[o]}function u(e){return s._refs[e]||s._schemas[e]}}}(e)});o&&i.then(function(e){o(null,e)},o);return i;function a(t){var r=t.$schema;return r&&!s.getSchema(r)?e.call(s,{$ref:r},!0):Promise.resolve()}}},function(e,t,r){\"use strict\";var n=/^[a-z_$][a-z0-9_$-]*$/i,o=r(193),s=r(194);e.exports={add:function(e,t){var r=this.RULES;if(r.keywords[e])throw new Error(\"Keyword \"+e+\" is already defined\");if(!n.test(e))throw new Error(\"Keyword \"+e+\" is not a valid identifier\");if(t){this.validateKeyword(t,!0);var s=t.type;if(Array.isArray(s))for(var i=0;i<s.length;i++)l(e,s[i],t);else l(e,s,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:\"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\"}]}),t.validateSchema=this.compile(a,!0))}function l(e,t,n){for(var s,i=0;i<r.length;i++){var a=r[i];if(a.type==t){s=a;break}}s||(s={type:t,rules:[]},r.push(s));var l={keyword:e,definition:n,custom:!0,code:o,implements:n.implements};s.rules.push(l),r.custom[e]=l}return r.keywords[e]=r.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var r=0;r<t.length;r++)for(var n=t[r].rules,o=0;o<n.length;o++)if(n[o].keyword==e){n.splice(o,1);break}return this},validate:function e(t,r){e.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(s,!0);if(n(t))return!0;e.errors=n.errors;if(r)throw new Error(\"custom keyword definition is invalid: \"+this.errorsText(n.errors));return!1}}},function(e,t,r){\"use strict\";e.exports=function(e,t,r){var n,o,s=\" \",i=e.level,a=e.dataLevel,l=e.schema[t],u=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+\"/\"+t,h=!e.opts.allErrors,d=\"data\"+(a||\"\"),p=\"valid\"+i,f=\"errs__\"+i,_=e.opts.$data&&l&&l.$data;_?(s+=\" var schema\"+i+\" = \"+e.util.getData(l.$data,a,e.dataPathArr)+\"; \",o=\"schema\"+i):o=l;var E,m,R,O,y,g=\"definition\"+i,A=this.definition,v=\"\";if(_&&A.$data){y=\"keywordValidate\"+i;var N=A.validateSchema;s+=\" var \"+g+\" = RULES.custom['\"+t+\"'].definition; var \"+y+\" = \"+g+\".validate;\"}else{if(!(O=e.useCustomRule(this,l,e.schema,e)))return;o=\"validate.schema\"+u,y=O.code,E=A.compile,m=A.inline,R=A.macro}var b=y+\".errors\",T=\"i\"+i,w=\"ruleErr\"+i,P=A.async;if(P&&!e.async)throw new Error(\"async keyword in sync schema\");if(m||R||(s+=b+\" = null;\"),s+=\"var \"+f+\" = errors;var \"+p+\";\",_&&A.$data&&(v+=\"}\",s+=\" if (\"+o+\" === undefined) { \"+p+\" = true; } else { \",N&&(v+=\"}\",s+=\" \"+p+\" = \"+g+\".validateSchema(\"+o+\"); if (\"+p+\") { \")),m)A.statements?s+=\" \"+O.validate+\" \":s+=\" \"+p+\" = \"+O.validate+\"; \";else if(R){var I=e.util.copy(e);v=\"\";I.level++;var S=\"valid\"+I.level;I.schema=O.validate,I.schemaPath=\"\";var C=e.compositeRule;e.compositeRule=I.compositeRule=!0;var x=e.validate(I).replace(/validate\\.schema/g,y);e.compositeRule=I.compositeRule=C,s+=\" \"+x}else{(j=j||[]).push(s),s=\"\",s+=\"  \"+y+\".call( \",e.opts.passContext?s+=\"this\":s+=\"self\",E||!1===A.schema?s+=\" , \"+d+\" \":s+=\" , \"+o+\" , \"+d+\" , validate.schema\"+e.schemaPath+\" \",s+=\" , (dataPath || '')\",'\"\"'!=e.errorPath&&(s+=\" + \"+e.errorPath);var F=a?\"data\"+(a-1||\"\"):\"parentData\",D=a?e.dataPathArr[a]:\"parentDataProperty\",M=s+=\" , \"+F+\" , \"+D+\" , rootData )  \";s=j.pop(),!1===A.errors?(s+=\" \"+p+\" = \",P&&(s+=\"await \"),s+=M+\"; \"):s+=P?\" var \"+(b=\"customErrors\"+i)+\" = null; try { \"+p+\" = await \"+M+\"; } catch (e) { \"+p+\" = false; if (e instanceof ValidationError) \"+b+\" = e.errors; else throw e; } \":\" \"+b+\" = null; \"+p+\" = \"+M+\"; \"}if(A.modifying&&(s+=\" if (\"+F+\") \"+d+\" = \"+F+\"[\"+D+\"];\"),s+=\"\"+v,A.valid)h&&(s+=\" if (true) { \");else{var j;s+=\" if ( \",void 0===A.valid?(s+=\" !\",s+=R?\"\"+S:\"\"+p):s+=\" \"+!A.valid+\" \",s+=\") { \",n=this.keyword,(j=j||[]).push(s),s=\"\",(j=j||[]).push(s),s=\"\",!1!==e.createErrors?(s+=\" { keyword: '\"+(n||\"custom\")+\"' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(c)+\" , params: { keyword: '\"+this.keyword+\"' } \",!1!==e.opts.messages&&(s+=\" , message: 'should pass \\\"\"+this.keyword+\"\\\" keyword validation' \"),e.opts.verbose&&(s+=\" , schema: validate.schema\"+u+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+d+\" \"),s+=\" } \"):s+=\" {} \";var L=s;s=j.pop(),!e.compositeRule&&h?e.async?s+=\" throw new ValidationError([\"+L+\"]); \":s+=\" validate.errors = [\"+L+\"]; return false; \":s+=\" var err = \"+L+\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \";var B=s;s=j.pop(),m?A.errors?\"full\"!=A.errors&&(s+=\"  for (var \"+T+\"=\"+f+\"; \"+T+\"<errors; \"+T+\"++) { var \"+w+\" = vErrors[\"+T+\"]; if (\"+w+\".dataPath === undefined) \"+w+\".dataPath = (dataPath || '') + \"+e.errorPath+\"; if (\"+w+\".schemaPath === undefined) { \"+w+'.schemaPath = \"'+c+'\"; } ',e.opts.verbose&&(s+=\" \"+w+\".schema = \"+o+\"; \"+w+\".data = \"+d+\"; \"),s+=\" } \"):!1===A.errors?s+=\" \"+B+\" \":(s+=\" if (\"+f+\" == errors) { \"+B+\" } else {  for (var \"+T+\"=\"+f+\"; \"+T+\"<errors; \"+T+\"++) { var \"+w+\" = vErrors[\"+T+\"]; if (\"+w+\".dataPath === undefined) \"+w+\".dataPath = (dataPath || '') + \"+e.errorPath+\"; if (\"+w+\".schemaPath === undefined) { \"+w+'.schemaPath = \"'+c+'\"; } ',e.opts.verbose&&(s+=\" \"+w+\".schema = \"+o+\"; \"+w+\".data = \"+d+\"; \"),s+=\" } } \"):R?(s+=\"   var err =   \",!1!==e.createErrors?(s+=\" { keyword: '\"+(n||\"custom\")+\"' , dataPath: (dataPath || '') + \"+e.errorPath+\" , schemaPath: \"+e.util.toQuotedString(c)+\" , params: { keyword: '\"+this.keyword+\"' } \",!1!==e.opts.messages&&(s+=\" , message: 'should pass \\\"\"+this.keyword+\"\\\" keyword validation' \"),e.opts.verbose&&(s+=\" , schema: validate.schema\"+u+\" , parentSchema: validate.schema\"+e.schemaPath+\" , data: \"+d+\" \"),s+=\" } \"):s+=\" {} \",s+=\";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; \",!e.compositeRule&&h&&(e.async?s+=\" throw new ValidationError(vErrors); \":s+=\" validate.errors = vErrors; return false; \")):!1===A.errors?s+=\" \"+B+\" \":(s+=\" if (Array.isArray(\"+b+\")) { if (vErrors === null) vErrors = \"+b+\"; else vErrors = vErrors.concat(\"+b+\"); errors = vErrors.length;  for (var \"+T+\"=\"+f+\"; \"+T+\"<errors; \"+T+\"++) { var \"+w+\" = vErrors[\"+T+\"]; if (\"+w+\".dataPath === undefined) \"+w+\".dataPath = (dataPath || '') + \"+e.errorPath+\";  \"+w+'.schemaPath = \"'+c+'\";  ',e.opts.verbose&&(s+=\" \"+w+\".schema = \"+o+\"; \"+w+\".data = \"+d+\"; \"),s+=\" } } else { \"+B+\" } \"),s+=\" } \",h&&(s+=\" else { \")}return s}},function(e,t,r){\"use strict\";var n=r(87);e.exports={$id:\"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js\",definitions:{simpleTypes:n.definitions.simpleTypes},type:\"object\",dependencies:{schema:[\"validate\"],$data:[\"validate\"],statements:[\"inline\"],valid:{not:{required:[\"macro\"]}}},properties:{type:n.properties.type,schema:{type:\"boolean\"},statements:{type:\"boolean\"},dependencies:{type:\"array\",items:{type:\"string\"}},metaSchema:{type:\"object\"},modifying:{type:\"boolean\"},valid:{type:\"boolean\"},$data:{type:\"boolean\"},async:{type:\"boolean\"},errors:{anyOf:[{type:\"boolean\"},{const:\"full\"}]}}}},function(e){e.exports={$schema:\"http://json-schema.org/draft-07/schema#\",$id:\"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",description:\"Meta-schema for $data reference (JSON Schema extension proposal)\",type:\"object\",required:[\"$data\"],properties:{$data:{type:\"string\",anyOf:[{format:\"relative-json-pointer\"},{format:\"json-pointer\"}]}},additionalProperties:!1}},function(e,t,r){\"use strict\";function n(e,t,r,o){this.message=e,this.expected=t,this.found=r,this.location=o,this.name=\"SyntaxError\",\"function\"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,n)}!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(n,Error),n.buildMessage=function(e,t){var r={literal:function(e){return'\"'+o(e.text)+'\"'},class:function(e){var t,r=\"\";for(t=0;t<e.parts.length;t++)r+=e.parts[t]instanceof Array?s(e.parts[t][0])+\"-\"+s(e.parts[t][1]):s(e.parts[t]);return\"[\"+(e.inverted?\"^\":\"\")+r+\"]\"},any:function(e){return\"any character\"},end:function(e){return\"end of input\"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"').replace(/\\0/g,\"\\\\0\").replace(/\\t/g,\"\\\\t\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/[\\x00-\\x0F]/g,function(e){return\"\\\\x0\"+n(e)}).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,function(e){return\"\\\\x\"+n(e)})}function s(e){return e.replace(/\\\\/g,\"\\\\\\\\\").replace(/\\]/g,\"\\\\]\").replace(/\\^/g,\"\\\\^\").replace(/-/g,\"\\\\-\").replace(/\\0/g,\"\\\\0\").replace(/\\t/g,\"\\\\t\").replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/[\\x00-\\x0F]/g,function(e){return\"\\\\x0\"+n(e)}).replace(/[\\x10-\\x1F\\x7F-\\x9F]/g,function(e){return\"\\\\x\"+n(e)})}return\"Expected \"+function(e){var t,n,o,s=new Array(e.length);for(t=0;t<e.length;t++)s[t]=(o=e[t],r[o.type](o));if(s.sort(),s.length>0){for(t=1,n=1;t<s.length;t++)s[t-1]!==s[t]&&(s[n]=s[t],n++);s.length=n}switch(s.length){case 1:return s[0];case 2:return s[0]+\" or \"+s[1];default:return s.slice(0,-1).join(\", \")+\", or \"+s[s.length-1]}}(e)+\" but \"+function(e){return e?'\"'+o(e)+'\"':\"end of input\"}(t)+\" found.\"},e.exports={SyntaxError:n,parse:function(e,t){t=void 0!==t?t:{};var r,o={},s={start:H},i=H,a=function(e){const t={$name:null,$relation:null,$modify:[],$recursive:!1,$allRecursive:!1,$childNames:[]};return\"*\"===e.$name?t.$allRecursive=!0:(oe(t,e),t[e.$name]=e,t.$childNames.push(e.$name)),t},l=function(e){const t={$name:null,$relation:null,$modify:[],$recursive:!1,$allRecursive:!1,$childNames:[]};return e.forEach(e=>{oe(t,e),t[e.$name]=e,t.$childNames.push(e.$name)}),t},u=function(e,t,r,n){const o={$name:null,$relation:null,$modify:[],$recursive:!1,$allRecursive:!1,$childNames:[]};return o.$name=r||e,o.$relation=e,o.$modify=t||[],n.forEach(e=>{oe(o,e),o[e.$name]=e,o.$childNames.push(e.$name)}),o},c=function(e,t,r,n){const o={$name:null,$relation:null,$modify:[],$recursive:!1,$allRecursive:!1,$childNames:[]};if(o.$name=r||e,o.$relation=e,o.$modify=t||[],n){const e=/^\\^(\\d*)$/.exec(n.$name);e?e[1]?o.$recursive=parseInt(e[1],10):o.$recursive=!0:\"*\"===n.$name?o.$allRecursive=!0:(oe(o,n),o[n.$name]=n,o.$childNames.push(n.$name))}return o},h=\"as\",d=V(\"as\",!1),p=function(e){return e},f=function(e){return e.join(\"\")},_=/^[^[\\](),. \\t\\r\\n]/,E=k([\"[\",\"]\",\"(\",\")\",\",\",\".\",\" \",\"\\t\",\"\\r\",\"\\n\"],!0,!1),m=\"(\",R=V(\"(\",!1),O=\")\",y=V(\")\",!1),g=function(e){return e},A=\",\",v=V(\",\",!1),N=function(e){return e},b=/^[ \\t\\r\\n]/,T=k([\" \",\"\\t\",\"\\r\",\"\\n\"],!1,!1),w=\".\",P=V(\".\",!1),I=function(e){return e},S=\"[\",C=V(\"[\",!1),x=\"]\",F=V(\"]\",!1),D=function(e){return e},M=function(e){return e},j=function(e){return e},L=0,B=[{line:1,column:1}],U=0,$=[],G=0;if(\"startRule\"in t){if(!(t.startRule in s))throw new Error(\"Can't start parsing from rule \\\"\"+t.startRule+'\".');i=s[t.startRule]}function V(e,t){return{type:\"literal\",text:e,ignoreCase:t}}function k(e,t,r){return{type:\"class\",parts:e,inverted:t,ignoreCase:r}}function W(t){var r,n=B[t];if(n)return n;for(r=t-1;!B[r];)r--;for(n={line:(n=B[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return B[t]=n,n}function Q(e,t){var r=W(e),n=W(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:n.line,column:n.column}}}function J(e){L<U||(L>U&&(U=L,$=[]),$.push(e))}function K(e,t,r){return new n(n.buildMessage(e,t),e,t,r)}function H(){var e,t;return e=L,(t=q())!==o&&(t=a(t)),(e=t)===o&&(e=L,(t=re())!==o&&(t=l(t)),e=t),e}function q(){var t,r,n,s,i;return t=L,(r=z())!==o?((n=Z())===o&&(n=null),n!==o?((s=Y())===o&&(s=null),s!==o&&(i=function(){var t,r,n,s;for(t=L,r=[],n=te();n!==o;)r.push(n),n=te();return r!==o?(46===e.charCodeAt(L)?(n=w,L++):(n=o,0===G&&J(P)),n!==o&&(s=re())!==o?(r=I(s),t=r):(L=t,t=o)):(L=t,t=o),t}())!==o?t=r=u(r,n,s,i):(L=t,t=o)):(L=t,t=o)):(L=t,t=o),t===o&&(t=L,(r=z())!==o?((n=Z())===o&&(n=null),n!==o?((s=Y())===o&&(s=null),s!==o?((i=function(){var t,r,n,s,i,a,l;for(t=L,r=[],n=te();n!==o;)r.push(n),n=te();if(r!==o)if(46===e.charCodeAt(L)?(n=w,L++):(n=o,0===G&&J(P)),n!==o){for(s=[],i=te();i!==o;)s.push(i),i=te();if(s!==o)if((i=q())!==o){for(a=[],l=te();l!==o;)a.push(l),l=te();a!==o?(r=j(i),t=r):(L=t,t=o)}else L=t,t=o;else L=t,t=o}else L=t,t=o;else L=t,t=o;return t}())===o&&(i=null),i!==o?t=r=c(r,n,s,i):(L=t,t=o)):(L=t,t=o)):(L=t,t=o)):(L=t,t=o)),t}function Y(){var t,r,n,s,i;if(t=L,r=[],(n=te())!==o)for(;n!==o;)r.push(n),n=te();else r=o;if(r!==o)if(e.substr(L,2)===h?(n=h,L+=2):(n=o,0===G&&J(d)),n!==o){if(s=[],(i=te())!==o)for(;i!==o;)s.push(i),i=te();else s=o;s!==o&&(i=z())!==o?t=r=p(i):(L=t,t=o)}else L=t,t=o;else L=t,t=o;return t}function z(){var e,t;if(L,e=[],(t=X())!==o)for(;t!==o;)e.push(t),t=X();else e=o;return e!==o&&(e=f(e)),e}function X(){var t;return _.test(e.charAt(L))?(t=e.charAt(L),L++):(t=o,0===G&&J(E)),t}function Z(){var t,r,n,s,i,a;for(t=L,r=[],n=te();n!==o;)r.push(n),n=te();if(r!==o)if(40===e.charCodeAt(L)?(n=m,L++):(n=o,0===G&&J(R)),n!==o){for(s=[],i=ee();i!==o;)s.push(i),i=ee();if(s!==o){for(i=[],a=te();a!==o;)i.push(a),a=te();i!==o?(41===e.charCodeAt(L)?(a=O,L++):(a=o,0===G&&J(y)),a!==o?t=r=g(s):(L=t,t=o)):(L=t,t=o)}else L=t,t=o}else L=t,t=o;else L=t,t=o;return t}function ee(){var t,r,n,s,i;for(t=L,r=[],n=te();n!==o;)r.push(n),n=te();if(r!==o)if((n=z())!==o){for(s=[],i=te();i!==o;)s.push(i),i=te();s!==o?(44===e.charCodeAt(L)?(i=A,L++):(i=o,0===G&&J(v)),i===o&&(i=null),i!==o?t=r=N(n):(L=t,t=o)):(L=t,t=o)}else L=t,t=o;else L=t,t=o;return t}function te(){var t;return b.test(e.charAt(L))?(t=e.charAt(L),L++):(t=o,0===G&&J(T)),t}function re(){var t,r,n,s,i,a,l,u;for(t=L,r=[],n=te();n!==o;)r.push(n),n=te();if(r!==o)if(91===e.charCodeAt(L)?(n=S,L++):(n=o,0===G&&J(C)),n!==o){for(s=[],i=ne();i!==o;)s.push(i),i=ne();if(s!==o){for(i=[],a=te();a!==o;)i.push(a),a=te();if(i!==o)if(93===e.charCodeAt(L)?(a=x,L++):(a=o,0===G&&J(F)),a!==o){for(l=[],u=te();u!==o;)l.push(u),u=te();l!==o?t=r=D(s):(L=t,t=o)}else L=t,t=o;else L=t,t=o}else L=t,t=o}else L=t,t=o;else L=t,t=o;return t}function ne(){var t,r,n,s,i;for(t=L,r=[],n=te();n!==o;)r.push(n),n=te();if(r!==o)if((n=q())!==o){for(s=[],i=te();i!==o;)s.push(i),i=te();s!==o?(44===e.charCodeAt(L)?(i=A,L++):(i=o,0===G&&J(v)),i===o&&(i=null),i!==o?t=r=M(n):(L=t,t=o)):(L=t,t=o)}else L=t,t=o;else L=t,t=o;return t}function oe(e,t){t.$name in e&&console.warn(`Duplicate relation \"${t.$name}\" in a relation expression. You should use \"a.[b, c]\" instead of \"[a.b, a.c]\". This will cause an error in objection 2.0`)}if((r=i())!==o&&L===e.length)return r;throw r!==o&&L<e.length&&J({type:\"end\"}),K($,U<e.length?e.charAt(U):null,U<e.length?Q(U,U+1):Q(U,U))}}},function(e,t,r){\"use strict\";const{QueryBuilderContextBase:n}=r(90);e.exports={QueryBuilderContext:class extends n{constructor(e){super(e),this.runBefore=[],this.runAfter=[],this.onBuild=[]}clone(){const e=super.clone();return e.runBefore=this.runBefore.slice(),e.runAfter=this.runAfter.slice(),e.onBuild=this.onBuild.slice(),e}}}},function(e,t,r){\"use strict\";e.exports={InternalOptions:class{constructor(){this.skipUndefined=!1,this.keepImplicitJoinProps=!1,this.isInternalQuery=!1,this.debug=!1,this.schema=void 0}clone(){const e=new this.constructor;return e.skipUndefined=this.skipUndefined,e.keepImplicitJoinProps=this.keepImplicitJoinProps,e.isInternalQuery=this.isInternalQuery,e.debug=this.debug,e.schema=this.schema,e}}}},function(e,t,r){\"use strict\";const n=Symbol();e.exports={QueryBuilderUserContext:class{constructor(e){this[n]=e}get transaction(){return this[n].knex()}newFromObject(e,t){const r=new this.constructor(e);return Object.assign(r,t),r}newMerge(e,t){const r=new this.constructor(e);return Object.assign(r,this,t),r}}}},function(e,t,r){\"use strict\";const{CompositeQueryTransformation:n}=r(201),{WrapMysqlModifySubqueryTransformation:o}=r(202),s=new n([new o]);e.exports={transformation:s}},function(e,t,r){\"use strict\";const{QueryTransformation:n}=r(93);e.exports={CompositeQueryTransformation:class extends n{constructor(e){super(),this.transformations=e}onConvertQueryBuilderBase(e,t){for(const r of this.transformations)e=r.onConvertQueryBuilderBase(e,t);return e}}}},function(e,t,r){\"use strict\";const{QueryTransformation:n}=r(93),{isMySql:o}=r(3);e.exports={WrapMysqlModifySubqueryTransformation:class extends n{onConvertQueryBuilderBase(e,t){const r=t.unsafeKnex();return r&&o(r)&&(t.isUpdate()||t.isDelete())&&(t.tableName()===e.tableName()||function(e,t){let r=!1;return e.forEachOperation(e.constructor.JoinSelector,e=>{if(e.args[0]===t)return r=!0,!1}),r}(e,t.tableName()))?e.modelClass().query().from(e.as(\"mysql_subquery_fix\")):e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperationSupport:n}=r(92),{KnexOperation:o}=r(54);e.exports={JoinBuilder:class extends n{using(...e){return this.addOperation(new o(\"using\"),e)}on(...e){return this.addOperation(new o(\"on\"),e)}orOn(...e){return this.addOperation(new o(\"orOn\"),e)}onBetween(...e){return this.addOperation(new o(\"onBetween\"),e)}onNotBetween(...e){return this.addOperation(new o(\"onNotBetween\"),e)}orOnBetween(...e){return this.addOperation(new o(\"orOnBetween\"),e)}orOnNotBetween(...e){return this.addOperation(new o(\"orOnNotBetween\"),e)}onIn(...e){return this.addOperation(new o(\"onIn\"),e)}onNotIn(...e){return this.addOperation(new o(\"onNotIn\"),e)}orOnIn(...e){return this.addOperation(new o(\"orOnIn\"),e)}orOnNotIn(...e){return this.addOperation(new o(\"orOnNotIn\"),e)}onNull(...e){return this.addOperation(new o(\"onNull\"),e)}orOnNull(...e){return this.addOperation(new o(\"orOnNull\"),e)}onNotNull(...e){return this.addOperation(new o(\"onNotNull\"),e)}orOnNotNull(...e){return this.addOperation(new o(\"orOnNotNull\"),e)}onExists(...e){return this.addOperation(new o(\"onExists\"),e)}orOnExists(...e){return this.addOperation(new o(\"orOnExists\"),e)}onNotExists(...e){return this.addOperation(new o(\"onNotExists\"),e)}orOnNotExists(...e){return this.addOperation(new o(\"orOnNotExists\"),e)}type(...e){return this.addOperation(new o(\"type\"),e)}andOn(...e){return this.addOperation(new o(\"andOn\"),e)}andOnIn(...e){return this.addOperation(new o(\"andOnIn\"),e)}andOnNotIn(...e){return this.addOperation(new o(\"andOnNotIn\"),e)}andOnNull(...e){return this.addOperation(new o(\"andOnNull\"),e)}andOnNotNull(...e){return this.addOperation(new o(\"andOnNotNull\"),e)}andOnExists(...e){return this.addOperation(new o(\"andOnExists\"),e)}andOnNotExists(...e){return this.addOperation(new o(\"andOnNotExists\"),e)}andOnBetween(...e){return this.addOperation(new o(\"andOnBetween\"),e)}andOnNotBetween(...e){return this.addOperation(new o(\"andOnNotBetween\"),e)}onVal(...e){return this.addOperation(new o(\"onVal\"),e)}andOnVal(...e){return this.addOperation(new o(\"andOnVal\"),e)}orOnVal(...e){return this.addOperation(new o(\"orOnVal\"),e)}}}},function(e,t,r){\"use strict\";const{flatten:n}=r(0),{ObjectionToKnexConvertingOperation:o}=r(4);e.exports={ReturningOperation:class extends o{onAdd(e,t){return 0!==(t=n(t)).length&&super.onAdd(e,t)}onBuildKnex(e,t){e.returning(this.getKnexArgs(t))}}}},function(e,t,r){\"use strict\";const{ObjectionToKnexConvertingOperation:n}=r(4),{asSingle:o}=r(0);e.exports={WhereCompositeOperation:class extends n{onBuildKnex(e,t){const r=this.getKnexArgs(t);if(2===r.length)r.splice(1,0,\"=\");else if(3!==r.length)throw new Error(`invalid number of arguments ${r.length}`);e.where(...function(e,t,r){if(function(e,t){return!(Array.isArray(e)&&1!==e.length||Array.isArray(t)&&1!==t.length)}(e,r))return function(e,t,r){return[o(e),t,o(r)]}(e,t,r);if(function(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===t.length}(e,r))return function(e,t,r){return[n=>{for(let o=0,s=e.length;o<s;++o)n.where(e[o],t,r[o])}]}(e,t,r);throw new Error(\"both cols and values must have same dimensions\")}(...r))}}}},function(e,t,r){\"use strict\";const n=r(55),{ObjectionToKnexConvertingOperation:o}=r(4);e.exports={WhereJsonPostgresOperation:class extends o{onBuildKnex(e,t){const r=this.getKnexArgs(t),o=n.whereJsonbRefOnLeftJsonbValOrRefOnRightRawQueryParams(r[0],this.opt.operator,r[1],this.opt.prefix);\"or\"===this.opt.bool?e.orWhereRaw.apply(e,o):e.whereRaw.apply(e,o)}}}},function(e,t,r){\"use strict\";const{ObjectionToKnexConvertingOperation:n}=r(4),{isObject:o,asSingle:s}=r(0),{isKnexQueryBuilder:i}=r(3);e.exports={WhereInCompositeOperation:class extends n{constructor(e,t){super(e,t),this.prefix=this.opt.prefix||null}onBuildKnex(e,t){const r=function(e,t,r){return function(e){return Array.isArray(e)&&e.length>1}(t)?function(e,t,r){return Array.isArray(r)?function(e,t){return Array.isArray(t[0])?[e,t]:[e,[t]]}(t,r):function(e,t,r){const n=`(${t.map(e=>o(e)?\"?\":\"??\").join(\",\")})`;return[e.raw(n,t),r]}(e,t,r)}(e,t,r):function(e,t){return Array.isArray(t)?t=function e(t,r){for(let n=0,o=t.length;n<o;++n){const o=t[n];Array.isArray(o)?e(o,r):null!=o&&r.push(o)}return r}(t,[]):i(t)||(t=[t]),[s(e),t]}(t,r)}(t.knex(),...this.getKnexArgs(t));return\"not\"===this.prefix?e.whereNotIn(...r):e.whereIn(...r)}clone(){const e=super.clone();return e.prefix=this.prefix,e}}}},function(e,t,r){\"use strict\";const{ObjectionToKnexConvertingOperation:n}=r(4),{isKnexQueryBuilder:o}=r(3),{asSingle:s}=r(0);e.exports={WhereInCompositeSqliteOperation:class extends n{constructor(e,t){super(e,t),this.prefix=this.opt.prefix||null}onBuildKnex(e,t){const{method:r,args:n}=function(e,t){return function(e){return Array.isArray(e)&&e.length>1}(e)?function(e,t){if(!Array.isArray(t))throw new Error(\"sqlite doesn't support multi-column where in clauses\");return{method:\"where\",args:[r=>{t.forEach(t=>{r.orWhere(r=>{e.forEach((e,n)=>{r.andWhere(e,t[n])})})})}]}}(e,t):function(e,t){return Array.isArray(t)?t=function e(t,r){for(let n=0,o=t.length;n<o;++n){const o=t[n];Array.isArray(o)?e(o,r):null!=o&&r.push(o)}return r}(t,[]):o(t)||(t=[t]),{method:\"whereIn\",args:[s(e),t]}}(e,t)}(...this.getKnexArgs(t));return\"where\"===r?\"not\"===this.prefix?e.whereNot(...n):e.where(...n):\"not\"===this.prefix?e.whereNotIn(...n):e.whereIn(...n)}clone(){const e=super.clone();return e.prefix=this.prefix,e}}}},function(e,t,r){\"use strict\";const{ObjectionToKnexConvertingOperation:n}=r(4),{flatten:o,zipObject:s,isString:i}=r(0),{getTempColumn:a}=r(33);e.exports={WhereInCompositeMsSqlOperation:class extends n{constructor(e,t){super(e,t),this.prefix=this.opt.prefix||null}onBuildKnex(e,t){const r=this.getKnexArgs(t);this.build(t.knex(),e,r[0],r[1])}build(e,t,r,n){Array.isArray(r)&&r.length>1?this.buildComposite(e,t,r,n):this.buildNonComposite(t,r,n)}buildComposite(e,t,r,n){const o=r.map((e,t)=>a(t));Array.isArray(n)?this.buildCompositeValue(e,t,r,o,n):this.buildCompositeSubquery(e,t,r,o,n.as(e.raw(`V(${o.map(e=>\"??\")})`,o)))}buildCompositeValue(e,t,r,n,s){return this.buildCompositeSubquery(e,t,r,n,e.raw(`(VALUES ${s.map(e=>`(${e.map(e=>\"?\").join(\",\")})`).join(\",\")}) AS V(${n.map(e=>\"??\").join(\",\")})`,o(s).concat(n)))}buildCompositeSubquery(e,t,r,n,o){const i=e.from(o).where(s(n,r.map(t=>e.raw(\"??\",t))));return\"not\"===this.prefix?t.whereNotExists(i):t.whereExists(i)}buildNonComposite(e,t,r){const n=i(t)?t:t[0];r=Array.isArray(r)?function e(t,r){for(let n=0,o=t.length;n<o;++n){const o=t[n];Array.isArray(o)?e(o,r):null!=o&&r.push(o)}return r}(r,[]):[r],this.whereIn(e,n,r)}whereIn(e,t,r){\"not\"===this.prefix?e.whereNotIn(t,r):e.whereIn(t,r)}clone(){const e=super.clone();return e.prefix=this.prefix,e}}}},function(e,t,r){\"use strict\";const n=r(55),{ObjectionToKnexConvertingOperation:o}=r(4);e.exports={WhereJsonHasPostgresOperation:class extends o{onBuildKnex(e,t){const r=this.getKnexArgs(t),o=n.whereJsonFieldRightStringArrayOnLeftQuery(t.knex(),r[0],this.opt.operator,r[1]);\"or\"===this.opt.bool?e.orWhereRaw(o):e.whereRaw(o)}}}},function(e,t,r){\"use strict\";const n=r(55),{ObjectionToKnexConvertingOperation:o}=r(4);e.exports={WhereJsonNotObjectPostgresOperation:class extends o{onBuildKnex(e,t){this.whereJsonNotObject(e,t.knex(),this.getKnexArgs(t)[0])}whereJsonNotObject(e,t,r){const o=e=>{n.whereJsonbRefOnLeftJsonbValOrRefOnRight(e,r,\"@>\",this.opt.compareValue,\"not\").orWhereRaw(n.whereJsonFieldQuery(t,r,\"IS\",null))};\"or\"===this.opt.bool?e.orWhere(o):e.where(o)}}}},function(e,t,r){\"use strict\";const{EagerOperation:n}=r(57),{RelationJoiner:o}=r(95);e.exports={JoinEagerOperation:class extends n{constructor(e,t){super(e,t),this.joiner=null}onAdd(e){return e.findOptions({callAfterFindDeeply:!0}),this.joiner=new o({modelClass:e.modelClass()}),!0}onBefore3(e){return this.joiner.setExpression(this.buildFinalExpression()).setModifiers(this.buildFinalModifiers(e)).setOptions(this.graphOptions).fetchColumnInfo(e)}onBuild(e){this.joiner.setExpression(this.buildFinalExpression()).setModifiers(this.buildFinalModifiers(e)).setOptions(this.graphOptions).build(e)}onRawResult(e,t){return this.joiner.parseResult(e,t)}clone(){const e=super.clone();return e.joiner=this.joiner,e}}}},function(e,t,r){\"use strict\";const{forEachChildExpression:n}=r(96),{TableNode:o}=r(214);class s{constructor({expression:e,rootModelClass:t,rootTableAlias:r,options:n}){this.options=n,this.rootModelClass=t,this.rootTableAlias=r,this.nodes=[],this.nodesByAlias=new Map,this.uidCounter=0,this._createNodes({expression:e,modelClass:t})}static create(e){return new s(e)}get rootNode(){return this.nodes[0]}getNodeForColumnAlias(e){const t=e.lastIndexOf(this.options.separator);if(-1===t)return this.rootNode;{const r=e.slice(0,t);return this.nodesByAlias.get(r)}}createNextUid(){return this.uidCounter++}_createNodes({expression:e,modelClass:t}){const r=this._createRootNode({expression:e,modelClass:t});this._createChildNodes({expression:e,modelClass:t,parentNode:r});for(const e of this.nodes)this.nodesByAlias.set(e.alias,e)}_createRootNode({expression:e,modelClass:t}){const r=o.create({tableTree:this,modelClass:t,expression:e});return this.nodes.push(r),r}_createChildNodes({expression:e,modelClass:t,parentNode:r}){n(e,t,(e,t)=>{const n=o.create({tableTree:this,modelClass:t.relatedModelClass,expression:e,parentNode:r,relation:t});this.nodes.push(n),this._createChildNodes({expression:e,modelClass:t.relatedModelClass,parentNode:n})})}}e.exports={TableTree:s}},function(e,t,r){\"use strict\";class n{constructor({tableTree:e,modelClass:t,expression:r,parentNode:n=null,relation:o=null}){this.tableTree=e,this.modelClass=t,this.parentNode=n,this.relation=o,this.expression=r,this.childNodes=[],this.alias=this._calculateAlias(),this.idGetter=this._createIdGetter()}static create(e){const t=new n(e);return t.parentNode&&t.parentNode.childNodes.push(t),t}get options(){return this.tableTree.options}get relationProperty(){return this.expression.node.$name}get joinTableAlias(){return this.modelClass.joinTableAlias(this.alias)}getReferenceForColumn(e){return`${this.alias}.${e}`}getColumnAliasForColumn(e){return this.parentNode?`${this.alias}${this.options.separator}${e}`:e}getColumnForColumnAlias(e){const t=e.lastIndexOf(this.options.separator);return-1===t?e:e.slice(t+this.options.separator.length)}getIdFromFlatRow(e){return this.idGetter(e)}_calculateAlias(){if(this.parentNode){const e=this.expression.node.$name,t=this.options.aliases[e]||e;return this.options.minimize?`_t${this.tableTree.createNextUid()}`:this.parentNode.parentNode?`${this.parentNode.alias}${this.options.separator}${t}`:t}return this.tableTree.rootTableAlias}_createIdGetter(){const e=this.modelClass.getIdColumnArray(),t=e.map(e=>this.getColumnAliasForColumn(e));return 1===e.length?function(e){const t=e[0];return e=>{const r=e[t];return null===r?null:`${r}`}}(t):function(e){return 2===e.length?function(e){const t=e[0],r=e[1];return e=>{const n=e[t],o=e[r];return null===n||null===o?null:`${n},${o}`}}(e):function(e){return t=>{let r=\"\";for(let n=0,o=e.length;n<o;++n){const s=e[n],i=t[s];if(null===i)return null;r+=i,n!==o-1&&(r+=\",\")}return r}}(e)}(t)}}e.exports={TableNode:n}},function(e,t,r){\"use strict\";const{JoinResultColumn:n}=r(216),{groupBy:o}=r(0);class s{constructor({tableTree:e,omitColumnAliases:t=[]}){this.tableTree=e,this.omitColumnAliases=new Set(t),this.columnsByTableNode=null,this.parentMap=null,this.rootModels=null}static create(e){return new s(e)}parse(e){if(!Array.isArray(e)||0===e.length)return e;this.columnsByTableNode=this._createColumns(e[0]),this.parentMap=new Map,this.rootModels=[];for(const t of e)this._parseNode(this.tableTree.rootNode,t);return this.rootModels}_parseNode(e,t,r=null,n=null){const o=e.getIdFromFlatRow(t);if(null===o)return;const s=function(e,t,r){return null!==e?`${e}/${r.relationProperty}/${t}`:`/${t}`}(n,o,e);let i=this.parentMap.get(s);i||(i=this._createModel(e,t),this._addToParent(e,i,r),this.parentMap.set(s,i));for(const r of e.childNodes)this._parseNode(r,t,i,s)}_createModel(e,t){const r={},n=this.columnsByTableNode.get(e);if(n)for(const e of n)this.omitColumnAliases.has(e.columnAlias)||(r[e.name]=t[e.columnAlias]);const o=e.modelClass.fromDatabaseJson(r);for(const t of e.childNodes)t.relation.isOneToOne()?o[t.relationProperty]=null:o[t.relationProperty]=[];return o}_addToParent(e,t,r){e.parentNode?e.relation.isOneToOne()?r[e.relationProperty]=t:r[e.relationProperty].push(t):this.rootModels.push(t)}_createColumns(e){const t=Object.keys(e).map(e=>n.create({tableTree:this.tableTree,columnAlias:e}));return o(t,i)}}function i(e){return e.tableNode}e.exports={JoinResultParser:s}},function(e,t,r){\"use strict\";class n{constructor({columnAlias:e,tableNode:t,name:r}){this.columnAlias=e,this.tableNode=t,this.name=r}static create({tableTree:e,columnAlias:t}){const r=e.getNodeForColumnAlias(t);return new n({columnAlias:t,tableNode:r,name:r.getColumnForColumnAlias(t)})}}e.exports={JoinResultColumn:n}},function(e,t,r){\"use strict\";const{WhereInEagerOperation:n}=r(97);e.exports={NaiveEagerOperation:class extends n{batchSize(){return 1}}}},function(e,t,r){\"use strict\";const{DelegateOperation:n}=r(24),{InsertGraphOperation:o}=r(99),{RelationExpression:s}=r(9);e.exports={InsertGraphAndFetchOperation:class extends n{constructor(e,t){if(super(e,t),!this.delegate.is(o))throw new Error(\"Invalid delegate\")}get models(){return this.delegate.models}get isArray(){return this.delegate.isArray}async onAfter2(e){if(0===this.models.length)return this.isArray?[]:null;const t=s.fromModelGraph(this.models),r=this.models[0].constructor,n=this.models.map(e=>e.$id()),o=await r.query().childQueryOf(e).findByIds(n).withGraphFetched(t);return this.isArray?o:o[0]||null}}}},function(e,t,r){\"use strict\";const{ModelGraphEdge:n}=r(25),{isNumber:o}=r(0),s={};e.exports={ModelGraphNode:class{constructor(e,t){this.modelClass=e,this.obj=t,this.edges=[],this.userData={},this.hasId=t.$hasId(),this.uid=t[e.uidProp],this.refEdges=[],this.parentEdge=null,this._relationPath=s,this._relationPathKey=s,this._dataPath=s,this._dataPathKey=s,this._idPath=s,this._idPathKey=s}get isReference(){return void 0!==this.reference}get isDbReference(){return void 0!==this.dbReference}get reference(){return this.obj[this.modelClass.uidRefProp]}get dbReference(){return this.obj[this.modelClass.dbRefProp]}get parentNode(){return this.parentEdge?this.parentEdge.ownerNode:null}get indexInRelation(){return this.parentEdge?this.parentEdge.relationIndex:null}get relationName(){return this.parentEdge?this.parentEdge.relation.name:null}get relationPath(){return this._relationPath===s&&(this._relationPath=this._createRelationPath()),this._relationPath}get relationPathKey(){return this._relationPathKey===s&&(this._relationPathKey=this._createRelationPathKey()),this._relationPathKey}get dataPath(){return this._dataPath===s&&(this._dataPath=this._createDataPath()),this._dataPath}get dataPathKey(){return this._dataPathKey===s&&(this._dataPathKey=this._createDataPathKey()),this._dataPathKey}get idPath(){return this._idPath===s&&(this._idPath=this._createIdPath()),this._idPath}get idPathKey(){return this._idPathKey===s&&(this._idPathKey=this._createIdPathKey()),this._idPathKey}get referencedNode(){for(const e of this.refEdges)if(e.refType===n.ReferenceType.Object&&e.isOwnerNode(this))return e.relatedNode;return null}get referencingNodes(){const e=[];for(const t of this.refEdges)t.refType===n.ReferenceType.Object&&t.isRelatedNode(this)&&e.push(t.ownerNode);return e}get descendantRelationNodes(){return this._collectDescendantRelationNodes([])}removeEdge(e){if(e===this.parentEdge)throw new Error(\"cannot remove parent edge\");this.edges=this.edges.filter(t=>t!==e),this.refEdges=this.refEdges.filter(t=>t!==e)}_collectDescendantRelationNodes(e){for(const t of this.edges)t.type===n.Type.Relation&&t.isOwnerNode(this)&&(e.push(t.relatedNode),t.relatedNode._collectDescendantRelationNodes(e));return e}_createRelationPath(){return null===this.parentNode?[]:[...this.parentNode.relationPath,this.relationName]}_createRelationPathKey(){return this.relationPath.join(\".\")}_createDataPath(){return null===this.parentEdge?[]:this.parentEdge.relation.isOneToOne()?[...this.parentNode.dataPath,this.relationName]:[...this.parentNode.dataPath,this.relationName,this.indexInRelation]}_createDataPathKey(){const e=this.dataPath.reduce((e,t)=>o(t)?`${e}[${t}]`:e?`${e}.${t}`:t,\"\");return e?\".\"+e:e}_createIdPath(){if(!this.obj.$hasId())return null;if(null===this.parentEdge)return[this.obj.$idKey()];{const e=this.parentNode.idPath;return null===e?null:[...e,this.relationName,this.obj.$idKey()]}}_createIdPathKey(){return this.idPath?this.idPath.join(\".\"):null}}}},function(e,t,r){\"use strict\";const{asArray:n,groupBy:o}=r(0),{ModelGraph:s}=r(101),{FetchStrategy:i}=r(102),{RelationExpression:a}=r(9);function l(e,t){return t.isFetchStrategy(i.OnlyIdentifiers)?e=>{e.select(e.fullIdColumn())}:t.isFetchStrategy(i.OnlyNeeded)?function(e){return t=>{const r=new Map;for(const n of e){const e=n.obj.$toDatabaseJson(t);for(const o of Object.keys(e)){if(!u(o,r,n))continue;const e=c(t,o,n)||h(t,o,n);r.set(o,e)}}const o=Array.from(r.values()),s=n(t.fullIdColumn());for(const e of s)o.includes(e)||o.push(e);t.select(o)}}(e):()=>{}}function u(e,t,r){const n=r.modelClass;return!t.has(e)&&e!==n.propertyNameToColumnName(n.dbRefProp)&&e!==n.propertyNameToColumnName(n.uidRefProp)&&e!==n.propertyNameToColumnName(n.uidProp)}function c(e,t,r){if(r.parentEdge&&r.parentEdge.relation.isObjectionManyToManyRelation){const n=r.parentEdge.relation,o=n.joinTableExtras.find(e=>e.aliasCol===t);if(o)return`${e.tableRefFor(n.joinModelClass)}.${o.joinTableCol} as ${o.aliasCol}`}return null}function h(e,t,r){return`${e.tableRefFor(r.modelClass)}.${t}`}e.exports={GraphFetcher:class{static async fetchCurrentGraph({builder:e,graph:t,graphOptions:r}){const{rootObjects:i}=t,u=function(e){return n(e).filter(e=>e.$hasId()).map(e=>e.$id())}(i),c=e.modelClass();if(0===u.length)return Promise.resolve(s.create(c,[]));const h=a.fromModelGraph(i),d=await c.query().childQueryOf(e,{fork:!0,isInternalQuery:!0}).modify(function(e){return t=>{for(const r of[\"forUpdate\",\"forShare\"])e.has(r)&&t[r]()}}(e)).modify(function(e,t,r){return n=>{const s=function(e,t){const r=o(e.nodes,e=>e.relationPathKey);return function e(t,r,n=[]){for(const o of t.$childNames)n.push(o),r(n.join(\".\")),e(t[o],r,n),n.pop()}(t.node,e=>{r.has(e)||r.set(e,[])}),r}(e,r);for(const[e,r]of s.entries()){const o=l(r,t);e?n.modifyGraph(e,o):n.modify(o)}}}(t,r,h)).findByIds(u).withGraphFetched(h).internalOptions({keepImplicitJoinProps:!0});return s.create(c,d)}}}},function(e,t,r){\"use strict\";const{JoinRowGraphInsertAction:n}=r(222),{GraphInsertAction:o}=r(223),{GraphOperation:s}=r(38),{ModelGraphEdge:i}=r(25);e.exports={GraphInsert:class extends s{constructor(...e){super(...e),this.dependencies=this._createDependencyMap()}createActions(){return[...this._createNormalActions(),...this._createJoinRowActions()]}_createDependencyMap(){const e=new Map;for(const t of this.graph.edges)t.type==i.Type.Relation?this._createRelationDependency(t,e):this._createReferenceDependency(t,e);return e}_createRelationDependency(e,t){e.relation.isObjectionHasManyRelation?this._addDependency(e.relatedNode,e,t):e.relation.isObjectionBelongsToOneRelation&&this._addDependency(e.ownerNode,e,t)}_createReferenceDependency(e,t){this._addDependency(e.ownerNode,e,t)}_addDependency(e,t,r){let n=r.get(e);n||(n=[],r.set(e,n)),n.push(t)}_createNormalActions(){const e=new Set,t=[];for(;;){const r=this.graph.nodes.filter(t=>!this._isHandled(t,e)&&!this._hasDependencies(t,e));if(0===r.length)break;t.push(new o(this.graphData,{nodes:r,dependencies:this.dependencies}));for(const t of r)this._markHandled(t,e)}if(e.size!==this.graph.nodes.length)throw new Error(\"the object graph contains cyclic references\");return t}_isHandled(e,t){return t.has(e)}_hasDependencies(e,t){if(!this.dependencies.has(e))return!1;for(const r of this.dependencies.get(e)){const n=r.getOtherNode(e);if(!t.has(n)&&!this.currentGraph.nodeForNode(n))return!0}return!1}_markHandled(e,t){t.add(e);for(const r of e.referencingNodes)this._markHandled(r,t)}_createJoinRowActions(){return[new n(this.graphData,{nodes:this.graph.nodes.filter(e=>null===this.currentGraph.nodeForNode(e)&&e.parentEdge&&e.parentEdge.relation.isObjectionManyToManyRelation)})]}}}},function(e,t,r){\"use strict\";const{GraphAction:n}=r(18),{groupBy:o,chunk:s}=r(0),i=r(2);e.exports={JoinRowGraphInsertAction:class extends n{constructor(e,{nodes:t}){super(e),this.nodes=t}run(e){const t=this._createInsertBatches(e),r=this._getConcurrency(e,this.nodes);return i.map(t,t=>this._insertBatch(e,t),{concurrency:r})}_createInsertBatches(e){const t=[],r=this._getBatchSize(e),n=o(this.nodes,t=>(function(e,t){return t.parentEdge.relation.getJoinModelClass(e.unsafeKnex())})(e,t));for(const[e,o]of n.entries())for(const n of s(o,r))t.push(this._createBatch(e,n));return t}_createBatch(e,t){return t.filter(e=>this.graphOptions.shouldRelate(e,this.graphData)||e.userData.inserted).map(t=>({node:t,joinTableModelClass:e,joinTableObj:this._createJoinTableObj(e,t)}))}_createJoinTableObj(e,t){const{parentEdge:r,parentNode:n}=t,{relation:o}=r;return this._resolveReferences(t),e.fromJson(o.createJoinModel(o.ownerProp.getProps(n.obj),t.obj))}_insertBatch(e,t){return this._beforeInsert(e,t).then(()=>this._insert(e,t))}_beforeInsert(e,t){return Promise.all(t.map(({node:t,joinTableObj:r})=>t.parentEdge?t.parentEdge.relation.joinTableBeforeInsert(r,e.context()):null))}_insert(e,t){if(t.length>0)return t[0].joinTableModelClass.query().childQueryOf(e).insert(t.map(e=>e.joinTableObj))}}}},function(e,t,r){\"use strict\";const{GraphAction:n}=r(18),{groupBy:o,chunk:s,get:i,set:a}=r(0),{ModelGraphEdge:l}=r(25),u=r(2);function c(e){return e.modelClass}e.exports={GraphInsertAction:class extends n{constructor(e,{nodes:t,dependencies:r}){super(e),this.nodes=t,this.dependencies=r}run(e){const t=this._createInsertBatches(e),r=this._getConcurrency(e,this.nodes);return u.map(t,t=>this._insertBatch(e,t),{concurrency:r})}_createInsertBatches(e){const t=[],r=this._getBatchSize(e),n=o(this.nodes,c);for(const e of n.values())for(const n of s(e,r))t.push(n);return t}async _insertBatch(e,t){await this._beforeInsert(t),await this._insert(e,t),await this._afterInsert(t)}_beforeInsert(e){return this._resolveDependencies(e),this._omitManyToManyExtraProps(e),this._copyRelationPropsFromCurrentIfNeeded(e),Promise.resolve()}_resolveDependencies(e){for(const t of e){const e=this.dependencies.get(t);if(e)for(const r of e){const e=r.getOtherNode(t);this._resolveDependency(e,r)}}}_resolveDependency(e,t){t.type!==l.Type.Relation||t.relation.joinTable?t.refType===l.ReferenceType.Property&&this._resolvePropertyReferenceNode(e,t):this._resolveRelationDependency(e,t)}_resolveRelationDependency(e,t){const r=t.getOtherNode(e);let n,o;t.isOwnerNode(e)?(n=t.relation.ownerProp,o=t.relation.relatedProp):(o=t.relation.ownerProp,n=t.relation.relatedProp),this._resolveReferences(e),o.forEach(t=>{o.setProp(r.obj,t,n.getProp(e.obj,t))})}_resolvePropertyReferenceNode(e,t){const r=t.getOtherNode(e);let n,o;t.isOwnerNode(e)?(n=t.refOwnerDataPath,o=t.refRelatedDataPath):(o=t.refOwnerDataPath,n=t.refRelatedDataPath);const s=i(e.obj,n),l=i(r.obj,o);l===t.refMatch?a(r.obj,o,s):a(r.obj,o,l.replace(t.refMatch,s))}_omitManyToManyExtraProps(e){for(const t of e)t.parentEdge&&t.parentEdge.type===l.Type.Relation&&t.parentEdge.relation.joinTableExtras.length>0&&t.parentEdge.relation.omitExtraProps([t.obj])}_copyRelationPropsFromCurrentIfNeeded(e){for(const t of e){const e=this.currentGraph.nodeForNode(t);if(e)for(const r of t.edges){if(r.type!==l.Type.Relation)continue;const n=r.isOwnerNode(t)?r.relation.ownerProp:r.relation.relatedProp;n.forEach(r=>{void 0===n.getProp(t.obj,r)&&n.setProp(t.obj,r,n.getProp(e.obj,r))})}}}_insert(e,t){const[{modelClass:r}]=t;t=t.filter(e=>this.graphOptions.shouldInsert(e,this.graphData));for(const e of t)delete e.obj[r.uidProp],e.obj.$validate(null,{dataPath:e.dataPathKey});if(0!==t.length){for(const e of t)e.userData.inserted=!0;return this._runRelationBeforeInsertMethods(e,t).then(()=>r.query().insert(t.map(e=>e.obj)).childQueryOf(e).copyFrom(e,n.ReturningAllSelector).execute())}}_runRelationBeforeInsertMethods(e,t){return Promise.all(t.map(t=>t.parentEdge?t.parentEdge.relation.beforeInsert(t.obj,e.context()):null))}_afterInsert(e){for(const t of e)for(const e of t.referencingNodes)this._resolveDependency(e,e.parentEdge)}}}},function(e,t,r){\"use strict\";const{GraphOperation:n}=r(38),{GraphPatchAction:o}=r(225);e.exports={GraphPatch:class extends n{createActions(){return[new o(this.graphData,{nodes:this.graph.nodes.filter(e=>this.graphOptions.shouldPatchOrUpdateIgnoreDisable(e,this.graphData))})]}}}},function(e,t,r){\"use strict\";const{GraphAction:n}=r(18),{isInternalProp:o}=r(11),{union:s,difference:i,isObject:a,jsonEquals:l}=r(0),u=r(2);e.exports={GraphPatchAction:class extends n{constructor(e,{nodes:t}){super(e),this.nodes=t}run(e){return u.map(this.nodes,t=>this._runForNode(e,t),{concurrency:this._getConcurrency(e,this.nodes)})}_runForNode(e,t){const r=this.graphOptions.shouldPatch(t,this.graphData),o=this.graphOptions.shouldUpdate(t,this.graphData),l=this._handleBelongsToOneInserts(t),u=this._handleBelongsToOneDeletes(t),{changedProps:c,unchangedProps:h}=this._findChanges(t),d=s(c,h),p=i(r||o?c:[...l,...u],t.modelClass.getIdPropertyArray());if(0===p.length)return null;delete t.obj[t.modelClass.uidProp],delete t.obj[t.modelClass.uidRefProp],delete t.obj[t.modelClass.dbRefProp],t.obj.$validate(null,{dataPath:t.dataPathKey,patch:r||!r&&!o}),t.obj.$omitFromDatabaseJson(i(d,p)),t.userData.updated=!0;const f=this._createBuilder(t).childQueryOf(e).copyFrom(e,n.ReturningAllSelector);return r?f.patch(t.obj):f.update(t.obj),f.execute().then(e=>(a(e)&&e.$isObjectionModel&&t.obj.$set(e),e))}_handleBelongsToOneInserts(e){const t=this.currentGraph.nodeForNode(e),r=[];for(const n of e.edges)if(n.isOwnerNode(e)&&n.relation&&n.relation.isObjectionBelongsToOneRelation&&n.relation.relatedProp.hasProps(n.relatedNode.obj)){const{relation:o}=n;o.ownerProp.forEach(s=>{const i=t&&o.ownerProp.getProp(t.obj,s),a=o.relatedProp.getProp(n.relatedNode.obj,s);i!=a&&(o.ownerProp.setProp(e.obj,s,a),r.push(o.ownerProp.props[s]))})}return r}_handleBelongsToOneDeletes(e){const t=this.currentGraph.nodeForNode(e),r=[];if(!t)return r;for(const n of t.edges)if(n.isOwnerNode(t)&&n.relation.isObjectionBelongsToOneRelation&&null===e.obj[n.relation.name]&&this.graphOptions.shouldDeleteOrUnrelate(n.relatedNode,this.graphData)){const{relation:o}=n;o.ownerProp.forEach(n=>{null!=o.ownerProp.getProp(t.obj,n)&&(o.ownerProp.setProp(e.obj,n,null),r.push(o.ownerProp.props[n]))})}return r}_findChanges(e){const t=e.obj,r=this.currentGraph.nodeForNode(e),n=r&&r.obj||{},s=e.modelClass.getRelationNames(),i=[],a=[];for(const e of Object.keys(t)){if(o(e)||s.includes(e))continue;const r=t[e],h=n[e];void 0!==h&&((u=h)==(c=r)||l(u,c))?i.push(e):a.push(e)}var u,c;return t.$$queryProps&&a.push(...Object.keys(t.$$queryProps)),{changedProps:a,unchangedProps:i}}_createBuilder(e){return e.parentEdge&&!e.parentEdge.relation.isObjectionHasManyRelation?this._createRelatedBuilder(e):this._createRootBuilder(e)}_createRelatedBuilder(e){return e.parentNode.obj.$relatedQuery(e.parentEdge.relation.name).findById(e.obj.$id())}_createRootBuilder(e){return e.obj.$query()}}}},function(e,t,r){\"use strict\";const{GraphOperation:n}=r(38),{GraphDeleteAction:o}=r(227);e.exports={GraphDelete:class extends n{createActions(){return[new o(this.graphData,{nodes:this.currentGraph.nodes.filter(e=>this.graphOptions.shouldDeleteOrUnrelate(e,this.graphData))})]}}}},function(e,t,r){\"use strict\";const{GraphAction:n}=r(18),{groupBy:o}=r(0),s=r(2);function i(e){return e.parentEdge.relation}function a(e){return e.parentNode}e.exports={GraphDeleteAction:class extends n{constructor(e,{nodes:t}){super(e),this.nodes=t}run(e){const t=this._filterOutBelongsToOneRelationUnrelates(this.nodes),r=this._createDeleteBuilders(e,t);return s.map(r,e=>e.execute(),{concurrency:this._getConcurrency(e,t)})}_filterOutBelongsToOneRelationUnrelates(e){return e.filter(e=>!(this.graphOptions.shouldUnrelate(e,this.graphData)&&e.parentEdge.relation.isObjectionBelongsToOneRelation))}_createDeleteBuilders(e,t){const r=o(t,i),n=[];return r.forEach((t,r)=>{o(t,a).forEach((t,o)=>{const s=this.graphOptions.shouldUnrelate(t[0],this.graphData),i=o.obj.$relatedQuery(r.name).childQueryOf(e);r.isObjectionBelongsToOneRelation||i.findByIds(t.map(e=>e.obj.$id()));for(const e of t)e.userData.deleted=!0;n.push(s?i.unrelate():i.delete())})}),n}}}},function(e,t,r){\"use strict\";const{GraphOperation:n}=r(38),{GraphRecursiveUpsertAction:o}=r(229);e.exports={GraphRecursiveUpsert:class extends n{createActions(){return[new o(this.graphData,{nodes:this.graph.nodes.filter(e=>this.graphOptions.shouldRelate(e,this.graphData)&&function(e){for(const t of e.constructor.getRelationNames())if(e.hasOwnProperty(t))return!0;return!1}(e.obj))})]}}}},function(e,t,r){\"use strict\";const{GraphAction:n}=r(18),{groupBy:o,get:s,set:i}=r(0),{forEachPropertyReference:a}=r(58),l=r(2);function u(e){return e.parentEdge.relation}function c(e){return e.parentNode}e.exports={GraphRecursiveUpsertAction:class extends n{constructor(e,{nodes:t}){super(e),this.nodes=t}run(e){const t=this._createUpsertBuilders(e,this.nodes);return l.map(t,e=>e.execute(),{concurrency:this._getConcurrency(e,this.nodes)})}_createUpsertBuilders(e,t){const r=o(t,u),s=[];return r.forEach(t=>{o(t,c).forEach(t=>{for(const e of t)this._resolveReferences(e),e.userData.upserted=!0;s.push(t[0].modelClass.query().childQueryOf(e).copyFrom(e,n.ReturningAllSelector).upsertGraph(t.map(e=>e.obj),this.graphOptions.rebasedOptions(t[0])))})}),s}_resolveReferences(e){e.obj.$traverse(e=>this._resolveReferencesForObject(e))}_resolveReferencesForObject(e){this._resolveObjectReference(e),this._resolvePropertyReferences(e)}_resolveObjectReference(e){const t=e.constructor,r=e[t.uidRefProp];if(!r)return;const n=this.graph.nodes.find(e=>e.uid===r);if(!n)return;const o=n.modelClass.getRelationNames();for(const t of Object.keys(n.obj))o.includes(t)||(e[t]=n.obj[t]);delete e[t.uidRefProp]}_resolvePropertyReferences(e){a(e,({path:t,refMatch:r,ref:n,refPath:o})=>{const a=this.graph.nodes.find(e=>e.uid===n);if(!a)return;const l=s(a.obj,o),u=s(e,t);i(e,t,u===r?l:u.replace(r,l))})}}}},function(e,t,r){\"use strict\";const{GraphData:n}=r(103),{GraphAction:o}=r(18),s=r(2);class i{static createEveryNodeExistsExistence(){return new i(new Map)}static async create({builder:e,graph:t,graphOptions:r,currentGraph:l}){if(r.isInsertOnly())return i.createEveryNodeExistsExistence();const u=new n({graph:t,graphOptions:r,currentGraph:l,nodeDbExistence:i.createEveryNodeExistsExistence()}),{mayNotExist:c,mayNotExistNodes:h}=function(e){const{graph:t,currentGraph:r,graphOptions:n}=e,o=new Map,s=[];for(const i of t.nodes)n.shouldInsertMissing(i)&&n.shouldRelate(i,e)&&i.hasId&&!a(r,i)&&(o.has(i.modelClass)||o.set(i.modelClass,new Map),o.get(i.modelClass).set(i.obj.$idKey(),i.obj.$id()),s.push(i));return{mayNotExist:o,mayNotExistNodes:s}}(u);if(0==c.size)return i.createEveryNodeExistsExistence();const d=await async function({builder:e,mayNotExist:t,mayNotExistNodes:r}){const n=function(e){const t=new Map(e);for(const e of t.keys())t.set(e,new Map(t.get(e)));return t}(t),i=function({builder:e,mayNotExist:t}){const r=[];for(const[n,o]of t.entries()){const t=Array.from(o.values());r.push(n.query().childQueryOf(e,{fork:!0,isInternalQuery:!0}).findByIds(t).select(n.getIdColumnArray()))}return r}({builder:e,mayNotExist:t}),a=await s.map(i,e=>e.execute(),{concurrency:o.getConcurrency(e,r)});for(const e of a)for(const t of e){const e=t.constructor,r=n.get(e);r.delete(t.$idKey())}return n}({builder:e,mayNotExist:c,mayNotExistNodes:h});return new i(d)}constructor(e){this.dontExist=e}doesNodeExistInDb(e){const t=this.dontExist.get(e.modelClass);return!t||!t.has(e.obj.$idKey())}}function a(e,t){const{modelClass:r}=t,n=r.getTableName(),o=r.getIdPropertyArray();return e.nodes.some(e=>e.modelClass.getTableName()===n&&o.every(r=>e.obj[r]===t.obj[r]))}e.exports={GraphNodeDbExistence:i}},function(e,t,r){\"use strict\";const{DelegateOperation:n}=r(24),{UpsertGraphOperation:o}=r(104),{RelationExpression:s}=r(9);e.exports={UpsertGraphAndFetchOperation:class extends n{constructor(e,t){if(super(e,t),!this.delegate.is(o))throw new Error(\"Invalid delegate\")}get models(){return this.delegate.models}get isArray(){return this.delegate.isArray}async onAfter3(e){if(0===this.models.length)return this.isArray?[]:null;const t=s.fromModelGraph(this.models),r=this.models[0].constructor,n=this.models.map(e=>e.$id()),o=await r.query().childQueryOf(e).findByIds(n).withGraphFetched(t);return this.isArray?o:o[0]||null}}}},function(e,t,r){\"use strict\";const{InsertOperation:n}=r(23),{DelegateOperation:o}=r(24),{keyByProps:s}=r(7),{asArray:i}=r(0);e.exports={InsertAndFetchOperation:class extends o{constructor(e,t){if(super(e,t),!this.delegate.is(n))throw new Error(\"Invalid delegate\")}async onAfter2(e,t){const r=e.modelClass(),n=await super.onAfter2(e,t),o=i(n),a=r.getIdPropertyArray(),l=o.map(e=>e.$id()),u=await r.query().childQueryOf(e).findByIds(l).castTo(e.resultModelClass()),c=s(u,a);return o.forEach(e=>{e.$set(c.get(e.$propKey(a)))}),n}}}},function(e,t,r){\"use strict\";const{DelegateOperation:n}=r(24),{UpdateOperation:o}=r(22);e.exports={UpdateAndFetchOperation:class extends n{constructor(e,t){if(super(e,t),!this.delegate.is(o))throw new Error(\"Invalid delegate\");this.id=null,this.skipIdWhere=!1}get model(){return this.delegate.model}onAdd(e,t){return this.id=t[0],this.delegate.onAdd(e,t.slice(1))}onBuild(e){this.skipIdWhere||e.findById(this.id),super.onBuild(e)}async onAfter2(e,t){if(0==t)return void await super.onAfter2(e,t);const r=await e.emptyInstance().childQueryOf(e).modify(e=>{this.skipIdWhere||e.findById(this.id)}).castTo(e.resultModelClass());return r&&this.model.$set(r),await super.onAfter2(e,t),r?this.model:void 0}clone(){const e=super.clone();return e.id=this.id,e.skipIdWhere=this.skipIdWhere,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1),{RelationExpression:o}=r(9),{RelationJoiner:s}=r(95),{isString:i}=r(0);function a(e,t,r,n){const o=e.$childNames[0],s=e[o],a=t.getRelation(s.$relation);let l=o;!1===n.alias?l=r.tableRefFor(a.relatedModelClass):i(n.alias)&&(l=n.alias),o!==l&&u(e,o,l)}function l(e,t,r){for(const n of e.$childNames){const o=e[n],s=t.getRelation(o.$relation),i=r.aliases[o.$relation];i&&i!==n&&u(e,n,i),l(o,s.relatedModelClass,r)}}function u(e,t,r){const n=e[t];delete e[t],e[r]=n,n.$name=r,e.$childNames=e.$childNames.map(e=>e===t?r:e)}e.exports={JoinRelatedOperation:class extends n{constructor(e,t){super(e,t),this.calls=[]}get joinOperation(){return this.opt.joinOperation}addCall(e){this.calls.push(e)}onBuild(e){const t=e.modelClass(),r=this.joinOperation;let n=o.create();for(const r of this.calls){const s=o.create(r.expression).toPojo(),i=s.$childNames,u=r.options||{};1===i.length&&a(s,t,e,u),u.aliases&&l(s,t,u),n=n.merge(s)}const i=new s({modelClass:t});i.setOptions({joinOperation:r}),i.setExpression(n),i.setModifiers(e.modifiers()),i.build(e,!1)}clone(){const e=super.clone();return e.calls=this.calls.slice(),e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={OnBuildKnexOperation:class extends n{constructor(e,t){super(e,t),this.func=null}onAdd(e,t){return this.func=t[0],!0}onBuildKnex(e,t){return this.func.call(e,e,t)}clone(){const e=super.clone();return e.func=this.func,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={RunBeforeOperation:class extends n{constructor(e,t){super(e,t),this.func=null}onAdd(e,t){return this.func=t[0],!0}onBefore1(e,t){return this.func.call(e,t,e)}clone(){const e=super.clone();return e.func=this.func,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={RunAfterOperation:class extends n{constructor(e,t){super(e,t),this.func=null}onAdd(e,t){return this.func=t[0],!0}onAfter3(e,t){return this.func.call(e,t,e)}clone(){const e=super.clone();return e.func=this.func,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1),{assertIdNotUndefined:o}=r(13);e.exports={FindByIdOperation:class extends n{constructor(e,t){super(e,t),this.id=null}onAdd(e,t){return this.id=t[0],super.onAdd(e,t)}onBuild(e){e.internalOptions().skipUndefined||o(this.id,`undefined was passed to ${this.name}`),e.whereComposite(e.fullIdColumn(),this.id)}clone(){const e=super.clone();return e.id=this.id,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={FindByIdsOperation:class extends n{constructor(e,t){super(e,t),this.ids=null}onAdd(e,t){return this.ids=t[0],super.onAdd(e,t)}onBuild(e){e.whereInComposite(e.fullIdColumn(),this.ids)}clone(){const e=super.clone();return e.ids=this.ids,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={OnBuildOperation:class extends n{constructor(e,t){super(e,t),this.func=null}onAdd(e,t){return this.func=t[0],!0}onBuild(e){return this.func.call(e,e)}clone(){const e=super.clone();return e.func=this.func,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={OnErrorOperation:class extends n{constructor(e,t){super(e,t),this.func=null}onAdd(e,t){return this.func=t[0],!0}onError(e,t){return this.func.call(e,t,e)}clone(){const e=super.clone();return e.func=this.func,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={RangeOperation:class extends n{constructor(e,t){super(e,t),this.resultSizeBuilder=null}onAdd(e,t){if(2===t.length){const r=t[0],n=t[1];e.limit(n-r+1).offset(r)}return!0}onBefore1(e,t){return this.resultSizeBuilder=e.clone(),super.onBefore1(e,t)}async onAfter3(e,t){const r=await this.resultSizeBuilder.resultSize();return{results:t,total:parseInt(r)}}clone(){const e=super.clone();return e.resultSizeBuilder=this.resultSizeBuilder,e}}}},function(e,t,r){\"use strict\";const{QueryBuilderOperation:n}=r(1);e.exports={FirstOperation:class extends n{onBuildKnex(e,t){const r=t.modelClass();t.isFind()&&r.useLimitInFirst&&e.limit(1)}onAfter3(e,t){return Array.isArray(t)?t[0]:t}}}},function(e,t,r){\"use strict\";const{ObjectionToKnexConvertingOperation:n}=r(4),{isPlainObject:o,isString:s}=r(0),i=/\\s+as\\s+/i;e.exports={FromOperation:class extends n{constructor(e,t){super(e,t),this.table=null,this.alias=null}onAdd(e,t){const r=super.onAdd(e,t),n=function(e,t){return s(e)?function(e){if(i.test(e)){const t=e.split(i);return{table:t[0].trim(),alias:t[1].trim()}}return{table:e.trim(),alias:null}}(e):o(e)?function(e,t){for(const r of Object.keys(e)){const n=e[r].trim();if(n===t.modelClass().getTableName())return{alias:r,table:n}}throw new Error(`one of the tables in ${JSON.stringify(e)} must be the query's model class's table.`)}(e,t):{table:null,alias:null}}(this.args[0],e);return n.table&&(e.tableName(n.table),this.table=n.table),n.alias&&(e.aliasFor(e.modelClass().getTableName(),n.alias),this.alias=n.alias),r}onBuildKnex(e,t){e.from.apply(e,this.getKnexArgs(t))}clone(){const e=super.clone();return e.table=this.table,e.alias=this.alias,e}}}},function(e,t,r){\"use strict\";e.exports={ModifierNotFoundError:class extends Error{constructor(e){super(`Unable to determine modify function from provided value: \"${e}\".`),this.modifierName=e}}}},function(e,t,r){\"use strict\";const{UpdateOperation:n}=r(22);e.exports={RelationUpdateOperation:class extends n{constructor(e,t){super(e,t),this.relation=t.relation,this.owner=t.owner}onBuild(e){super.onBuild(e),this.relation.findQuery(e,this.owner)}}}},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];\".\"===o?e.splice(n,1):\"..\"===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift(\"..\");return e}var n=/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/,o=function(e){return n.exec(e).slice(1)};function s(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t=\"\",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var i=o>=0?arguments[o]:e.cwd();if(\"string\"!=typeof i)throw new TypeError(\"Arguments to path.resolve must be strings\");i&&(t=i+\"/\"+t,n=\"/\"===i.charAt(0))}return(n?\"/\":\"\")+(t=r(s(t.split(\"/\"),function(e){return!!e}),!n).join(\"/\"))||\".\"},t.normalize=function(e){var n=t.isAbsolute(e),o=\"/\"===i(e,-1);return(e=r(s(e.split(\"/\"),function(e){return!!e}),!n).join(\"/\"))||n||(e=\".\"),e&&o&&(e+=\"/\"),(n?\"/\":\"\")+e},t.isAbsolute=function(e){return\"/\"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(s(e,function(e,t){if(\"string\"!=typeof e)throw new TypeError(\"Arguments to path.join must be strings\");return e}).join(\"/\"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&\"\"===e[t];t++);for(var r=e.length-1;r>=0&&\"\"===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var o=n(e.split(\"/\")),s=n(r.split(\"/\")),i=Math.min(o.length,s.length),a=i,l=0;l<i;l++)if(o[l]!==s[l]){a=l;break}var u=[];for(l=a;l<o.length;l++)u.push(\"..\");return(u=u.concat(s.slice(a))).join(\"/\")},t.sep=\"/\",t.delimiter=\":\",t.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):\".\"},t.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return o(e)[3]};var i=\"b\"===\"ab\".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(73))},function(e,t,r){var n={\"./assert\":13,\"./assert.js\":13,\"./buildUtils\":30,\"./buildUtils.js\":30,\"./classUtils\":62,\"./classUtils.js\":62,\"./clone\":44,\"./clone.js\":44,\"./createModifier\":16,\"./createModifier.js\":16,\"./deprecate\":12,\"./deprecate.js\":12,\"./identifierMapping\":63,\"./identifierMapping.js\":63,\"./internalPropUtils\":11,\"./internalPropUtils.js\":11,\"./knexUtils\":3,\"./knexUtils.js\":3,\"./mixin\":64,\"./mixin.js\":64,\"./normalizeIds\":17,\"./normalizeIds.js\":17,\"./objectUtils\":0,\"./objectUtils.js\":0,\"./parseFieldExpression\":32,\"./parseFieldExpression.js\":32,\"./promiseUtils\":2,\"./promiseUtils/\":2,\"./promiseUtils/after\":45,\"./promiseUtils/after.js\":45,\"./promiseUtils/afterReturn\":46,\"./promiseUtils/afterReturn.js\":46,\"./promiseUtils/index\":2,\"./promiseUtils/index.js\":2,\"./promiseUtils/isPromise\":8,\"./promiseUtils/isPromise.js\":8,\"./promiseUtils/map\":48,\"./promiseUtils/map.js\":48,\"./promiseUtils/mapAfterAllReturn\":47,\"./promiseUtils/mapAfterAllReturn.js\":47,\"./promiseUtils/try\":49,\"./promiseUtils/try.js\":49,\"./resolveModel\":40,\"./resolveModel.js\":40,\"./tmpColumnUtils\":33,\"./tmpColumnUtils.js\":33};function o(e){var t=s(e);return r(t)}function s(e){var t=n[e];if(!(t+1)){var r=new Error(\"Cannot find module '\"+e+\"'\");throw r.code=\"MODULE_NOT_FOUND\",r}return t}o.keys=function(){return Object.keys(n)},o.resolve=s,e.exports=o,o.id=248},function(e,t,r){\"use strict\";const{RelationInsertOperation:n}=r(65);e.exports={HasManyInsertOperation:class extends n{onAdd(e,t){const r=super.onAdd(e,t);!function(e,t){const{isModels:r,isIdentifiers:n,isQueryBuilder:o}=e,{ownerProp:s}=t,i=r&&1===e.modelArray.length,a=n&&1===e.getNormalizedIdentifiers(s).length;if(!i&&!a&&!o)throw new Error([\"Can only insert items for one parent at a time in case of HasManyRelation.\",\"Otherwise multiple insert queries would need to be created.\",\"If you need to insert items for multiple parents, simply loop through them.\",\"That's the most performant way.\"].join(\" \"))}(this.owner,this.relation);const n=this.owner.getSplitProps(e,this.relation),o=this.relation.relatedProp;for(const e of this.models)for(let t=0,r=o.size;t<r;++t)o.setProp(e,t,n[0][t]);return r}async onAfter1(e,t){const r=await super.onAfter1(e,t);if(!this.assignResultToOwner)return r;if(this.owner.isModels)for(const e of this.owner.modelArray)e.$appendRelated(this.relation,r);return r}}}},function(e,t,r){\"use strict\";const{normalizeIds:n}=r(17),{RelateOperation:o}=r(36);e.exports={HasManyRelateOperation:class extends o{onAdd(e,t){return this.input=t[0],this.ids=n(t[0],this.relation.relatedModelClass.getIdRelationProperty(),{arrayOutput:!0}),function(e,t){const{isModels:r,isIdentifiers:n,isQueryBuilder:o}=e,{ownerProp:s}=t,i=r&&1===e.modelArray.length,a=n&&1===e.getNormalizedIdentifiers(s).length;if(!i&&!a&&!o)throw new Error([\"Can only relate items for one parent at a time in case of HasManyRelation.\",\"Otherwise multiple update queries would need to be created.\",\"If you need to relate items for multiple parents, simply loop through them.\",\"That's the most performant way.\"].join(\" \"))}(this.owner,this.relation),!0}queryExecutor(e){const t={},r=this.relation.relatedProp,n=this.owner.getSplitProps(e,this.relation);return r.forEach(e=>{r.patch(t,e,n[0][e])}),this.relation.relatedModelClass.query().childQueryOf(e).patch(t).copyFrom(e,e.constructor.JoinSelector).copyFrom(e,e.constructor.WhereSelector).findByIds(this.ids).modify(this.relation.modify)}}}},function(e,t,r){\"use strict\";const{UnrelateOperation:n}=r(37);e.exports={HasManyUnrelateOperation:class extends n{queryExecutor(e){const t={},r=this.relation.relatedProp,n=this.owner.getProps(this.relation),o=r.refs(e);return r.forEach(e=>{r.patch(t,e,null)}),this.relation.relatedModelClass.query().childQueryOf(e).patch(t).copyFrom(e,e.constructor.JoinSelector).copyFrom(e,e.constructor.WhereSelector).whereInComposite(o,n).modify(this.relation.modify)}}}},function(e,t,r){\"use strict\";const{RelationFindOperation:n}=r(59),{getTempColumn:o}=r(33);e.exports={ManyToManyFindOperation:class extends n{constructor(e,t){super(e,t),this.ownerJoinColumnAlias=new Array(this.relation.joinTableOwnerProp.size);for(let e=0,t=this.ownerJoinColumnAlias.length;e<t;++e)this.ownerJoinColumnAlias[e]=o(e)}onBuild(e){const t=this.relation.relatedModelClass;if(this.maybeApplyAlias(e),this.relation.findQuery(e,this.owner),!e.has(e.constructor.SelectSelector)){const r=e.tableRefFor(t);e.select(`${r}.*`);for(const t of this.relation.joinTableExtras){const r=e.tableRefFor(this.relation.joinTable);e.select(`${r}.${t.joinTableCol} as ${t.aliasCol}`)}}this.assignResultToOwner&&this.owner.isModels&&this.selectMissingJoinColumns(e)}onAfter2(e,t){const r=this.relation.isOneToOne();if(this.assignResultToOwner&&this.owner.isModels){const e=this.owner.modelArray,n=this.relation.ownerProp,o=new Map;for(let e=0,r=t.length;e<r;++e){const r=t[e],n=r.$propKey(this.ownerJoinColumnAlias);let s=o.get(n);s||(s=[],o.set(n,s)),s.push(r)}for(let t=0,s=e.length;t<s;++t){const s=e[t],i=n.propKey(s),a=o.get(i);s[this.relationProperty]=r?a&&a[0]||null:a||[]}}return t}clone(){const e=super.clone();return e.ownerJoinColumnAlias=this.ownerJoinColumnAlias.slice(),e}selectMissingJoinColumns(e){const{relatedModelClass:t,joinTableOwnerProp:r}=this.relation;r.forEach(n=>{const o=r.ref(e,n),s=t.columnNameToPropertyName(this.ownerJoinColumnAlias[n]);e.select(o.as(this.ownerJoinColumnAlias[n])),this.omitProps.push(s)}),super.selectMissingJoinColumns(e)}}}},function(e,t,r){\"use strict\";const{RelationInsertOperation:n}=r(65),{ManyToManyRelateOperation:o}=r(108);e.exports={ManyToManyInsertOperation:class extends n{onAdd(e,t){const r=super.onAdd(e,t);return this.relation.omitExtraProps(this.models),r}async onAfter1(e,t){const r=await super.onAfter1(e,t),n=new o(\"relate\",{dontCopyReturning:!0,relation:this.relation,owner:this.owner}),s=r.filter(e=>this.relation.relatedProp.hasProps(e));if(this.assignResultToOwner&&this.owner.isModels)for(const e of this.owner.modelArray)e.$appendRelated(this.relation,r);return 0===s.length?r:(n.onAdd(e,[s]),await n.queryExecutor(e),r)}}}},function(e,t,r){\"use strict\";const{ManyToManyUnrelateOperationBase:n}=r(109),{ManyToManyModifyMixin:o}=r(41);e.exports={ManyToManyUnrelateOperation:class extends(o(n)){get modifyMainQuery(){return!1}}}},function(e,t,r){\"use strict\";const{ManyToManyUnrelateOperationBase:n}=r(109),{ManyToManySqliteModifyMixin:o}=r(67);e.exports={ManyToManyUnrelateSqliteOperation:class extends(o(n)){get modifyMainQuery(){return!1}}}},function(e,t,r){\"use strict\";const{ManyToManyUpdateOperationBase:n}=r(110),{ManyToManyModifyMixin:o}=r(41);e.exports={ManyToManyUpdateOperation:class extends(o(n)){}}},function(e,t,r){\"use strict\";const{ManyToManyUpdateOperationBase:n}=r(110),{ManyToManySqliteModifyMixin:o}=r(67);e.exports={ManyToManyUpdateSqliteOperation:class extends(o(n)){}}},function(e,t,r){\"use strict\";const{ManyToManyDeleteOperationBase:n}=r(111),{ManyToManyModifyMixin:o}=r(41);e.exports={ManyToManyDeleteOperation:class extends(o(n)){}}},function(e,t,r){\"use strict\";const{ManyToManyDeleteOperationBase:n}=r(111),{ManyToManySqliteModifyMixin:o}=r(67);e.exports={ManyToManyDeleteSqliteOperation:class extends(o(n)){}}},function(e,t,r){\"use strict\";const{RelationInsertOperation:n}=r(65),{BelongsToOneRelateOperation:o}=r(113);e.exports={BelongsToOneInsertOperation:class extends n{onAdd(e,t){const r=super.onAdd(e,t);if(this.models.length>1)throw this.relation.createError(\"can only insert one model to a BelongsToOneRelation\");return r}async onAfter1(e,t){const r=await super.onAfter1(e,t);if(!e.isExecutable())return r;const n=new o(\"relate\",{relation:this.relation,owner:this.owner});if(this.assignResultToOwner&&this.owner.isModels)for(const e of this.owner.modelArray)e.$setRelated(this.relation,r);return n.onAdd(e,[r]),await n.queryExecutor(e),r}}}},function(e,t,r){\"use strict\";const{RelationDeleteOperation:n}=r(107);e.exports={BelongsToOneDeleteOperation:class extends n{onAfter1(e,t){if(this.owner.isModels){const e=this.relation.ownerProp;for(const t of this.owner.modelArray)e.forEach(r=>{e.setProp(t,r,null)})}return t}}}},function(e,t,r){\"use strict\";const{UnrelateOperation:n}=r(37);e.exports={BelongsToOneUnrelateOperation:class extends n{onAdd(){const e=new Array(this.relation.ownerProp.size);return this.relation.ownerProp.forEach(t=>{e[t]=null}),this.ids=[e],!0}queryExecutor(e){const t={},r=this.relation.ownerProp;r.forEach(e=>{const n=this.ids[0][e];if(this.owner.isModels)for(const t of this.owner.modelArray)r.setProp(t,e,n);r.patch(t,e,n)});const n=this.relation.ownerModelClass.getIdRelationProperty(),o=n.refs(e),s=this.owner.getProps(this.relation,n),i=this.relation.ownerModelClass.query().childQueryOf(e).patch(t).whereInComposite(o,s);return e.has(e.constructor.WhereSelector)&&i.whereExists(this.relation.ownerModelClass.relatedQuery(this.relation.name).copyFrom(e,e.constructor.JoinSelector).copyFrom(e,e.constructor.WhereSelector)),i}}}},function(e,t,r){\"use strict\";const{FindOperation:n}=r(56),{assertHasId:o}=r(13);e.exports={InstanceFindOperation:class extends n{constructor(e,t){super(e,t),this.instance=t.instance}onBuild(e){o(this.instance),e.findById(this.instance.$id())}}}},function(e,t,r){\"use strict\";const{InsertOperation:n}=r(23);e.exports={InstanceInsertOperation:class extends n{constructor(e,t){super(e,t),this.instance=t.instance}onAdd(e,t){return t&&0!==t.length?t[0]=this.instance:t=[this.instance],super.onAdd(e,t)}}}},function(e,t,r){\"use strict\";const{UpdateOperation:n}=r(22),{assertHasId:o}=r(13),{isObject:s}=r(0);e.exports={InstanceUpdateOperation:class extends n{constructor(e,t){super(e,t),this.instance=t.instance,this.modelOptions.old=t.instance}onAdd(e,t){const r=super.onAdd(e,t);return this.model||(this.model=this.instance),r}onBuild(e){super.onBuild(e),o(this.instance),e.findById(this.instance.$id())}async onAfter2(e,t){return Array.isArray(t)&&(t=t[0]),t=await super.onAfter2(e,t),this.instance.$set(this.model),s(t)&&this.instance.$set(t),t}}}},function(e,t,r){\"use strict\";const{DeleteOperation:n}=r(35),{assertHasId:o}=r(13);e.exports={InstanceDeleteOperation:class extends n{constructor(e,t){super(e,t),this.instance=t.instance}async onBefore2(e,t){return await this.instance.$beforeDelete(e.context()),await super.onBefore2(e,t),t}onBuild(e){super.onBuild(e),o(this.instance),e.findById(this.instance.$id())}async onAfter2(e,t){return Array.isArray(t)&&(t=t[0]),await this.instance.$afterDelete(e.context()),super.onAfter2(e,t)}}}},function(e,t,r){\"use strict\";e.exports={initialize:async function(e,t){t||(e=(t=e)[0].knex()),await Promise.all(t.map(t=>t.fetchTableMetadata({knex:e})))}}},function(e,t,r){\"use strict\";const{asArray:n,isObject:o}=r(0),{buildArg:s}=r(30);class i{constructor(e){this._value=e,this._cast=null,this._toJson=o(e),this._toArray=!1}get cast(){return this._cast}castText(){return this.castTo(\"text\")}castInt(){return this.castTo(\"integer\")}castBigInt(){return this.castTo(\"bigint\")}castFloat(){return this.castTo(\"float\")}castDecimal(){return this.castTo(\"decimal\")}castReal(){return this.castTo(\"real\")}castBool(){return this.castTo(\"boolean\")}castJson(){return this._toArray=!1,this._toJson=!0,this._cast=\"jsonb\",this}castTo(e){return this._cast=e,this}asArray(){return this._toJson=!1,this._toArray=!0,this}toKnexRaw(e){let t=null,r=null;return this._toJson?(r=JSON.stringify(this._value),t=\"?\"):this._toArray?t=`ARRAY[${(r=n(this._value).map(t=>s(t,e))).map(()=>\"?\").join(\", \")}]`:(r=this._value,t=\"?\"),this._cast&&(t=`CAST(${t} AS ${this._cast})`),e.knex().raw(t,r)}}e.exports={ValueBuilder:i,val:function(e){return new i(e)}}}]);","extractedComments":[]}